[
    {
        "id": "e2bc56d21df6c7e2",
        "type": "subflow",
        "name": "Loops (2) (2)",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 40,
                "wires": [
                    {
                        "id": "6e201adad29b6adc"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 640,
                "y": 40,
                "wires": [
                    {
                        "id": "6b26b73afb9a773b",
                        "port": 0
                    }
                ]
            },
            {
                "x": 460,
                "y": 220,
                "wires": [
                    {
                        "id": "4761d53144c183b8",
                        "port": 1
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "6e201adad29b6adc",
        "type": "function",
        "z": "e2bc56d21df6c7e2",
        "name": "InitiateLoop",
        "func": "var data = msg.payload;\nvar limit = data.length;\nflow.set(\"data\",data);\nflow.set(\"limit\",limit);\nmsg.topic = \"0\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 170,
        "y": 40,
        "wires": [
            [
                "6b26b73afb9a773b"
            ]
        ]
    },
    {
        "id": "6b26b73afb9a773b",
        "type": "function",
        "z": "e2bc56d21df6c7e2",
        "name": "Loop",
        "func": "var data = flow.get(\"data\");\nvar count = parseInt(msg.topic);\nmsg.payload = data[count];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 310,
        "y": 40,
        "wires": [
            [
                "ab8aea51564ab951"
            ]
        ]
    },
    {
        "id": "5606f029a74ef79a",
        "type": "link in",
        "z": "e2bc56d21df6c7e2",
        "name": "",
        "links": [
            "d8bbc6a6f71048e3"
        ],
        "x": 215,
        "y": 80,
        "wires": [
            [
                "6b26b73afb9a773b"
            ]
        ]
    },
    {
        "id": "ab8aea51564ab951",
        "type": "link out",
        "z": "e2bc56d21df6c7e2",
        "name": "",
        "links": [
            "91d866483d2eb825"
        ],
        "x": 395,
        "y": 80,
        "wires": []
    },
    {
        "id": "d8bbc6a6f71048e3",
        "type": "link out",
        "z": "e2bc56d21df6c7e2",
        "name": "",
        "links": [
            "5606f029a74ef79a"
        ],
        "x": 615,
        "y": 180,
        "wires": []
    },
    {
        "id": "91d866483d2eb825",
        "type": "link in",
        "z": "e2bc56d21df6c7e2",
        "name": "",
        "links": [
            "ab8aea51564ab951"
        ],
        "x": 95,
        "y": 180,
        "wires": [
            [
                "dc8f1944d31e0153"
            ]
        ]
    },
    {
        "id": "dc8f1944d31e0153",
        "type": "function",
        "z": "e2bc56d21df6c7e2",
        "name": "Increment",
        "func": "var limit = flow.get(\"limit\");\nvar count = parseInt(msg.topic);\ncount++;\nif(count>=limit){\n    msg.payload = null;\n}\nmsg.topic = String(count);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 200,
        "y": 180,
        "wires": [
            [
                "4761d53144c183b8"
            ]
        ]
    },
    {
        "id": "4761d53144c183b8",
        "type": "switch",
        "z": "e2bc56d21df6c7e2",
        "name": "Continue?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            },
            {
                "t": "null"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 180,
        "wires": [
            [
                "dd5129946861b36d"
            ],
            []
        ]
    },
    {
        "id": "dd5129946861b36d",
        "type": "delay",
        "z": "e2bc56d21df6c7e2",
        "name": "",
        "pauseType": "delayv",
        "timeout": "1",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 500,
        "y": 180,
        "wires": [
            [
                "d8bbc6a6f71048e3"
            ]
        ]
    },
    {
        "id": "995c7ab2e7243cc5",
        "type": "subflow",
        "name": "Loops (6)",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 40,
                "wires": [
                    {
                        "id": "f53c5968ecb8d687"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 640,
                "y": 40,
                "wires": [
                    {
                        "id": "bdb21354cbadb584",
                        "port": 0
                    }
                ]
            },
            {
                "x": 460,
                "y": 220,
                "wires": [
                    {
                        "id": "f0866e8454d67480",
                        "port": 1
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "f53c5968ecb8d687",
        "type": "function",
        "z": "995c7ab2e7243cc5",
        "name": "InitiateLoop",
        "func": "var data = msg.payload;\nvar limit = data.length;\nflow.set(\"data\",data);\nflow.set(\"limit\",limit);\nmsg.topic = \"0\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 170,
        "y": 40,
        "wires": [
            [
                "bdb21354cbadb584"
            ]
        ]
    },
    {
        "id": "bdb21354cbadb584",
        "type": "function",
        "z": "995c7ab2e7243cc5",
        "name": "Loop",
        "func": "var data = flow.get(\"data\");\nvar count = parseInt(msg.topic);\nmsg.payload = data[count];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 310,
        "y": 40,
        "wires": [
            [
                "b5daf68a41a6d52f"
            ]
        ]
    },
    {
        "id": "3dda129f1bcaf996",
        "type": "link in",
        "z": "995c7ab2e7243cc5",
        "name": "",
        "links": [
            "0ab821ac38f42b7a"
        ],
        "x": 215,
        "y": 80,
        "wires": [
            [
                "bdb21354cbadb584"
            ]
        ]
    },
    {
        "id": "b5daf68a41a6d52f",
        "type": "link out",
        "z": "995c7ab2e7243cc5",
        "name": "",
        "links": [
            "8f21f664bfe0a9d7"
        ],
        "x": 395,
        "y": 80,
        "wires": []
    },
    {
        "id": "0ab821ac38f42b7a",
        "type": "link out",
        "z": "995c7ab2e7243cc5",
        "name": "",
        "links": [
            "3dda129f1bcaf996"
        ],
        "x": 615,
        "y": 180,
        "wires": []
    },
    {
        "id": "8f21f664bfe0a9d7",
        "type": "link in",
        "z": "995c7ab2e7243cc5",
        "name": "",
        "links": [
            "b5daf68a41a6d52f"
        ],
        "x": 95,
        "y": 180,
        "wires": [
            [
                "49543e49c509c592"
            ]
        ]
    },
    {
        "id": "49543e49c509c592",
        "type": "function",
        "z": "995c7ab2e7243cc5",
        "name": "Increment",
        "func": "var limit = flow.get(\"limit\");\nvar count = parseInt(msg.topic);\ncount++;\nif(count>=limit){\n    msg.payload = null;\n}\nmsg.topic = String(count);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 200,
        "y": 180,
        "wires": [
            [
                "f0866e8454d67480"
            ]
        ]
    },
    {
        "id": "f0866e8454d67480",
        "type": "switch",
        "z": "995c7ab2e7243cc5",
        "name": "Continue?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            },
            {
                "t": "null"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 350,
        "y": 180,
        "wires": [
            [
                "d8a843c20ae3436f"
            ],
            []
        ]
    },
    {
        "id": "d8a843c20ae3436f",
        "type": "delay",
        "z": "995c7ab2e7243cc5",
        "name": "",
        "pauseType": "delayv",
        "timeout": "100",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 500,
        "y": 180,
        "wires": [
            [
                "0ab821ac38f42b7a"
            ]
        ]
    },
    {
        "id": "0ef28c36cc076eeb",
        "type": "tab",
        "label": "Record Data",
        "disabled": false,
        "info": ""
    },
    {
        "id": "be2866c2996d54fc",
        "type": "tcp in",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "server": "server",
        "host": "",
        "port": "8234",
        "datamode": "stream",
        "datatype": "utf8",
        "newline": "",
        "topic": "",
        "base64": false,
        "x": 80,
        "y": 40,
        "wires": [
            [
                "e474b45bc25a49d0",
                "16bb2fbcd3de0d7e"
            ]
        ]
    },
    {
        "id": "e474b45bc25a49d0",
        "type": "tcp out",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "host": "localhost",
        "port": "8234",
        "beserver": "reply",
        "base64": false,
        "end": false,
        "x": 410,
        "y": 40,
        "wires": []
    },
    {
        "id": "885a93b8cc3817f6",
        "type": "function",
        "z": "0ef28c36cc076eeb",
        "name": "Detect Device",
        "func": "var d = msg.payload;\ntry{\n    var s = d.split(',');\n    msg.payload = s;\n    msg.topic = \"Done\";\n    if(msg.payload[1]==\"error\" || msg.payload[1].substring(0,3) == \"err\"){\n        msg.topic = \"Error\";\n        return msg;\n    }\n    return msg;\n}catch(x){\n    msg.payload = null;\n    msg.topic = null;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 180,
        "y": 340,
        "wires": [
            [
                "08a3487acaee01e7",
                "0bf984113d93a8a8"
            ]
        ]
    },
    {
        "id": "08a3487acaee01e7",
        "type": "switch",
        "z": "0ef28c36cc076eeb",
        "name": "Catch",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Done",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 330,
        "y": 340,
        "wires": [
            [
                "39bd888e53a3fe98"
            ]
        ]
    },
    {
        "id": "6949b517ba9e6a60",
        "type": "link in",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "links": [
            "16bb2fbcd3de0d7e"
        ],
        "x": 35,
        "y": 180,
        "wires": [
            [
                "8465a652a1e79218"
            ]
        ]
    },
    {
        "id": "f5191930abb7dcf7",
        "type": "link in",
        "z": "0ef28c36cc076eeb",
        "name": "TCP OUT",
        "links": [
            "1468408a.0104ef",
            "0fc28c70be52a0a3",
            "237ffbf8.bdd0e4",
            "58493e010852aa31",
            "f5fead2e.8f9f7",
            "af1a5e18d7d2ae48",
            "6424eae.2ef0a14",
            "f042ac3a2f1b8b64",
            "a38a422f065cafe6",
            "35ab2c5c.4b3924"
        ],
        "x": 255,
        "y": 80,
        "wires": [
            [
                "e474b45bc25a49d0",
                "8ca4dc23e037c2ae"
            ]
        ]
    },
    {
        "id": "39bd888e53a3fe98",
        "type": "function",
        "z": "0ef28c36cc076eeb",
        "name": "Store To Influx",
        "func": "var d = msg.payload;\nvar json = {};\nfor(i=1;i<d.length;i++){\n    json['value'+String(i)]=d[i];\n}\njson['time'] = Date.now();\nmsg.measurement= d[0];\nmsg.payload = json;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 340,
        "wires": [
            [
                "36353f7cca54322c",
                "47148f1a33e7c4b5",
                "6566f2bd525edb8e",
                "aab2da4e7846ae03"
            ]
        ]
    },
    {
        "id": "16bb2fbcd3de0d7e",
        "type": "link out",
        "z": "0ef28c36cc076eeb",
        "name": "TCP IN",
        "links": [
            "6949b517ba9e6a60"
        ],
        "x": 195,
        "y": 80,
        "wires": []
    },
    {
        "id": "e59bb469fdd97c5f",
        "type": "debug",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 670,
        "y": 40,
        "wires": []
    },
    {
        "id": "8465a652a1e79218",
        "type": "function",
        "z": "0ef28c36cc076eeb",
        "name": "Remove Ln and $",
        "func": "var d = msg.payload;\nvar ds = d.replace(/[\\r\\n]/gm, '');\nds = ds.replace('$', '');\nmsg.payload= ds;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 170,
        "y": 180,
        "wires": [
            [
                "0a4683b7f5387909",
                "4e0de209a204d8e6",
                "f93596260e4de781"
            ]
        ]
    },
    {
        "id": "918a1486b5cc1ba4",
        "type": "influxdb out",
        "z": "0ef28c36cc076eeb",
        "influxdb": "29e58916.561bb6",
        "name": "",
        "measurement": "",
        "precision": "",
        "retentionPolicy": "",
        "database": "database",
        "precisionV18FluxV20": "ms",
        "retentionPolicyV18Flux": "",
        "org": "iotelkafi",
        "bucket": "DTI",
        "x": 780,
        "y": 340,
        "wires": []
    },
    {
        "id": "36353f7cca54322c",
        "type": "debug",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 710,
        "y": 280,
        "wires": []
    },
    {
        "id": "09c1c364703780f3",
        "type": "inject",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 520,
        "wires": [
            [
                "bba798d4bd8e84ae"
            ]
        ]
    },
    {
        "id": "bba798d4bd8e84ae",
        "type": "function",
        "z": "0ef28c36cc076eeb",
        "name": " ",
        "func": "msg.payload = \"RLY02,10,1#\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 280,
        "y": 520,
        "wires": [
            [
                "0fc28c70be52a0a3"
            ]
        ]
    },
    {
        "id": "0fc28c70be52a0a3",
        "type": "link out",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "links": [
            "f5191930abb7dcf7"
        ],
        "x": 415,
        "y": 520,
        "wires": []
    },
    {
        "id": "7c7c639b1ba3ed2c",
        "type": "inject",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 560,
        "wires": [
            [
                "37e44b8a38168048"
            ]
        ]
    },
    {
        "id": "37e44b8a38168048",
        "type": "function",
        "z": "0ef28c36cc076eeb",
        "name": " ",
        "func": "msg.payload = \"RLY02,10,0#\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 280,
        "y": 560,
        "wires": [
            [
                "0fc28c70be52a0a3"
            ]
        ]
    },
    {
        "id": "0bf984113d93a8a8",
        "type": "switch",
        "z": "0ef28c36cc076eeb",
        "name": "If Error",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Error",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 330,
        "y": 300,
        "wires": [
            [
                "13931f49cc321dba"
            ]
        ]
    },
    {
        "id": "13931f49cc321dba",
        "type": "function",
        "z": "0ef28c36cc076eeb",
        "name": "Record Error",
        "func": "var d = msg.payload;\nvar json = {};\nfor(i=1;i<d.length;i++){\n    json['value'+String(i)]=d[i];\n}\njson['time'] = Date.now();\nmsg.measurement= d[0]+\"LastError\";\nmsg.payload = json;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 470,
        "y": 300,
        "wires": [
            [
                "918a1486b5cc1ba4",
                "36353f7cca54322c"
            ]
        ]
    },
    {
        "id": "0a4683b7f5387909",
        "type": "link out",
        "z": "0ef28c36cc076eeb",
        "name": "DoneFilter",
        "links": [
            "9d6f942c0414c42f",
            "17965ba918fa4ed7"
        ],
        "x": 315,
        "y": 220,
        "wires": []
    },
    {
        "id": "9d6f942c0414c42f",
        "type": "link in",
        "z": "0ef28c36cc076eeb",
        "name": "msg-in",
        "links": [
            "0a4683b7f5387909"
        ],
        "x": 560,
        "y": 40,
        "wires": [
            [
                "e59bb469fdd97c5f"
            ]
        ]
    },
    {
        "id": "4e0de209a204d8e6",
        "type": "link out",
        "z": "0ef28c36cc076eeb",
        "name": "TesterIN",
        "links": [
            "be42fa309ecfb012"
        ],
        "x": 315,
        "y": 140,
        "wires": []
    },
    {
        "id": "cbc9d17dcb6335cb",
        "type": "link in",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "links": [
            "f93596260e4de781"
        ],
        "x": 55,
        "y": 340,
        "wires": [
            [
                "885a93b8cc3817f6"
            ]
        ]
    },
    {
        "id": "f93596260e4de781",
        "type": "link out",
        "z": "0ef28c36cc076eeb",
        "name": "StoretoInflux",
        "links": [
            "cbc9d17dcb6335cb"
        ],
        "x": 315,
        "y": 180,
        "wires": []
    },
    {
        "id": "46466c611f33c22f",
        "type": "mqtt out",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "topic": "abc",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "13dfac52.614f14",
        "x": 290,
        "y": 640,
        "wires": []
    },
    {
        "id": "62e5cb91f00da2aa",
        "type": "inject",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "abc",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 640,
        "wires": [
            [
                "46466c611f33c22f"
            ]
        ]
    },
    {
        "id": "eba52179a5661c44",
        "type": "mqtt in",
        "z": "0ef28c36cc076eeb",
        "name": "New Gateway",
        "topic": "gw57/data",
        "qos": "2",
        "datatype": "auto",
        "broker": "13dfac52.614f14",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 330,
        "y": 400,
        "wires": [
            [
                "184969d80b2f5ed7",
                "d2e2163b4cbc4894",
                "802a73af9e9e7500"
            ]
        ]
    },
    {
        "id": "47148f1a33e7c4b5",
        "type": "debug",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 400,
        "wires": []
    },
    {
        "id": "184969d80b2f5ed7",
        "type": "function",
        "z": "0ef28c36cc076eeb",
        "name": " ",
        "func": "var d = msg.payload;\nvar json = {\n    \"time\" : Date.now(),\n    \"type\" : d.split(\",\")[0],\n    \"id\" : d.split(\",\")[1],\n    \"cmd\" : d.split(\",\")[2],\n    \"parameter\" : d.split(\",\")[3]\n}\nmsg.payload = json;\nmsg.measurement = \"NewGateway\";\nreturn msg;\n\nfunction scantype(x){\n    var type = [0,\"Current\",\"Relay\",\"Input\"];\n    return type[parseInt(x)];\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 400,
        "wires": [
            [
                "47148f1a33e7c4b5",
                "36353f7cca54322c",
                "6566f2bd525edb8e",
                "aab2da4e7846ae03",
                "1f86bf90489752be"
            ]
        ]
    },
    {
        "id": "8ca4dc23e037c2ae",
        "type": "link out",
        "z": "0ef28c36cc076eeb",
        "d": true,
        "name": "TCPOUT---",
        "links": [
            "df209d83b7ed4c79"
        ],
        "x": 315,
        "y": 80,
        "wires": []
    },
    {
        "id": "b0fefb63d3c236ca",
        "type": "link in",
        "z": "0ef28c36cc076eeb",
        "d": true,
        "name": "TCPIN---",
        "links": [
            "9452b5658f25daf0"
        ],
        "x": 135,
        "y": 80,
        "wires": [
            [
                "16bb2fbcd3de0d7e"
            ]
        ]
    },
    {
        "id": "faf6b5ec5d4c4f99",
        "type": "link in",
        "z": "0ef28c36cc076eeb",
        "name": "newgw",
        "links": [
            "1c930879ef370cd1"
        ],
        "x": 415,
        "y": 440,
        "wires": [
            [
                "184969d80b2f5ed7"
            ]
        ]
    },
    {
        "id": "c12ec55f30419da7",
        "type": "mysql",
        "z": "0ef28c36cc076eeb",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 910,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "16e046dab6233185",
        "type": "function",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "func": "\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "6566f2bd525edb8e",
        "type": "function",
        "z": "0ef28c36cc076eeb",
        "name": " ",
        "func": "var d = msg.payload;\nif(msg.measurement==\"GW04\" || msg.measurement.substring(0,4)==\"FLOW\"){\n    msg.payload= null;\n    return msg;\n}\nif(msg.measurement == \"NewGateway\"){\n    msg.topic = \"INSERT INTO `alldevice`(`time`,`deviceid`,`val1`,`val2`,`val3`,`sta`)VALUES(\";\n    msg.topic += String(d.time)+\",\";\n    msg.topic += \"'\"+String(d.id)+\"',\";\n    msg.topic += String(d.cmd)+\",\";\n    msg.topic += String(d.parameter)+\",\";\n    msg.topic += String(d.type)+\",\";\n    msg.topic += \"0);\";\n}else{\n    msg.topic = \"INSERT INTO `alldevice`(`time`,`deviceid`,`val1`,`val2`,`val3`,`sta`)VALUES(\";\n    msg.topic += String(d.time)+\",\";\n    msg.topic += \"'\"+String(msg.measurement)+\"',\";\n    msg.topic += String(d.value1)+\",\";\n    if(msg.measurement == \"FS140\"){\n        msg.topic += \"0,\";\n        msg.topic += \"0,\";\n        msg.topic += \"0);\";\n        return msg;\n    }\n    msg.topic += String(d.value2)+\",\";\n    msg.topic += String(d.value3)+\",\";\n    msg.topic += \"0);\";\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 240,
        "wires": [
            [
                "59f22af079923f6c"
            ]
        ]
    },
    {
        "id": "59f22af079923f6c",
        "type": "switch",
        "z": "0ef28c36cc076eeb",
        "name": " ",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 790,
        "y": 240,
        "wires": [
            [
                "c12ec55f30419da7"
            ]
        ]
    },
    {
        "id": "aab2da4e7846ae03",
        "type": "debug",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 200,
        "wires": []
    },
    {
        "id": "1e39da50ec9cf4f6",
        "type": "mqtt out",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "topic": "gw57/cmd",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "13dfac52.614f14",
        "x": 720,
        "y": 80,
        "wires": []
    },
    {
        "id": "97d83e030cb49df5",
        "type": "link in",
        "z": "0ef28c36cc076eeb",
        "name": "mqttout",
        "links": [
            "d9b186fc5f921232",
            "ddb94c5aa21b9a96"
        ],
        "x": 625,
        "y": 80,
        "wires": [
            [
                "1e39da50ec9cf4f6"
            ]
        ]
    },
    {
        "id": "532ae9d26d5959f7",
        "type": "inject",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "TBD101,0#",
        "payloadType": "str",
        "x": 410,
        "y": 100,
        "wires": [
            [
                "e474b45bc25a49d0"
            ]
        ]
    },
    {
        "id": "3131b84a0bd19ce7",
        "type": "inject",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "TBD102,0#",
        "payloadType": "str",
        "x": 410,
        "y": 140,
        "wires": [
            [
                "e474b45bc25a49d0"
            ]
        ]
    },
    {
        "id": "6b200b0d9d3ae44d",
        "type": "inject",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "PHS101,0#",
        "payloadType": "str",
        "x": 410,
        "y": 180,
        "wires": [
            [
                "e474b45bc25a49d0"
            ]
        ]
    },
    {
        "id": "d8e413c4fc6360f8",
        "type": "inject",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "PHS102,0#",
        "payloadType": "str",
        "x": 410,
        "y": 220,
        "wires": [
            [
                "e474b45bc25a49d0"
            ]
        ]
    },
    {
        "id": "beceec875d3da611",
        "type": "inject",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "CLR101,0#",
        "payloadType": "str",
        "x": 410,
        "y": 260,
        "wires": [
            [
                "e474b45bc25a49d0"
            ]
        ]
    },
    {
        "id": "a7532613067b6621",
        "type": "inject",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "FS140,0#",
        "payloadType": "str",
        "x": 380,
        "y": 300,
        "wires": [
            [
                "e474b45bc25a49d0"
            ]
        ]
    },
    {
        "id": "dd349170ef392f60",
        "type": "switch",
        "z": "0ef28c36cc076eeb",
        "name": " ",
        "property": "check",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "11",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 750,
        "y": 500,
        "wires": [
            [
                "4c8e9bea5e761025"
            ]
        ]
    },
    {
        "id": "1f86bf90489752be",
        "type": "function",
        "z": "0ef28c36cc076eeb",
        "name": " ",
        "func": "msg.check = msg.payload.type;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 500,
        "wires": [
            [
                "dd349170ef392f60",
                "62527a1dfe2e3069"
            ]
        ]
    },
    {
        "id": "4c8e9bea5e761025",
        "type": "function",
        "z": "0ef28c36cc076eeb",
        "name": " ",
        "func": "msg.res = parseInt(String(conv(msg.payload.parameter)));\nif(msg.payload.id == \"1\"){\n    msg.payload = msg.res+10;\n}else if(msg.payload.id == \"2\"){\n    msg.payload = msg.res+13;\n}\nmsg.payload = String(msg.payload)+ \" l/s\";\nmsg.topic = \"CONVERSI\";\nreturn msg;\n\nfunction conv(x) {\n    var val = parseInt(String(x));\n    var r1 = [400, 2000];\n    var r2 = [0, 833.33];\n    var res = (val - r1[0]) * (r2[1] - r2[0]) / (r1[1] - r1[0]) + r2[0];\n    return res;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 500,
        "wires": [
            [
                "77d51779e65643d3"
            ]
        ]
    },
    {
        "id": "77d51779e65643d3",
        "type": "debug",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1070,
        "y": 500,
        "wires": []
    },
    {
        "id": "ddc0746923ce47a7",
        "type": "inject",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "TBD104,0#",
        "payloadType": "str",
        "x": 150,
        "y": 140,
        "wires": [
            [
                "e474b45bc25a49d0"
            ]
        ]
    },
    {
        "id": "78a844f41bf0eebb",
        "type": "inject",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "TBD103,0#",
        "payloadType": "str",
        "x": 150,
        "y": 120,
        "wires": [
            [
                "e474b45bc25a49d0"
            ]
        ]
    },
    {
        "id": "62527a1dfe2e3069",
        "type": "switch",
        "z": "0ef28c36cc076eeb",
        "name": " ",
        "property": "check",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 750,
        "y": 540,
        "wires": [
            [
                "8d86f05007ae0ec2"
            ]
        ]
    },
    {
        "id": "8d86f05007ae0ec2",
        "type": "function",
        "z": "0ef28c36cc076eeb",
        "name": " ",
        "func": "var d = msg.payload;\nmsg.payload = d.type+\",\"+d.id+\",\"+d.cmd+\",\"+d.parameter;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 540,
        "wires": [
            [
                "718054d668ea876a",
                "58e5da49f1036714"
            ]
        ]
    },
    {
        "id": "718054d668ea876a",
        "type": "debug",
        "z": "0ef28c36cc076eeb",
        "name": "typetwo",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1020,
        "y": 620,
        "wires": []
    },
    {
        "id": "d2e2163b4cbc4894",
        "type": "debug",
        "z": "0ef28c36cc076eeb",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 570,
        "y": 520,
        "wires": []
    },
    {
        "id": "58e5da49f1036714",
        "type": "link out",
        "z": "0ef28c36cc076eeb",
        "name": "RecordRelay",
        "links": [
            "243370e5ab3d906f"
        ],
        "x": 975,
        "y": 540,
        "wires": []
    },
    {
        "id": "802a73af9e9e7500",
        "type": "function",
        "z": "0ef28c36cc076eeb",
        "name": " Input",
        "func": "if(msg.payload.split(\",\")[1]!=\"301\"){\n    msg.payload = null;\n}\nreturn msg;\n\n// 3,301,111,1381632",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 440,
        "wires": [
            [
                "99a77557e46ad847"
            ]
        ]
    },
    {
        "id": "ea596677d0f5da51",
        "type": "link out",
        "z": "0ef28c36cc076eeb",
        "name": "InputData",
        "links": [
            "f56c2d4240327382",
            "ad5a1677.9850f8"
        ],
        "x": 735,
        "y": 440,
        "wires": []
    },
    {
        "id": "99a77557e46ad847",
        "type": "switch",
        "z": "0ef28c36cc076eeb",
        "name": " ",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 640,
        "y": 440,
        "wires": [
            [
                "ea596677d0f5da51"
            ]
        ]
    },
    {
        "id": "25a6ec1139f1bc3a",
        "type": "tab",
        "label": "Control",
        "disabled": false,
        "info": ""
    },
    {
        "id": "2e2061027c0d156d",
        "type": "group",
        "z": "25a6ec1139f1bc3a",
        "name": "Simulasi",
        "style": {
            "label": true
        },
        "nodes": [
            "bf865d189693112f",
            "8c3deda816dd2abf",
            "d08c90fd0251ffc6",
            "0d388979c132c90f",
            "7c97fae3601a6e17",
            "474e19cf8fc80d50",
            "edcb23b6b0a02d63",
            "a2c8595513f3d0cc",
            "b5d1ad75f5f72a97",
            "58ae8b93ed89d892",
            "1a79831e2a52a0d3",
            "3ffda8c1cd3f750f",
            "ac1f6c78190198e7",
            "94e774337d1646f7",
            "bec003c88e487e13",
            "4a09f197b338e0c7",
            "85540ee1a59b1557",
            "c22fd4799d3b8c99",
            "5eaf6d316d02396c",
            "6cbac20f586fe52d",
            "96b7b0c922786d65",
            "2eb2835588157a6e",
            "af3f502e7cb39693",
            "bdecb7b50e2efd2c",
            "baad2fbec3075758",
            "d14b261b2f669544",
            "3ac08de79fe75fb6",
            "7079b4fa7742f822",
            "63ba8e4cd1ea2424"
        ],
        "x": 24,
        "y": 39,
        "w": 1342,
        "h": 382
    },
    {
        "id": "daba62fee429465d",
        "type": "group",
        "z": "25a6ec1139f1bc3a",
        "name": "Control",
        "style": {
            "label": true,
            "fill": "#bfbfbf"
        },
        "nodes": [
            "65d8f2321b264418",
            "a8f27e3c80febe4e",
            "7a2c80f53b593223",
            "da1e4a3886f865d6",
            "5b9013aa2131935c",
            "e44b41d43d38ef86",
            "f4c0e5982f52ab79",
            "8ff8466afa2d242b",
            "ba3db4a96c6b5e8e",
            "aa9a7ff950bebf75",
            "22bed3326bbd05e1",
            "de98191cb866e13a",
            "1220e21854711bd6",
            "9b54b7ccdd77d429",
            "27325cda47448370",
            "1dbf3b134f682122",
            "dc1ffa3e536f5fe9",
            "0a8c4cb32c0e6af4",
            "a5dc639ebab74add",
            "fe3487e43faa9e24",
            "4d2aac0ebd1764b3",
            "0be7ef73704caae5",
            "3f526e755684b390",
            "07d059687c6c526a",
            "8186f59d59f325f5",
            "2359c6715b876377",
            "e9ba5b631addf970",
            "e1f5b92c9f21e70d",
            "9fda203acb06f195",
            "cb80011f96ed4286",
            "bbb22e9ac3cf12f9",
            "f807baef7fda19b9",
            "53cddcc70d5263c7",
            "165cbc6a73cbdb18",
            "26bcf0fb682ad046",
            "737314713eed002a",
            "e8cf11af62ba21ae",
            "9a7cfc8de8cd955a"
        ],
        "x": 24,
        "y": 419,
        "w": 1342,
        "h": 442
    },
    {
        "id": "bf865d189693112f",
        "type": "http in",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "name": "",
        "url": "/GetCurrent",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 220,
        "wires": [
            [
                "d08c90fd0251ffc6"
            ]
        ]
    },
    {
        "id": "8c3deda816dd2abf",
        "type": "http response",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 810,
        "y": 220,
        "wires": []
    },
    {
        "id": "d08c90fd0251ffc6",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "name": "Select Data last 24 hour",
        "func": "var yesterday = Date.now()-(3600000*24);\nmsg.epo = yesterday;\nmsg.topic = \"select * from alldata where `epo`>=\"+String(yesterday)+\" AND `epo`<=\"+String(Date.now())+\" order by epo asc;\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 220,
        "wires": [
            [
                "0d388979c132c90f"
            ]
        ]
    },
    {
        "id": "0d388979c132c90f",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 590,
        "y": 220,
        "wires": [
            [
                "8c3deda816dd2abf"
            ]
        ]
    },
    {
        "id": "7c97fae3601a6e17",
        "type": "inject",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "name": "Generate New Table",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 100,
        "wires": [
            [
                "474e19cf8fc80d50"
            ]
        ]
    },
    {
        "id": "474e19cf8fc80d50",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "name": " ",
        "func": "msg.topic= \"\"\nvar epo = 1675202400000;\nvar arr = [];\nmsg.arr = [];\nfor(i=0;i<12;i++){\n    flow.set(\"set\"+String(i),0);\n}\nfor(i=0;i<240;i++){\n    msg.arr.push(epo+(3600000*i));\n    msg.topic += \"INSERT INTO `alldata`(`epo`, `Turbidity_Raw`, `pH_Raw`, `Flow_Rate_Raw`, `Totalizer_Raw`, `Turbidity_Product`, `pH_Product`, `Chlorine_Product`, `Flow_Rate_Product`, `Totalizer_Product`, `Turbidity_Sedimentation_A`, `Turbidity_Sedimentation_B`, `Reservoir_Volume`, `SA1`, `SA2`, `SA3`, `SA4`, `SA5`, `SA6`, `SA7`, `SA8`, `SB1`, `SB2`, `SB3`, `SB4`, `SB5`, `SB6`, `SB7`, `SB8`, `FC1IN1`, `FC1OU1`, `FC1DR1`, `FC1BL1`, `FC1BW1`, `FC1IN2`, `FC1OU2`, `FC1DR2`, `FC1BL2`, `FC1BW2`, `FC1IN3`, `FC1OU3`, `FC1DR3`, `FC1BL3`, `FC1BW3`, `FC1IN4`, `FC1OU4`, `FC1DR4`, `FC1BL4`, `FC1BW4`, `FC2IN1`, `FC2OU1`, `FC2DR1`, `FC2BL1`, `FC2BW1`, `FC2IN2`, `FC2OU2`, `FC2DR2`, `FC2BL2`, `FC2BW2`, `FC2IN3`, `FC2OU3`, `FC2DR3`, `FC2BL3`, `FC2BW3`, `FC2IN4`, `FC2OU4`, `FC2DR4`, `FC2BL4`, `FC2BW4`, `FAD1`, `FAD2`, `FAD3`, `FAD4`, `FAD5`, `FAD6`, `FAD7`, `FAD8`, `FAD9`, `FBD1`, `FBD2`, `FBD3`, `FBD4`, `FBD5`, `FBD6`, `FBD7`, `FBD8`, `FBD9`) VALUES (\";\n    msg.topic += String(epo+(3600000*i))+\",\";\n    msg.topic+=String(random(0));msg.topic += \",\";\n    msg.topic+=String(random(1));msg.topic += \",\";\n    msg.topic+=String(random(2));msg.topic += \",\";\n    msg.topic+=String(random(3));msg.topic += \",\";\n    msg.topic+=String(random(4));msg.topic += \",\";\n    msg.topic+=String(random(5));msg.topic += \",\";\n    msg.topic+=String(random(6));msg.topic += \",\";\n    msg.topic+=String(random(7));msg.topic += \",\";\n    msg.topic+=String(random(8));msg.topic += \",\";\n    msg.topic+=String(random(9));msg.topic += \",\";\n    msg.topic+=String(random(10));msg.topic += \",\";\n    msg.topic+=String(random(11));msg.topic += \",\";\n    \n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);\n    msg.topic+=\");\";\n}\n\nreturn msg;\n\nfunction random(x){\n    var number = flow.get(\"set\"+String(x));\n    var plusOrMinus = Math.random() < 0.5 ? -1 : 1;\n    number = Math.abs(number + (Math.round(Math.random()*10)));\n    flow.set(\"set\"+String(x),number);\n    return number;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 100,
        "wires": [
            [
                "edcb23b6b0a02d63",
                "a2c8595513f3d0cc"
            ]
        ]
    },
    {
        "id": "edcb23b6b0a02d63",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 480,
        "y": 120,
        "wires": [
            [
                "a2c8595513f3d0cc"
            ]
        ]
    },
    {
        "id": "a2c8595513f3d0cc",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 520,
        "y": 80,
        "wires": []
    },
    {
        "id": "b5d1ad75f5f72a97",
        "type": "inject",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "name": "Delete Current Table",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "delete from alldata;",
        "payload": "",
        "payloadType": "date",
        "x": 290,
        "y": 140,
        "wires": [
            [
                "edcb23b6b0a02d63"
            ]
        ]
    },
    {
        "id": "58ae8b93ed89d892",
        "type": "http in",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "name": "",
        "url": "/GetDataFromTo",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 180,
        "y": 260,
        "wires": [
            [
                "1a79831e2a52a0d3"
            ]
        ]
    },
    {
        "id": "1a79831e2a52a0d3",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "name": "Select Data From To",
        "func": "var from = msg.payload.From;\nvar to = msg.payload.To;\nmsg.topic = \"select * from alldata where `epo`>=\"+String(from)+\" AND `epo`<=\"+String(to)+\" order by epo asc;\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 260,
        "wires": [
            [
                "3ffda8c1cd3f750f"
            ]
        ]
    },
    {
        "id": "3ffda8c1cd3f750f",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 590,
        "y": 260,
        "wires": [
            [
                "ac1f6c78190198e7"
            ]
        ]
    },
    {
        "id": "ac1f6c78190198e7",
        "type": "http response",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 810,
        "y": 260,
        "wires": []
    },
    {
        "id": "94e774337d1646f7",
        "type": "http in",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "name": "",
        "url": "/GetStatusRelay",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 180,
        "y": 300,
        "wires": [
            [
                "c22fd4799d3b8c99"
            ]
        ]
    },
    {
        "id": "bec003c88e487e13",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "name": "GetStatusRelay",
        "func": "msg.topic = \"\";\nmsg.topic = \"select \"\nfor(i=0;i<msg.payload.length;i++){\n    msg.topic += String(msg.payload[i].ID);\n    if(i!=msg.payload.length-1){\n        msg.topic += \",\";\n    }\n}\nmsg.topic +=\" from `alldata` order by epo desc limit 1;\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 300,
        "wires": [
            [
                "4a09f197b338e0c7"
            ]
        ]
    },
    {
        "id": "4a09f197b338e0c7",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 810,
        "y": 300,
        "wires": [
            [
                "85540ee1a59b1557"
            ]
        ]
    },
    {
        "id": "85540ee1a59b1557",
        "type": "http response",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 930,
        "y": 300,
        "wires": []
    },
    {
        "id": "c22fd4799d3b8c99",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "name": "Select Relay",
        "func": "msg.topic = \"SELECT `ID` FROM `devicemap`;\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 300,
        "wires": [
            [
                "5eaf6d316d02396c"
            ]
        ]
    },
    {
        "id": "5eaf6d316d02396c",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 510,
        "y": 300,
        "wires": [
            [
                "bec003c88e487e13"
            ]
        ]
    },
    {
        "id": "6cbac20f586fe52d",
        "type": "http in",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "name": "",
        "url": "/SendCommand",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 180,
        "y": 340,
        "wires": [
            [
                "2eb2835588157a6e"
            ]
        ]
    },
    {
        "id": "96b7b0c922786d65",
        "type": "http response",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1050,
        "y": 340,
        "wires": []
    },
    {
        "id": "2eb2835588157a6e",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "name": "Select Value",
        "func": "msg.topic = \"SELECT `\"+msg.payload.address+\"`,`epo` FROM `alldata` ORDER BY epo DESC limit 1;\";\nmsg.topic = \"SELECT * FROM `alldata` ORDER BY epo DESC limit 1;\";\nmsg.address = msg.payload.address;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 340,
        "wires": [
            [
                "af3f502e7cb39693"
            ]
        ]
    },
    {
        "id": "af3f502e7cb39693",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 510,
        "y": 340,
        "wires": [
            [
                "bdecb7b50e2efd2c"
            ]
        ]
    },
    {
        "id": "bdecb7b50e2efd2c",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "name": "Update Value",
        "func": "var sta = 0;\nvar column = Object.keys(msg.payload[0]);\nif(msg.payload[0][String(msg.address)]===0){\n    sta = 1;\n    msg.topic = \"UPDATE `alldata` SET `\"+msg.address+\"` = 1 WHERE `epo` = \"+String(msg.payload[0].epo)+\";\";    \n}else if(msg.payload[0][String(msg.address)]===1){\n    sta = 0;\n    msg.topic = \"UPDATE `alldata` SET `\"+msg.address+\"` = 0 WHERE `epo` = \"+String(msg.payload[0].epo)+\";\";    \n}\nfor(i=0;i<column.length;i++){\n    if(column[i] == String(msg.address)){\n        msg.payload[0][column[i]] = sta;\n    }\n}\nmsg.topic = \"INSERT INTO `alldata`(\";\nfor(i=0;i<column.length;i++){\n    msg.topic += \"`\"+String(column[i])+\"`\";\n    if(i!=column.length-1){\n        msg.topic += \",\";\n    }\n}\nmsg.topic += \")VALUES(\";\nfor(i=0;i<column.length;i++){\n    if(typeof(msg.payload[0][column[i]])==\"string\"){\n        msg.topic += \"'\"+String(msg.payload[0][column[i]])+\"'\"\n    }else{\n        if(i==0){\n            var time = Date.now();\n            msg.topic += String(time);\n        }else{\n            msg.topic += String(msg.payload[0][column[i]]);    \n        }\n        \n    }\n    if(i!=column.length-1){\n        msg.topic += \",\";\n    }\n}\nmsg.topic += \");\";\nmsg.topic += \"SELECT `\"+msg.address+\"` FROM `alldata` order by epo desc limit 1;\";\nmsg.topic += \"SELECT * FROM `alldata` order by epo desc limit 1;\";\nmsg.topic += \"SELECT * FROM `devicemap` ORDER BY No ASC;\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 340,
        "wires": [
            [
                "baad2fbec3075758"
            ]
        ]
    },
    {
        "id": "baad2fbec3075758",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 810,
        "y": 340,
        "wires": [
            [
                "d14b261b2f669544"
            ]
        ]
    },
    {
        "id": "d14b261b2f669544",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "name": " ",
        "func": "msg.lastdata = msg.payload[2][0];\nmsg.devicemap = msg.payload[3];\n// msg.relay = msg.payload[3];\nmsg.payload = [String(msg.address),msg.payload[1][0][msg.address]];\nmsg.end = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 930,
        "y": 340,
        "wires": [
            [
                "96b7b0c922786d65",
                "7079b4fa7742f822"
            ]
        ]
    },
    {
        "id": "3ac08de79fe75fb6",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "name": " ",
        "func": "var relay = msg.payload[msg.payload.length-1];\nvar bin = \"\";\nfor(i=0;i<relay.length;i++){\n    bin+=String(relay[i].Status);\n}\nbin = rs(bin);\nwhile(bin.length<16){\n    bin = \"0\" + bin;\n}\nmsg.payload = bTd(bin);\nmsg.topic = \"\";\nreturn msg;\n\nfunction rs(str) {\n    var splitString = str.split(\"\");\n    var reverseArray = splitString.reverse(); \n    var joinArray = reverseArray.join(\"\");\n    return joinArray;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1290,
        "y": 380,
        "wires": [
            [
                "035a574a7a84c38a"
            ]
        ]
    },
    {
        "id": "7079b4fa7742f822",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "name": " ",
        "func": "var d = msg.lastdata;\nvar columnd = Object.keys(d);\nvar dm = msg.devicemap;\nmsg.topic = \"\";\nvar ID = [];\nfor(i=15;i<columnd.length;i++){\n    ID.push(columnd[i]);\n}\nfor(i=0;i<dm.length;i++){\n    msg.topic += \"UPDATE `devicemap` SET `Status` = \"+String(d[ID[i]])+\" WHERE `No` = \"+String(dm[i].No)+\";\";\n}\n\nmsg.topic += \"SELECT * FROM `devicemap` WHERE `RelayIoT` = (SELECT `RelayIoT` FROM `devicemap` WHERE `ID` = '\"+String(msg.address)+\"' order by No asc)\";\nmsg.payload = msg.topic;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1050,
        "y": 380,
        "wires": [
            [
                "63ba8e4cd1ea2424"
            ]
        ]
    },
    {
        "id": "63ba8e4cd1ea2424",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "g": "2e2061027c0d156d",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 1170,
        "y": 380,
        "wires": [
            [
                "3ac08de79fe75fb6"
            ]
        ]
    },
    {
        "id": "035a574a7a84c38a",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "name": "debug 19",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1610,
        "y": 460,
        "wires": []
    },
    {
        "id": "66f168e080c38b41",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "name": "debug 19",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1440,
        "y": 760,
        "wires": []
    },
    {
        "id": "8766a83c8f54e2b4",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "name": "debug 20",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1180,
        "y": 900,
        "wires": []
    },
    {
        "id": "c923d524287db432",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "name": "debug 22",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1360,
        "y": 900,
        "wires": []
    },
    {
        "id": "ddb94c5aa21b9a96",
        "type": "link out",
        "z": "25a6ec1139f1bc3a",
        "name": "link out 1",
        "links": [
            "97d83e030cb49df5",
            "d7cdd034ef359738"
        ],
        "x": 1395,
        "y": 800,
        "wires": []
    },
    {
        "id": "d7cdd034ef359738",
        "type": "link in",
        "z": "25a6ec1139f1bc3a",
        "name": "link in 1",
        "links": [
            "ddb94c5aa21b9a96"
        ],
        "x": 935,
        "y": 980,
        "wires": [
            []
        ]
    },
    {
        "id": "3f36d9a90a3b0172",
        "type": "link out",
        "z": "25a6ec1139f1bc3a",
        "name": "link out 2",
        "links": [
            "243370e5ab3d906f"
        ],
        "x": 1335,
        "y": 980,
        "wires": []
    },
    {
        "id": "7d91d3cdeba3eb8f",
        "type": "delay",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 1040,
        "y": 980,
        "wires": [
            [
                "3b34bff675f9c4b4"
            ]
        ]
    },
    {
        "id": "3b34bff675f9c4b4",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "func": "var d = msg.payload.substring(0,msg.payload.length-1).split(\",\");\nmsg.payload = d[0]+\",\"+d[1]+\",111,\"+String(parseInt(d[3]))+\"$\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1190,
        "y": 1000,
        "wires": [
            [
                "3f36d9a90a3b0172",
                "185a4d576aeba770"
            ]
        ]
    },
    {
        "id": "185a4d576aeba770",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "name": "debug 23",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1370,
        "y": 1020,
        "wires": []
    },
    {
        "id": "243370e5ab3d906f",
        "type": "link in",
        "z": "25a6ec1139f1bc3a",
        "name": "link in 2",
        "links": [
            "58e5da49f1036714",
            "3f36d9a90a3b0172"
        ],
        "x": 1435,
        "y": 860,
        "wires": [
            [
                "368ef87f93a65928"
            ]
        ]
    },
    {
        "id": "368ef87f93a65928",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "func": "msg.payload = msg.payload.substring(0,msg.payload.length).split(\",\");\nvar rly = msg.payload[1];\nvar dec= msg.payload[3];\nif(msg.payload[2]==\"111\"){\n    var bin = dTb(parseInt(dec));\n    msg.newbin = rs(bin).split(\"\");\n}\nvar arr = [];\nfor(i=0;i<msg.newbin.length;i++){\n    if(msg.newbin[i] == 1){\n        arr.push(i+1);\n    }\n}\nmsg.payload = arr;\nmsg.topic = \"update `devicemap` set `Status` = 0 where `RelayIoT` = '\"+String(rly)+\"';\";\nif(arr.length>0){\n    for(i=0;i<arr.length;i++){\n        msg.topic += \"update `devicemap` set `Status` = 1 where `RelayIoT` = '\"+String(rly)+\"' AND `Channel` = \"+String(arr[i])+\";\";\n    }\n}else{\n    msg.topic = \"update `devicemap` set `Status` = 0 where `RelayIoT` = '\"+String(rly)+\"';\";\n}\n\n\nreturn msg;\nfunction dTb(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  return binary;\n}\n\nfunction rs(str) {\n    var splitString = str.split(\"\");\n    var reverseArray = splitString.reverse(); \n    var joinArray = reverseArray.join(\"\");\n    return joinArray;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1530,
        "y": 820,
        "wires": [
            [
                "ed7cc62176258586",
                "307ca9c7953f0efd"
            ]
        ]
    },
    {
        "id": "744b22e3b0929386",
        "type": "inject",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "252",
        "payloadType": "num",
        "x": 470,
        "y": 1060,
        "wires": [
            [
                "df028548a1ece360"
            ]
        ]
    },
    {
        "id": "df028548a1ece360",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": "dTb",
        "func": "msg.payload = dTb(msg.payload);\nreturn msg;\n\nfunction dTb(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  return binary;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 1080,
        "wires": [
            [
                "3a61d4c594cda0be",
                "d9a5d8e70c5b9d0a"
            ]
        ]
    },
    {
        "id": "3a61d4c594cda0be",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 810,
        "y": 1120,
        "wires": []
    },
    {
        "id": "d9a5d8e70c5b9d0a",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": "bTd",
        "func": "msg.payload = bTd(msg.payload);\nreturn msg;\n\nfunction dTb(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  return binary;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1080,
        "wires": [
            [
                "7335bc3d78aa0a4b",
                "ad89b5754a7a429c"
            ]
        ]
    },
    {
        "id": "3247b05330a3994c",
        "type": "inject",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1000",
        "payloadType": "str",
        "x": 750,
        "y": 1020,
        "wires": [
            [
                "d9a5d8e70c5b9d0a"
            ]
        ]
    },
    {
        "id": "7335bc3d78aa0a4b",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "name": " Decimal",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1040,
        "y": 1120,
        "wires": []
    },
    {
        "id": "ad89b5754a7a429c",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": "dTb",
        "func": "msg.payload = dTb(msg.payload);\nreturn msg;\n\nfunction dTb(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  return binary;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1110,
        "y": 1080,
        "wires": [
            [
                "747bf5e4c7162c06"
            ]
        ]
    },
    {
        "id": "747bf5e4c7162c06",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1230,
        "y": 1120,
        "wires": []
    },
    {
        "id": "6165a33f6ae286cf",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "name": "debug 24",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 900,
        "y": 880,
        "wires": []
    },
    {
        "id": "ed7cc62176258586",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "name": "debug 25",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1650,
        "y": 880,
        "wires": []
    },
    {
        "id": "307ca9c7953f0efd",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 1670,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "130ade34e2ca001f",
        "type": "http response",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1430,
        "y": 720,
        "wires": []
    },
    {
        "id": "65d8f2321b264418",
        "type": "http in",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": "",
        "url": "/GetCurrent",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 580,
        "wires": [
            [
                "7a2c80f53b593223"
            ]
        ]
    },
    {
        "id": "a8f27e3c80febe4e",
        "type": "http response",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 870,
        "y": 580,
        "wires": []
    },
    {
        "id": "7a2c80f53b593223",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": "Select Data last 24 hour",
        "func": "var yesterday = Date.now()-(3600000*24);\nmsg.epo = yesterday;\nmsg.topic = \"select * from alldata where `epo`>=\"+String(yesterday)+\" AND `epo`<=\"+String(Date.now())+\" order by epo asc;\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 580,
        "wires": [
            [
                "da1e4a3886f865d6"
            ]
        ]
    },
    {
        "id": "da1e4a3886f865d6",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 590,
        "y": 580,
        "wires": [
            [
                "e1f5b92c9f21e70d",
                "9a7cfc8de8cd955a"
            ]
        ]
    },
    {
        "id": "5b9013aa2131935c",
        "type": "inject",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": "Generate New Table",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "date",
        "x": 160,
        "y": 500,
        "wires": [
            [
                "e44b41d43d38ef86"
            ]
        ]
    },
    {
        "id": "e44b41d43d38ef86",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": " ",
        "func": "msg.topic= \"\"\nvar epo = 1675202400000;\nvar arr = [];\nmsg.arr = [];\nfor(i=0;i<12;i++){\n    flow.set(\"set\"+String(i),0);\n}\nfor(i=0;i<240;i++){\n    msg.arr.push(epo+(3600000*i));\n    msg.topic += \"INSERT INTO `alldata`(`epo`, `Turbidity_Raw`, `pH_Raw`, `Flow_Rate_Raw`, `Totalizer_Raw`, `Turbidity_Product`, `pH_Product`, `Chlorine_Product`, `Flow_Rate_Product`, `Totalizer_Product`, `Turbidity_Sedimentation_A`, `Turbidity_Sedimentation_B`, `Reservoir_Volume`, `SA1`, `SA2`, `SA3`, `SA4`, `SA5`, `SA6`, `SA7`, `SA8`, `SB1`, `SB2`, `SB3`, `SB4`, `SB5`, `SB6`, `SB7`, `SB8`, `FC1IN1`, `FC1OU1`, `FC1DR1`, `FC1BL1`, `FC1BW1`, `FC1IN2`, `FC1OU2`, `FC1DR2`, `FC1BL2`, `FC1BW2`, `FC1IN3`, `FC1OU3`, `FC1DR3`, `FC1BL3`, `FC1BW3`, `FC1IN4`, `FC1OU4`, `FC1DR4`, `FC1BL4`, `FC1BW4`, `FC2IN1`, `FC2OU1`, `FC2DR1`, `FC2BL1`, `FC2BW1`, `FC2IN2`, `FC2OU2`, `FC2DR2`, `FC2BL2`, `FC2BW2`, `FC2IN3`, `FC2OU3`, `FC2DR3`, `FC2BL3`, `FC2BW3`, `FC2IN4`, `FC2OU4`, `FC2DR4`, `FC2BL4`, `FC2BW4`, `FAD1`, `FAD2`, `FAD3`, `FAD4`, `FAD5`, `FAD6`, `FAD7`, `FAD8`, `FAD9`, `FBD1`, `FBD2`, `FBD3`, `FBD4`, `FBD5`, `FBD6`, `FBD7`, `FBD8`, `FBD9`) VALUES (\";\n    msg.topic += String(epo+(3600000*i))+\",\";\n    msg.topic+=String(random(0));msg.topic += \",\";\n    msg.topic+=String(random(1));msg.topic += \",\";\n    msg.topic+=String(random(2));msg.topic += \",\";\n    msg.topic+=String(random(3));msg.topic += \",\";\n    msg.topic+=String(random(4));msg.topic += \",\";\n    msg.topic+=String(random(5));msg.topic += \",\";\n    msg.topic+=String(random(6));msg.topic += \",\";\n    msg.topic+=String(random(7));msg.topic += \",\";\n    msg.topic+=String(random(8));msg.topic += \",\";\n    msg.topic+=String(random(9));msg.topic += \",\";\n    msg.topic+=String(random(10));msg.topic += \",\";\n    msg.topic+=String(random(11));msg.topic += \",\";\n    \n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);msg.topic += \",\";\n    msg.topic+=String(0);\n    msg.topic+=\");\";\n}\n\nreturn msg;\n\nfunction random(x){\n    var number = flow.get(\"set\"+String(x));\n    var plusOrMinus = Math.random() < 0.5 ? -1 : 1;\n    number = Math.abs(number + (Math.round(Math.random()*10)));\n    flow.set(\"set\"+String(x),number);\n    return number;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 500,
        "wires": [
            [
                "f4c0e5982f52ab79",
                "8ff8466afa2d242b"
            ]
        ]
    },
    {
        "id": "f4c0e5982f52ab79",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 480,
        "y": 520,
        "wires": [
            [
                "8ff8466afa2d242b"
            ]
        ]
    },
    {
        "id": "8ff8466afa2d242b",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 520,
        "y": 480,
        "wires": []
    },
    {
        "id": "ba3db4a96c6b5e8e",
        "type": "inject",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": "Delete Current Table",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "delete from alldata;",
        "payloadType": "date",
        "x": 290,
        "y": 540,
        "wires": [
            [
                "f4c0e5982f52ab79"
            ]
        ]
    },
    {
        "id": "aa9a7ff950bebf75",
        "type": "http in",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": "",
        "url": "/GetDataFromTo",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 180,
        "y": 620,
        "wires": [
            [
                "22bed3326bbd05e1"
            ]
        ]
    },
    {
        "id": "22bed3326bbd05e1",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": "Select Data From To",
        "func": "var from = msg.payload.From;\nvar to = msg.payload.To;\nmsg.topic = \"select * from alldata where `epo`>=\"+String(from)+\" AND `epo`<=\"+String(to)+\" order by epo asc;\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 620,
        "wires": [
            [
                "de98191cb866e13a"
            ]
        ]
    },
    {
        "id": "de98191cb866e13a",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 590,
        "y": 620,
        "wires": [
            [
                "1220e21854711bd6"
            ]
        ]
    },
    {
        "id": "1220e21854711bd6",
        "type": "http response",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 810,
        "y": 620,
        "wires": []
    },
    {
        "id": "9b54b7ccdd77d429",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": "GetStatusRelay",
        "func": "msg.topic = \"\";\nmsg.topic = \"select \"\nfor(i=0;i<msg.payload[0].length;i++){\n    msg.topic += String(msg.payload[0][i].ID);\n    if(i!=msg.payload[0].length-1){\n        msg.topic += \",\";\n    }\n}\nmsg.topic +=\" from `alldata` order by epo desc limit 1;\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 700,
        "wires": [
            [
                "27325cda47448370"
            ]
        ]
    },
    {
        "id": "27325cda47448370",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 810,
        "y": 700,
        "wires": [
            [
                "1dbf3b134f682122",
                "9fda203acb06f195"
            ]
        ]
    },
    {
        "id": "1dbf3b134f682122",
        "type": "http response",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 930,
        "y": 700,
        "wires": []
    },
    {
        "id": "dc1ffa3e536f5fe9",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": "Select Relay",
        "func": "msg.topic = \"SELECT * FROM `devicemap`;\";\nmsg.topic += \"select * from `alldata` order by `epo` desc limit 1\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 700,
        "wires": [
            [
                "0a8c4cb32c0e6af4"
            ]
        ]
    },
    {
        "id": "0a8c4cb32c0e6af4",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 510,
        "y": 700,
        "wires": [
            [
                "9b54b7ccdd77d429",
                "f807baef7fda19b9",
                "53cddcc70d5263c7"
            ]
        ]
    },
    {
        "id": "a5dc639ebab74add",
        "type": "http in",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": "",
        "url": "/SendCommand",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 180,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "fe3487e43faa9e24",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": "Select Value",
        "func": "msg.topic = \"SELECT `\"+msg.payload.address+\"`,`epo` FROM `alldata` ORDER BY epo DESC limit 1;\";\nmsg.topic = \"SELECT * FROM `alldata` ORDER BY epo DESC limit 1;\";\nmsg.address = msg.payload.address;\nmsg.cmd = msg.payload.cmd;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 780,
        "wires": [
            [
                "4d2aac0ebd1764b3"
            ]
        ]
    },
    {
        "id": "4d2aac0ebd1764b3",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 510,
        "y": 780,
        "wires": [
            [
                "0be7ef73704caae5"
            ]
        ]
    },
    {
        "id": "0be7ef73704caae5",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": "Update Value",
        "func": "var sta = 0;\nvar column = Object.keys(msg.payload[0]);\nif(msg.payload[0][String(msg.address)]===0){\n    sta = 1;\n    // msg.topic = \"UPDATE `alldata` SET `\"+msg.address+\"` = 1 WHERE `epo` = \"+String(msg.payload[0].epo)+\";\";    \n}else if(msg.payload[0][String(msg.address)]===1){\n    sta = 0;\n    // msg.topic = \"UPDATE `alldata` SET `\"+msg.address+\"` = 0 WHERE `epo` = \"+String(msg.payload[0].epo)+\";\";    \n}\nfor(i=0;i<column.length;i++){\n    if(column[i] == String(msg.address)){\n        msg.payload[0][column[i]] = sta;\n    }\n}\nmsg.topic = \"INSERT INTO `alldata`(\";\nfor(i=0;i<column.length;i++){\n    msg.topic += \"`\"+String(column[i])+\"`\";\n    if(i!=column.length-1){\n        msg.topic += \",\";\n    }\n}\nmsg.topic += \")VALUES(\";\nfor(i=0;i<column.length;i++){\n    if(typeof(msg.payload[0][column[i]])==\"string\"){\n        msg.topic += \"'\"+String(msg.payload[0][column[i]])+\"'\"\n    }else{\n        if(i==0){\n            var time = Date.now();\n            msg.topic += String(time);\n        }else{\n            msg.topic += String(msg.payload[0][column[i]]);    \n        }\n        \n    }\n    if(i!=column.length-1){\n        msg.topic += \",\";\n    }\n}\nmsg.topic += \");\";\nmsg.topic = \"select * from `alldevice` limit 1;\";\nmsg.topic += \"SELECT `\"+msg.address+\"` FROM `alldata` order by epo desc limit 1;\";\nmsg.topic += \"SELECT * FROM `alldata` order by epo desc limit 1;\";\nmsg.topic += \"SELECT * FROM `devicemap` ORDER BY No ASC;\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 780,
        "wires": [
            [
                "3f526e755684b390"
            ]
        ]
    },
    {
        "id": "3f526e755684b390",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 810,
        "y": 780,
        "wires": [
            [
                "07d059687c6c526a",
                "6165a33f6ae286cf"
            ]
        ]
    },
    {
        "id": "07d059687c6c526a",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": " ",
        "func": "msg.lastdata = msg.payload[2][0];\nmsg.devicemap = msg.payload[3];\n// msg.relay = msg.payload[3];\nmsg.payload = [String(msg.address),msg.payload[1][0][msg.address]];\nmsg.payload = [String(msg.address),msg.cmd];\nmsg.thiscmd = msg.payload;\nmsg.end = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 930,
        "y": 780,
        "wires": [
            [
                "2359c6715b876377",
                "cb80011f96ed4286"
            ]
        ]
    },
    {
        "id": "8186f59d59f325f5",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": " ",
        "func": "var relay = msg.payload;\nfor(i=0;i<relay.length;i++){\n    if(relay[i].ID == msg.thiscmd[0]){\n        relay[i]['Status'] = parseInt(String(msg.thiscmd[1]));\n    }\n}\nvar bin = \"\";\nfor(i=0;i<relay.length;i++){\n    bin+=String(relay[i].Status);\n}\nbin = rs(bin);\nwhile(bin.length<16){\n    bin = \"0\" + bin;\n}\nmsg.payload = \"2,\"+relay[0].RelayIoT+\",1,\"+String(bTd(bin))+\"#\";\nmsg.topic = \"\";\nreturn msg;\n//2,201,111,\nfunction rs(str) {\n    var splitString = str.split(\"\");\n    var reverseArray = splitString.reverse(); \n    var joinArray = reverseArray.join(\"\");\n    return joinArray;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1290,
        "y": 820,
        "wires": [
            [
                "66f168e080c38b41",
                "ddb94c5aa21b9a96",
                "130ade34e2ca001f"
            ]
        ]
    },
    {
        "id": "2359c6715b876377",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": " ",
        "func": "var d = msg.lastdata;\nvar columnd = Object.keys(d);\nvar dm = msg.devicemap;\nmsg.topic = \"\";\nvar ID = [];\nfor(i=15;i<columnd.length;i++){\n    ID.push(columnd[i]);\n}\nfor(i=0;i<dm.length;i++){\n    // msg.topic += \"UPDATE `devicemap` SET `Status` = \"+String(d[ID[i]])+\" WHERE `No` = \"+String(dm[i].No)+\";\";\n}\n\nmsg.topic += \"SELECT * FROM `devicemap` WHERE `RelayIoT` = (SELECT `RelayIoT` FROM `devicemap` WHERE `ID` = '\"+String(msg.address)+\"' order by No asc)\";\nmsg.payload = msg.topic;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1050,
        "y": 820,
        "wires": [
            [
                "e9ba5b631addf970",
                "8766a83c8f54e2b4"
            ]
        ]
    },
    {
        "id": "e9ba5b631addf970",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 1170,
        "y": 820,
        "wires": [
            [
                "8186f59d59f325f5",
                "c923d524287db432"
            ]
        ]
    },
    {
        "id": "e1f5b92c9f21e70d",
        "type": "trigger",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": " ",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "500",
        "extend": true,
        "overrideDelay": true,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 750,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "9fda203acb06f195",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 740,
        "wires": []
    },
    {
        "id": "cb80011f96ed4286",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": "debug 21",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1090,
        "y": 740,
        "wires": []
    },
    {
        "id": "bbb22e9ac3cf12f9",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": "debug 26",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 390,
        "y": 740,
        "wires": []
    },
    {
        "id": "f807baef7fda19b9",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": "debug 27",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 570,
        "y": 740,
        "wires": []
    },
    {
        "id": "53cddcc70d5263c7",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": " ",
        "func": "var obj = Object.keys(msg.payload[1][0]);\nvar check =[];\nvar obj2 = [];\nfor(i=0;i<msg.payload[0].length;i++){\n    obj2.push(msg.payload[0][i].ID);\n}\nmsg.topic = \"INSERT INTO `alldata`(\";\nfor(i=0;i<obj.length;i++){\n    msg.topic += \"`\"+String(obj[i])+\"`\";\n    if(i<obj.length-1){\n        msg.topic += \",\";\n    }\n}\nmsg.topic += \")VALUES(\";\nfor(i=0;i<obj.length;i++){\n    if(i===0){\n        msg.topic += String(parseInt(String(msg.payload[1][0][obj[i]]))+1);\n        if(i<obj.length-1){\n            msg.topic += \",\";\n        }\n        continue;\n    }\n    if(obj2.includes(obj[i])){\n        check.push([obj[i],obj2,msg.payload[0][obj2.indexOf(obj[i])]])\n        msg.topic += msg.payload[0][obj2.indexOf(obj[i])].Status;\n        if(i<obj.length-1){\n            msg.topic += \",\";\n        }\n        continue;\n    }\n    if(typeof(msg.payload[1][0][obj[i]])== \"number\"){\n        msg.topic += msg.payload[1][0][obj[i]];\n    }else{\n        msg.topic += \"'\"+msg.payload[1][0][obj[i]]+\"'\";\n    }\n    if(i<obj.length-1){\n        msg.topic += \",\";\n    }\n}\nmsg.topic += \");\"\nmsg.payload = msg.topic;\nmsg.payload = obj2;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 660,
        "wires": [
            [
                "165cbc6a73cbdb18",
                "26bcf0fb682ad046"
            ]
        ]
    },
    {
        "id": "165cbc6a73cbdb18",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 750,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "26bcf0fb682ad046",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": "debug 29",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 620,
        "wires": []
    },
    {
        "id": "737314713eed002a",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": "debug 30",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 370,
        "y": 820,
        "wires": []
    },
    {
        "id": "3ad3f2ff2982114b",
        "type": "comment",
        "z": "25a6ec1139f1bc3a",
        "name": "Binary",
        "info": "",
        "x": 590,
        "y": 980,
        "wires": []
    },
    {
        "id": "e8cf11af62ba21ae",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 740,
        "y": 460,
        "wires": []
    },
    {
        "id": "9a7cfc8de8cd955a",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "g": "daba62fee429465d",
        "name": " ",
        "func": "for(i=0;i<msg.payload.length;i++){\n    msg.payload[i]['TOTALIZER_TBW'] = 0;\n    msg.payload[i]['Turbidity_Product'] = parseFloat(msg.payload[i]['Turbidity_Product'].toFixed(3));\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 580,
        "wires": [
            [
                "a8f27e3c80febe4e",
                "e8cf11af62ba21ae"
            ]
        ]
    },
    {
        "id": "1fbe01aaa04ef887",
        "type": "http in",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "url": "/getExecute",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 1320,
        "wires": [
            [
                "07e93ae944f16201",
                "95b0eda3bf976d9f",
                "ff0556ffadf162f3",
                "6bc996db35e419ca"
            ]
        ]
    },
    {
        "id": "73b2df2c76028d0d",
        "type": "http response",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1250,
        "y": 1360,
        "wires": []
    },
    {
        "id": "69cd28ffa61bae18",
        "type": "http in",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "url": "/getTombol",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 1580,
        "wires": [
            [
                "c1d7b5f9afb2a46d"
            ]
        ]
    },
    {
        "id": "ca3079a7aed7926d",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "name": "debug 35",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 440,
        "y": 1500,
        "wires": []
    },
    {
        "id": "a41ad6b5f8a096c0",
        "type": "http in",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "url": "/getMode",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 1500,
        "wires": [
            [
                "ca3079a7aed7926d",
                "85e1386b02507038"
            ]
        ]
    },
    {
        "id": "85e1386b02507038",
        "type": "http response",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 310,
        "y": 1500,
        "wires": []
    },
    {
        "id": "07e93ae944f16201",
        "type": "json",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "property": "payload.Data",
        "action": "",
        "pretty": false,
        "x": 310,
        "y": 1280,
        "wires": [
            [
                "dba9262c950baf48"
            ]
        ]
    },
    {
        "id": "dba9262c950baf48",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": "Flow Set",
        "func": "var data = msg.payload.Data;\nfor (var key in data) {\n    if (data.hasOwnProperty(key)) {\n        var parsedValue = parseInt(data[key]);\n        data[key] = parsedValue;\n        flow.set(key, parsedValue);\n    }\n}\nflow.set(\"data\", data);\nmsg.payload = data;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 1280,
        "wires": [
            []
        ]
    },
    {
        "id": "f3b8d3675e8b1389",
        "type": "mqtt out",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "topic": "gw80/cmd",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "f29dc24ba57a62a5",
        "x": 960,
        "y": 1580,
        "wires": []
    },
    {
        "id": "c1d7b5f9afb2a46d",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "func": "var rly = Object.keys(msg.payload)[0].replace(\"manual\",\"\");\nmsg.cmd = msg.payload[Object.keys(msg.payload)[0]];\nmsg.channel = Object.keys(msg.payload)[0].substring(Object.keys(msg.payload)[0].length-1,Object.keys(msg.payload)[0].length);\nmsg.topic = \"SELECT `RelayIoT` FROM `devicemap` WHERE `ID` = '\"+rly+\"';\";\nmsg.payload = Object.keys(msg.payload)[0];\nreturn msg;\n// manualFAD1",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 1580,
        "wires": [
            [
                "a555eec830b262cf"
            ]
        ]
    },
    {
        "id": "a555eec830b262cf",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "mydb": "1280af92.129c7",
        "name": " ",
        "x": 450,
        "y": 1580,
        "wires": [
            [
                "e6bd63241f730d5e"
            ]
        ]
    },
    {
        "id": "e6bd63241f730d5e",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "func": "var typeid = \"2\"\nmsg.payload = typeid+\",\"+msg.payload[0].RelayIoT+\",8,\"+msg.channel+\",\"+msg.cmd+\"#\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 1580,
        "wires": [
            [
                "f3b8d3675e8b1389",
                "ca6c274d8992811f",
                "a30425505c7d0ba2"
            ]
        ]
    },
    {
        "id": "ca6c274d8992811f",
        "type": "http response",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 950,
        "y": 1540,
        "wires": []
    },
    {
        "id": "2117fd40daf17bae",
        "type": "mqtt in",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "topic": "gw80/data",
        "qos": "2",
        "datatype": "auto",
        "broker": "f29dc24ba57a62a5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 100,
        "y": 2060,
        "wires": [
            [
                "8826a472e7a01bfd"
            ]
        ]
    },
    {
        "id": "488fc005cb63d563",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " Feedback Manual",
        "func": "if(msg.payload.split(\",\")[3]!=\"Status\"){\n    msg.payload = null;\n    return msg;\n}\nmsg.incomingfeedback = msg.payload;\nvar id = msg.payload.split(\",\")[1];\nmsg.topic = \"SELECT `ID` from `devicemap` WHERE `RelayIoT` = '\"+String(id)+\"';\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 1940,
        "wires": [
            [
                "5873019848dbe678"
            ]
        ]
    },
    {
        "id": "88453759e5b33924",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "mydb": "1280af92.129c7",
        "name": " ",
        "x": 890,
        "y": 1940,
        "wires": [
            [
                "609f5825720d2e43"
            ]
        ]
    },
    {
        "id": "609f5825720d2e43",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "func": "var ID = msg.payload[0].ID;\nmsg.IDRly = ID;\nmsg.topic = \"select * from `alldata` order by `epo` desc limit 1;\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1010,
        "y": 1940,
        "wires": [
            [
                "d51ff35cf12a999d"
            ]
        ]
    },
    {
        "id": "5873019848dbe678",
        "type": "switch",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 770,
        "y": 1940,
        "wires": [
            [
                "88453759e5b33924"
            ]
        ]
    },
    {
        "id": "d51ff35cf12a999d",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "mydb": "1280af92.129c7",
        "name": " ",
        "x": 1130,
        "y": 1940,
        "wires": [
            [
                "fab6f44b18698276"
            ]
        ]
    },
    {
        "id": "fab6f44b18698276",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "func": "var ID = msg.IDRly;\nvar lastData = msg.payload[0];\nvar prevlen = msg.incomingfeedback.split(\"Status\")[1];\nvar len = \"\";\nlen = prevlen.substring(1);\nvar rly = [];\nfor(i=4;i<len.length;i++){\n    rly.push(msg.incomingfeedback.split(\",\")[i]);\n}\nif(ID.substring(0,2)==\"SA\"){\n    for(i=1;i<=8;i++){\n        lastData['SA'+i] = parseInt(rly[i-1]);\n    }\n}else if(ID.substring(0,2)==\"FA\"){\n    for(i=1;i<=9;i++){\n        lastData['FAD'+i] = parseInt(rly[i-1]);\n    }\n}else if(ID.substring(0,2)==\"SB\"){\n    for(i=1;i<=8;i++){\n        lastData['SB'+i] = parseInt(rly[i-1]);\n    }\n}else if(ID.substring(0,2)==\"FB\"){\n    for(i=1;i<=9;i++){\n        lastData['FBD'+i] = parseInt(rly[i-1]);\n    }\n}\nlastData['Stat'] = 0;\nlastData['epo'] = Date.now();\nmsg.payload = lastData;\n\nmsg.topic = \"INSERT INTO `alldata`(\";\nvar col = Object.keys(lastData);\nfor(i=0;i<col.length;i++){\n    msg.topic+=\"`\";\n    msg.topic+=col[i];\n    msg.topic+=\"`\";\n    if(i!=col.length-1){\n        msg.topic+=\",\";\n    }\n}\nmsg.topic += \")VALUES(\";\nfor(i=0;i<col.length;i++){\n    if(col[i]==\"INP\"){\n        msg.topic += \"'\";\n        msg.topic += lastData[col[i]];\n        msg.topic += \"'\";\n    }else{\n        msg.topic += lastData[col[i]];\n    }\n    if(i!=col.length-1){\n        msg.topic+=\",\";\n    }\n}\nmsg.topic += \");\";\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 1940,
        "wires": [
            [
                "d8bfe2219d13491b"
            ]
        ]
    },
    {
        "id": "d8bfe2219d13491b",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "mydb": "1280af92.129c7",
        "name": " ",
        "x": 1370,
        "y": 1940,
        "wires": [
            []
        ]
    },
    {
        "id": "e16d41dee643db46",
        "type": "http in",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "url": "/StatusRelay",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 1660,
        "wires": [
            [
                "56e9d155c65fa547"
            ]
        ]
    },
    {
        "id": "cfc89e5684d8206b",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "mydb": "1280af92.129c7",
        "name": " ",
        "x": 470,
        "y": 1660,
        "wires": [
            [
                "ed549ce3eb6c1d30"
            ]
        ]
    },
    {
        "id": "56e9d155c65fa547",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "func": "msg.topic = \"SELECT `SA1`, `SA2`, `SA3`, `SA4`, `SA5`, `SA6`, `SA7`, `SA8`, `SB1`, `SB2`, `SB3`, `SB4`, `SB5`, `SB6`, `SB7`, `SB8`, `FAD1`, `FAD2`, `FAD3`, `FAD4`, `FAD5`, `FAD6`, `FAD7`, `FAD8`, `FAD9`, `FBD1`, `FBD2`, `FBD3`, `FBD4`, `FBD5`, `FBD6`, `FBD7`, `FBD8`, `FBD9` FROM `alldata` ORDER BY `epo` DESC LIMIT 1;\";\nmsg.topic += \"select DISTINCT `RelayIoT` from `devicemap`;\";\nmsg.topic += \"SELECT * FROM `alldata` ORDER BY `epo` DESC LIMIT 1;\";\nmsg.begin = msg.payload.data;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 1660,
        "wires": [
            [
                "cfc89e5684d8206b"
            ]
        ]
    },
    {
        "id": "b6a5a582cfa027b9",
        "type": "http response",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1190,
        "y": 1660,
        "wires": []
    },
    {
        "id": "ed549ce3eb6c1d30",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "func": "msg.listrelay = msg.payload[1];\nmsg.sensor= msg.payload[2];\nmsg.payload = msg.payload[0];\n\nmsg.statusrelay = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 1660,
        "wires": [
            [
                "1e69bba85f2ae32f"
            ]
        ]
    },
    {
        "id": "1e69bba85f2ae32f",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "func": "var begin = msg.begin;\nvar time = Date.now();\nif(begin == \"Bulan\"){\n    time = beginningMonth(time);\n}else if(begin== \"Minggu\"){\n    time = beginningWeek(time);\n}else if(begin== \"Hari\"){\n    time = beginningDay(time);\n}\nmsg.payload= begin;\nmsg.topic = \"SELECT `SA1`, `SA2`, `SA3`, `SA4`, `SA5`, `SA6`, `SA7`, `SA8`, `SB1`, `SB2`, `SB3`, `SB4`, `SB5`, `SB6`, `SB7`, `SB8`, `FAD1`, `FAD2`, `FAD3`, `FAD4`, `FAD5`, `FAD6`, `FAD7`, `FAD8`, `FAD9`, `FBD1`, `FBD2`, `FBD3`, `FBD4`, `FBD5`, `FBD6`, `FBD7`, `FBD8`, `FBD9` FROM `alldata` WHERE `epo` > \" + String(time) + \";\";\nfor(i=0;i<msg.listrelay.length;i++){\n    msg.topic += \"select * from `RecordAuto` WHERE `epoch` > \" + String(time) + \" && `RelayIoT` = '\"+String(msg.listrelay[i].RelayIoT)+\"' && `mode` = 'paralel';\";    \n}\nfor(i=0;i<msg.listrelay.length;i++){\n    msg.topic += \"select * from `RecordAuto` WHERE `epoch` > \" + String(time) + \" && `RelayIoT` = '\"+String(msg.listrelay[i].RelayIoT)+\"' && `mode` = 'sequence';\";    \n}\n// msg.topic += \"select * from `devicemap`;\";\nmsg.payload = msg.listrelay.length;\nreturn msg;\n\nfunction beginningDay(x) {\n    var date = new Date(x);\n    date.setHours(0, 0, 0, 0);\n    return date.getTime();\n}\n\nfunction beginningWeek(x) {\n    var date = new Date(x);\n    date.setHours(0, 0, 0, 0);\n    date.setDate(date.getDate() - date.getDay());\n    return date.getTime();\n}\n\nfunction beginningMonth(x) {\n    var date = new Date(x);\n    date.setHours(0, 0, 0, 0);\n    date.setDate(1);\n    return date.getTime();\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 1660,
        "wires": [
            [
                "ca138b2bd61e2e5b"
            ]
        ]
    },
    {
        "id": "ca138b2bd61e2e5b",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "mydb": "1280af92.129c7",
        "name": " ",
        "x": 870,
        "y": 1660,
        "wires": [
            [
                "a1b1aef4cde13bf4",
                "b4557abc9c6e7bb8"
            ]
        ]
    },
    {
        "id": "a1b1aef4cde13bf4",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "d": true,
        "name": " version1",
        "func": "var d = msg.payload[0];\nvar countSA = [0, 0, 0, 0, 0, 0, 0, 0]; // Array to store counts for SA1 to SA8\nvar flagSA = [false, false, false, false, false, false, false, false]; // Array to track the state of SA1 to SA8\n\nvar countSB = [0, 0, 0, 0, 0, 0, 0, 0]; // Array to store counts for SB1 to SB8\nvar flagSB = [false, false, false, false, false, false, false, false]; // Array to track the state of SB1 to SB8\n\nvar countFAD = [0, 0, 0, 0, 0, 0, 0, 0, 0,0]; // Array to store counts for FAD1 to FAD9\nvar flagFAD = [false, false, false, false, false, false, false, false, false]; // Array to track the state of FAD1 to FAD9\n\nvar countFBD = [0, 0, 0, 0, 0, 0, 0, 0, 0,0]; // Array to store counts for FBD1 to FBD9\nvar flagFBD = [false, false, false, false, false, false, false, false, false]; // Array to track the state of FBD1 to FBD9\n\nfor (var i = 0; i < d.length; i++) {\n    for (var j = 0; j < 9; j++) {\n        if(j!=9){\n        if (d[i][\"SA\" + (j + 1)] === 1) {\n            flagSA[j] = true;\n        }\n        if (flagSA[j] && d[i][\"SA\" + (j + 1)] === 0) {\n            countSA[j]++;\n            flagSA[j] = false;\n        }\n\n        if (d[i][\"SB\" + (j + 1)] === 1) {\n            flagSB[j] = true;\n        }\n        if (flagSB[j] && d[i][\"SB\" + (j + 1)] === 0) {\n            countSB[j]++;\n            flagSB[j] = false;\n        }\n        }\n        if (d[i][\"FAD\" + (j + 1)] === 1) {\n            flagFAD[j] = true;\n        }\n        if (flagFAD[j] && d[i][\"FAD\" + (j + 1)] === 0) {\n            countFAD[j]++;\n            flagFAD[j] = false;\n        }\n\n        if (d[i][\"FBD\" + (j + 1)] === 1) {\n            flagFBD[j] = true;\n        }\n        if (flagFBD[j] && d[i][\"FBD\" + (j + 1)] === 0) {\n            countFBD[j]++;\n            flagFBD[j] = false;\n        }\n    }\n}\n\n\n\n// var pdetectSA = [];\n// for(i=0;i<msg.payload[1].length;i++){\n//         pdetectSA.push(msg.payload[1][i].count);    \n    \n// }\n// var parrSA = 0;\n// var ppresSA = 0;\n// var pprevSA = 0;\n\n// var pdetectSB = [];\n// for(i=0;i<msg.payload[2].length;i++){\n//     try{\n//         pdetectSB.push(msg.payload[2][i].count);    \n//     }catch(x){\n//         pdetectSB.push(0);\n//         break;\n//     }\n// }\n// var parrSB = 0;\n// var ppresSB = 0;\n// var pprevSB = 0;\n\n// var pdetectFAD = [];\n// for(i=0;i<msg.payload[3].length;i++){\n//     try{\n//         pdetectFAD.push(msg.payload[3][i].count);    \n//     }catch(x){\n//         pdetectFAD.push(0);\n//         break;\n//     }\n// }\n// var parrFAD = 0;\n// var ppresFAD = 0;\n// var pprevFAD = 0;\n\n// var pdetectFBD = [];\n// for(i=0;i<msg.payload[4].length;i++){\n//     try{\n//         pdetectFBD.push(msg.payload[4][i].count);    \n//     }catch(x){\n//         pdetectFBD.push(0);\n//         break;\n//     }\n// }\n// var parrFBD = 0;\n// var ppresFBD = 0;\n// var pprevFBD = 0;\n\n// presSA = calculateValue(\"SA\", pdetectSA, parrSA, ppresSA, pprevSA);\n// presSB = calculateValue(\"SB\", pdetectSB, parrSB, ppresSB, pprevSB);\n// presFAD = calculateValue(\"FAD\", pdetectFAD, parrFAD, ppresFAD, pprevFAD);\n// presFBD = calculateValue(\"FBD\", pdetectFBD, parrFBD, ppresFBD, pprevFBD);\n\n// // /////////////////////////////////////////////////////////////////////////\n\n// var sdetectSA = [];\n// for(i=0;i<msg.payload[5].length;i++){\n//     try{\n//         sdetectSA.push(msg.payload[5][i].count);    \n//     }catch(x){\n//         sdetectSA.push(0);\n//         break;\n//     }\n// }\n// var sarrSA = 0;\n// var sresSA = 0;\n// var sprevSA = 0;\n\n// var sdetectSB = [];\n// for(i=0;i<msg.payload[6].length;i++){\n//     try{\n//         sdetectSB.push(msg.payload[6][i].count);    \n//     }catch(x){\n//         sdetectSB.push(0);\n//         break;\n//     }\n// }\n// var sarrSB = 0;\n// var sresSB = 0;\n// var sprevSB = 0;\n\n// var sdetectFAD = [];\n// for(i=0;i<msg.payload[7].length;i++){\n//     try{\n//         sdetectFAD.push(msg.payload[7][i].count);    \n//     }catch(x){\n//         sdetectFAD.push(0);\n//         break;\n//     }\n// }\n// var sarrFAD = 0;\n// var sresFAD = 0;\n// var sprevFAD = 0;\n\n// var sdetectFBD = [];\n// for(i=0;i<msg.payload[8].length;i++){\n//     try{\n//         sdetectFBD.push(msg.payload[8][i].count);    \n//     }catch(x){\n//         sdetectFBD.push(0);\n//         break;\n//     }\n// }\n// var sarrFBD = 0;\n// var sresFBD = 0;\n// var sprevFBD = 0;\n\n// sresSA = calculateValue(\"SA\", sdetectSA, sarrSA, sresSA, sprevSA);\n// sresSB = calculateValue(\"SB\", sdetectSB, sarrSB, sresSB, sprevSB);\n// sresFAD = calculateValue(\"FAD\", sdetectFAD, sarrFAD, sresFAD, sprevFAD);\n// sresFBD = calculateValue(\"FBD\", sdetectFBD, sarrFBD, sresFBD, sprevFBD);\n\n// var res = {\"countSA\":countSA,\"countSB\":countSB,\"countFAD\":countFAD,\"countFBD\":countFBD};\n// var resp = {\"countSA\":presSA,\"countSB\":presSB,\"countFAD\":presFAD,\"countFBD\":presFBD};\n// var ress = {\"countSA\":sresSA,\"countSB\":sresSB,\"countFAD\":sresFAD,\"countFBD\":sresFBD};\n// var resfinal = {\"countSA\":countSA+presSA+sresSA,\"countSB\":countSB+presSB+sresSB,\"countFAD\":countFAD+presFAD+sresFAD,\"countFBD\":countFBD+presFBD+sresFBD};\n// msg.payload = [msg.statusrelay[0],res,resp,ress,resfinal];\n// msg.payload = [msg.statusrelay[0]] ;\n\nconst processedPayload = processPayload(msg.payload);\nconst resfinal = {\n    countSA: processedPayload.SA.res + processedPayload.SA.prev,\n    countSB: processedPayload.SB.res + processedPayload.SB.prev,\n    countFAD: processedPayload.FAD.res + processedPayload.FAD.prev,\n    countFBD: processedPayload.FBD.res + processedPayload.FBD.prev\n};\n\nmsg.payload = [msg.statusrelay[0], processedPayload, resfinal];\nmsg.topic = \"\";\nreturn msg;\n\nfunction calculateValue(label, detect, arr, res, prev) {\n    for (let i = 0; i < detect.length; i++) {\n        const currentDetection = detect[i];\n        if (res === arr + currentDetection) {\n            continue;\n        }\n        if (currentDetection + arr > prev) {\n            res = currentDetection + arr;\n            prev = res;\n        } else {\n            arr = res;\n            res = currentDetection + arr;\n            prev = 0;\n        }\n    }\n    return res;\n}\n\nfunction processPayload(payload) {\n    const result = {\n        SA: { detect: [], arr: 0, res: 0, prev: 0 },\n        SB: { detect: [], arr: 0, res: 0, prev: 0 },\n        FAD: { detect: [], arr: 0, res: 0, prev: 0 },\n        FBD: { detect: [], arr: 0, res: 0, prev: 0 }\n    };\n\n    for (let i = 1; i <= 4; i++) {\n        const key = ['SA', 'SB', 'FAD', 'FBD'][i - 1];\n        const payloadIndex = i + 1;\n        const payloadData = payload[payloadIndex];\n\n        for (const item of payloadData) {\n            result[key].detect.push(item.count || 0);\n        }\n\n        result[key].res = calculateValue(key, result[key].detect, result[key].arr, result[key].res, result[key].prev);\n    }\n\n    return result;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 1700,
        "wires": [
            []
        ]
    },
    {
        "id": "72d95bcf0ac65bee",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "name": "Paralel",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload[2].countSA",
        "targetType": "msg",
        "statusVal": "payload[2].countSA",
        "statusType": "auto",
        "x": 1200,
        "y": 1700,
        "wires": []
    },
    {
        "id": "7774914c0dc103fc",
        "type": "inject",
        "z": "25a6ec1139f1bc3a",
        "name": " Trigger Every Hour",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "120",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": " ",
        "payloadType": "str",
        "x": 200,
        "y": 4380,
        "wires": [
            []
        ]
    },
    {
        "id": "b85ae2cbd333128c",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " 2",
        "func": "msg.payload = \"2,2,0,1#\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 4380,
        "wires": [
            [
                "69f34885a8dfa195",
                "4d6e15bd619ebcaa"
            ]
        ]
    },
    {
        "id": "69f34885a8dfa195",
        "type": "delay",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 360,
        "y": 4440,
        "wires": [
            []
        ]
    },
    {
        "id": "7b03ef68bcee7e84",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " x",
        "func": "msg.payload = \"2,x,0,1#\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 4500,
        "wires": [
            [
                "4d6e15bd619ebcaa",
                "6bdec257810b9a5b"
            ]
        ]
    },
    {
        "id": "6bdec257810b9a5b",
        "type": "delay",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 360,
        "y": 4560,
        "wires": [
            [
                "091abe59ba8fd333"
            ]
        ]
    },
    {
        "id": "091abe59ba8fd333",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " x",
        "func": "msg.payload = \"2,x,0,1#\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 4620,
        "wires": [
            [
                "cf26c8c0f00dc63d",
                "4d6e15bd619ebcaa"
            ]
        ]
    },
    {
        "id": "cf26c8c0f00dc63d",
        "type": "delay",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 360,
        "y": 4680,
        "wires": [
            [
                "c2bc877c1688a554"
            ]
        ]
    },
    {
        "id": "c2bc877c1688a554",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " x",
        "func": "msg.payload = \"2,x,0,1#\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 4740,
        "wires": [
            [
                "4d6e15bd619ebcaa",
                "535cc9eb9e7744a1"
            ]
        ]
    },
    {
        "id": "535cc9eb9e7744a1",
        "type": "delay",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 360,
        "y": 4800,
        "wires": [
            [
                "9190136dfc51d20a"
            ]
        ]
    },
    {
        "id": "9190136dfc51d20a",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " x",
        "func": "msg.payload = \"2,x,0,1#\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 4860,
        "wires": [
            [
                "18b1519b32ee128d",
                "4d6e15bd619ebcaa"
            ]
        ]
    },
    {
        "id": "18b1519b32ee128d",
        "type": "delay",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 360,
        "y": 4920,
        "wires": [
            [
                "aee815dac6c4170b"
            ]
        ]
    },
    {
        "id": "aee815dac6c4170b",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " x",
        "func": "msg.payload = \"2,x,0,1#\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 4980,
        "wires": [
            [
                "4d6e15bd619ebcaa"
            ]
        ]
    },
    {
        "id": "4d6e15bd619ebcaa",
        "type": "link out",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "links": [
            "dc80791818684f7d"
        ],
        "x": 555,
        "y": 4660,
        "wires": []
    },
    {
        "id": "dc80791818684f7d",
        "type": "link in",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "links": [
            "4d6e15bd619ebcaa"
        ],
        "x": 615,
        "y": 4680,
        "wires": [
            [
                "cca38416d7557559",
                "db1309df08f7d291"
            ]
        ]
    },
    {
        "id": "cca38416d7557559",
        "type": "mqtt out",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "topic": "gw80/cmd",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "f29dc24ba57a62a5",
        "x": 720,
        "y": 4680,
        "wires": []
    },
    {
        "id": "78cf34a645ed762f",
        "type": "inject",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 180,
        "y": 4460,
        "wires": [
            [
                "b85ae2cbd333128c"
            ]
        ]
    },
    {
        "id": "db1309df08f7d291",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 890,
        "y": 4640,
        "wires": []
    },
    {
        "id": "6b7755ca91e66234",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "func": "msg.topic = \"INSERT INTO `RecordAuto`(`epoch`,`RelayIoT`,`mode`,`count`)VALUES(\"+String(Date.now())+\",\"\nmsg.topic += \"'\"+String(msg.payload.split(\",\")[1])+\"',\";\nmsg.topic += \"'sequence',\";\nmsg.topic += String(msg.payload.split(\",\")[4])+\");\";\n\nmsg.topic += \"INSERT INTO `RecordAuto`(`epoch`,`RelayIoT`,`mode`,`count`)VALUES(\"+String(Date.now()+1)+\",\"\nmsg.topic += \"'\"+String(msg.payload.split(\",\")[1])+\"',\";\nmsg.topic += \"'paralel',\";\nmsg.topic += String(msg.payload.split(\",\")[6])+\");\";\nreturn msg;\n\n// 2,2,111,Sequence,0,Paralel,33,Status,1,1,1,1,0,0,0,0",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 890,
        "y": 2000,
        "wires": [
            [
                "5688058075094ef8",
                "cee516f545626d97"
            ]
        ]
    },
    {
        "id": "5688058075094ef8",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "topic",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1160,
        "y": 2000,
        "wires": []
    },
    {
        "id": "8826a472e7a01bfd",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " Filter",
        "func": "for(i=0;i<2;i++){\n    if(msg.payload[i].charCodeAt()==10||msg.payload[i].charCodeAt()==13){\n        msg.payload = null;\n        return msg;\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 230,
        "y": 2060,
        "wires": [
            [
                "923bd504aca6a164"
            ]
        ]
    },
    {
        "id": "923bd504aca6a164",
        "type": "switch",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 2060,
        "wires": [
            [
                "488fc005cb63d563",
                "0af99f919e5d674d",
                "adde29e1f5f54dda",
                "93f2becf17e49d80",
                "007bb28973952da7",
                "a4569ebd42ad5013"
            ]
        ]
    },
    {
        "id": "cee516f545626d97",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "mydb": "1280af92.129c7",
        "name": " ",
        "x": 1010,
        "y": 2000,
        "wires": [
            []
        ]
    },
    {
        "id": "0af99f919e5d674d",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " Feedback Request Count Auto",
        "func": "if(msg.payload.split(\",\")[3]!=\"Sequence\"){\n    msg.payload = null;\n    return msg;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 2000,
        "wires": [
            [
                "885fb35b5b144e39"
            ]
        ]
    },
    {
        "id": "885fb35b5b144e39",
        "type": "switch",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 770,
        "y": 2000,
        "wires": [
            [
                "6b7755ca91e66234"
            ]
        ]
    },
    {
        "id": "b4557abc9c6e7bb8",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "func": "var d = msg.payload[0];\nvar countSA = [0, 0, 0, 0, 0, 0, 0, 0]; // Array to store counts for SA1 to SA8\nvar flagSA = [false, false, false, false, false, false, false, false]; // Array to track the state of SA1 to SA8\n\nvar countSB = [0, 0, 0, 0, 0, 0, 0, 0]; // Array to store counts for SB1 to SB8\nvar flagSB = [false, false, false, false, false, false, false, false]; // Array to track the state of SB1 to SB8\n\nvar countFAD = [0, 0, 0, 0, 0, 0, 0, 0, 0,0]; // Array to store counts for FAD1 to FAD9\nvar flagFAD = [false, false, false, false, false, false, false, false, false]; // Array to track the state of FAD1 to FAD9\n\nvar countFBD = [0, 0, 0, 0, 0, 0, 0, 0, 0,0]; // Array to store counts for FBD1 to FBD9\nvar flagFBD = [false, false, false, false, false, false, false, false, false]; // Array to track the state of FBD1 to FBD9\n\nfor (var i = 0; i < d.length; i++) {\n    for (var j = 0; j < 9; j++) {\n        if(j!=9){\n        if (d[i][\"SA\" + (j + 1)] === 1) {\n            flagSA[j] = true;\n        }\n        if (flagSA[j] && d[i][\"SA\" + (j + 1)] === 0) {\n            countSA[j]++;\n            flagSA[j] = false;\n        }\n\n        if (d[i][\"SB\" + (j + 1)] === 1) {\n            flagSB[j] = true;\n        }\n        if (flagSB[j] && d[i][\"SB\" + (j + 1)] === 0) {\n            countSB[j]++;\n            flagSB[j] = false;\n        }\n        }\n        if (d[i][\"FAD\" + (j + 1)] === 1) {\n            flagFAD[j] = true;\n        }\n        if (flagFAD[j] && d[i][\"FAD\" + (j + 1)] === 0) {\n            countFAD[j]++;\n            flagFAD[j] = false;\n        }\n\n        if (d[i][\"FBD\" + (j + 1)] === 1) {\n            flagFBD[j] = true;\n        }\n        if (flagFBD[j] && d[i][\"FBD\" + (j + 1)] === 0) {\n            countFBD[j]++;\n            flagFBD[j] = false;\n        }\n    }\n}\n\n\n\nvar pdetectSA = [];\nfor(i=0;i<msg.payload[1].length;i++){\n        pdetectSA.push(msg.payload[1][i].count);    \n    \n}\nvar parrSA = 0;\nvar ppresSA = 0;\nvar pprevSA = 0;\n\nvar pdetectSB = [];\nfor(i=0;i<msg.payload[2].length;i++){\n    try{\n        pdetectSB.push(msg.payload[2][i].count);    \n    }catch(x){\n        pdetectSB.push(0);\n        break;\n    }\n}\nvar parrSB = 0;\nvar ppresSB = 0;\nvar pprevSB = 0;\n\nvar pdetectFAD = [];\nfor(i=0;i<msg.payload[5].length;i++){\n    try{\n        pdetectFAD.push(msg.payload[5][i].count);    \n    }catch(x){\n        pdetectFAD.push(0);\n        break;\n    }\n}\nvar parrFAD = 0;\nvar ppresFAD = 0;\nvar pprevFAD = 0;\n\nvar pdetectFBD = [];\nfor(i=0;i<msg.payload[6].length;i++){\n    try{\n        pdetectFBD.push(msg.payload[6][i].count);    \n    }catch(x){\n        pdetectFBD.push(0);\n        break;\n    }\n}\nvar parrFBD = 0;\nvar ppresFBD = 0;\nvar pprevFBD = 0;\n\npresSA = calculateValue(\"SA\", pdetectSA, parrSA, ppresSA, pprevSA);\npresSB = calculateValue(\"SB\", pdetectSB, parrSB, ppresSB, pprevSB);\npresFAD = calculateValue(\"FAD\", pdetectFAD, parrFAD, ppresFAD, pprevFAD);\npresFBD = calculateValue(\"FBD\", pdetectFBD, parrFBD, ppresFBD, pprevFBD);\n\n// /////////////////////////////////////////////////////////////////////////\n\nvar sdetectSA = [];\nfor(i=0;i<msg.payload[7].length;i++){\n    try{\n        sdetectSA.push(msg.payload[7][i].count);    \n    }catch(x){\n        sdetectSA.push(0);\n        break;\n    }\n}\nconsole.log(sdetectSA);\nvar sarrSA = 0;\nvar sresSA = 0;\nvar sprevSA = 0;\n\nvar sdetectSB = [];\nfor(i=0;i<msg.payload[8].length;i++){\n    try{\n        sdetectSB.push(msg.payload[8][i].count);    \n    }catch(x){\n        sdetectSB.push(0);\n        break;\n    }\n}\nvar sarrSB = 0;\nvar sresSB = 0;\nvar sprevSB = 0;\n\nvar sdetectFAD = [];\nfor(i=0;i<msg.payload[11].length;i++){\n    try{\n        sdetectFAD.push(msg.payload[11][i].count);    \n    }catch(x){\n        sdetectFAD.push(0);\n        break;\n    }\n}\nvar sarrFAD = 0;\nvar sresFAD = 0;\nvar sprevFAD = 0;\n\nvar sdetectFBD = [];\nfor(i=0;i<msg.payload[12].length;i++){\n    try{\n        sdetectFBD.push(msg.payload[12][i].count);    \n    }catch(x){\n        sdetectFBD.push(0);\n        break;\n    }\n}\nvar sarrFBD = 0;\nvar sresFBD = 0;\nvar sprevFBD = 0;\nsresSA = calculateValue(\"SA\", sdetectSA, sarrSA, sresSA, sprevSA);\nsresSB = calculateValue(\"SB\", sdetectSB, sarrSB, sresSB, sprevSB);\nsresFAD = calculateValue(\"FAD\", sdetectFAD, sarrFAD, sresFAD, sprevFAD);\nsresFBD = calculateValue(\"FBD\", sdetectFBD, sarrFBD, sresFBD, sprevFBD);\n\nvar res = {\"countSA\":countSA,\"countSB\":countSB,\"countFAD\":countFAD,\"countFBD\":countFBD};\nvar resp = {\"countSA\":presSA,\"countSB\":presSB,\"countFAD\":presFAD,\"countFBD\":presFBD};\nvar ress = {\"countSA\":sresSA,\"countSB\":sresSB,\"countFAD\":sresFAD,\"countFBD\":sresFBD};\nvar totalautoSA = presSA+sresSA;\nvar totalautoSB = presSB+sresSB;\nvar totalautoFAD = presFAD+sresFAD;\nvar totalautoFBD = presFBD+sresFBD;\n\nfor(i=0;i<countSA.length;i++){\n    countSA[i]+=totalautoSA;\n}\nfor(i=0;i<countSB.length;i++){\n    countSB[i]+=totalautoSB;\n}\nfor(i=0;i<countFAD.length;i++){\n    countFAD[i]+=totalautoFAD;\n}\nfor(i=0;i<countFBD.length;i++){\n    countFBD[i]+=totalautoFBD;\n}\n\nvar resfinal = {\"countSA\":countSA,\"countSB\":countSB,\"countFAD\":countFAD,\"countFBD\":countFBD};\nmsg.payload = [msg.statusrelay[0],res,resp,ress,resfinal,msg.sensor];\n// msg.payload = [msg.statusrelay[0]] ;\nmsg.topic = \"\";\nreturn msg;\n\nfunction calculateValue(label, detect, arr, res, prev) {\n    for (i = 0; i < detect.length; i++) {\n        if(res == arr+detect[i]){\n            continue;\n        }\n        if (detect[i] + arr > prev) {\n            res = detect[i] + arr;\n            prev = res;\n        } else {\n            arr = res;\n            res = detect[i] + arr;\n            prev = 0;\n            // console.log(\"detected\");\n        }\n    }\n    // console.log(label + \" - val : \" + detect[i]);\n    //     console.log(label + \" - sum : \" + arr);\n    //     console.log(label + \" - res : \" + res);\n    //     console.log(label + \" - --------\");\n\n    return res;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1030,
        "y": 1660,
        "wires": [
            [
                "b6a5a582cfa027b9",
                "72d95bcf0ac65bee",
                "5f32218ed1ebbeb2",
                "986cf2de8115c7c2"
            ]
        ]
    },
    {
        "id": "70f44c1ba05962b5",
        "type": "http in",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "url": "/getCheck",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 1840,
        "wires": [
            [
                "752bb0dc587b727e",
                "4692fc76348a7977"
            ]
        ]
    },
    {
        "id": "752bb0dc587b727e",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": "Flow Get",
        "func": "var data = flow.get(\"data\");\nmsg.payload = data;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 1780,
        "wires": [
            []
        ]
    },
    {
        "id": "30a0bf67998efc53",
        "type": "http response",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1280,
        "y": 1840,
        "wires": []
    },
    {
        "id": "4bbf2aafb55c5659",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " select",
        "func": "msg.topic = \"\";\nif(msg.rly[0] == \"S\"){\n    for(i=1;i<=8;i++){\n        msg.topic += \"SELECT `ID`,`Duration`,`Mode`,`Intervalx` FROM `devicemap` WHERE LEFT(`ID`, 3) = '\"+String(msg.rly)+String(i)+\"';\";\n    }    \n}else if(msg.rly[0] == \"F\" && msg.rly[2] == \"D\"){\n    for(i=1;i<=9;i++){\n        msg.topic += \"SELECT `ID`,`Duration`,`Mode`,`Intervalx` FROM `devicemap` WHERE LEFT(`ID`, 4) = '\"+String(msg.rly)+String(i)+\"';\";\n    }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 860,
        "y": 1840,
        "wires": [
            [
                "c62d0df6b30b4a0d"
            ]
        ]
    },
    {
        "id": "4eade126fbcec5a3",
        "type": "mqtt out",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "topic": "gw80/cmd",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "f29dc24ba57a62a5",
        "x": 730,
        "y": 1800,
        "wires": []
    },
    {
        "id": "4692fc76348a7977",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": "request",
        "func": "msg.id = msg.payload.id;\nvar rly = \"\";\nif(msg.id[0] == \"S\"){\n    rly = msg.id.substring(0,2);\n}else if(msg.id[0] == \"F\"&&msg.id[2] == \"D\"){\n    rly = msg.id.substring(0,3);\n}\nmsg.rly = rly;\nmsg.topic = \"SELECT `RelayIoT` FROM `devicemap` WHERE `ID` = '\"+rly+\"1';\";\nmsg.payload = msg.id;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 1840,
        "wires": [
            [
                "dd9e518162bdb44c"
            ]
        ]
    },
    {
        "id": "c1009fc588180d42",
        "type": "delay",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 730,
        "y": 1840,
        "wires": [
            [
                "4bbf2aafb55c5659"
            ]
        ]
    },
    {
        "id": "c62d0df6b30b4a0d",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 990,
        "y": 1840,
        "wires": [
            [
                "2177228ea0ff8b2c"
            ]
        ]
    },
    {
        "id": "dd9e518162bdb44c",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 450,
        "y": 1840,
        "wires": [
            [
                "aeb959c18f86c32f"
            ]
        ]
    },
    {
        "id": "aeb959c18f86c32f",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "func": "msg.payload = \"2,\"+String(msg.payload[0].RelayIoT)+\",1,0#\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 1840,
        "wires": [
            [
                "4eade126fbcec5a3",
                "c1009fc588180d42"
            ]
        ]
    },
    {
        "id": "adde29e1f5f54dda",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": "FeedbackCheck",
        "func": "if((msg.payload.split(\",\")[2]==\"111\" && (msg.payload.split(\",\")[3]==\"1\" || msg.payload.split(\",\")[3]==\"0\"))||(msg.payload.split(\",\")[2] == \"5\")){\n    msg.payload= msg.payload;\n}else{\n    msg.payload = null;\n    return msg;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 2060,
        "wires": [
            [
                "dfa230d057adf385"
            ]
        ]
    },
    {
        "id": "dfa230d057adf385",
        "type": "switch",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 770,
        "y": 2060,
        "wires": [
            [
                "66ff0fd941f110d2"
            ]
        ]
    },
    {
        "id": "66ff0fd941f110d2",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "func": "msg.incomingfeedback = msg.payload;\nvar id = msg.payload.split(\",\")[1];\nmsg.topic = \"SELECT `ID` from `devicemap` WHERE `RelayIoT` = '\"+String(id)+\"';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 890,
        "y": 2060,
        "wires": [
            [
                "5789df4639e75dc6"
            ]
        ]
    },
    {
        "id": "5789df4639e75dc6",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 1010,
        "y": 2060,
        "wires": [
            [
                "f0fd0215d859d54b"
            ]
        ]
    },
    {
        "id": "f0fd0215d859d54b",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "func": "var feedback = msg.incomingfeedback.split(\",\");\nvar mode = msg.incomingfeedback.split(\",\")[3];\nvar intervall = msg.incomingfeedback.split(\",\")[4];\nvar d = [];\nvar id = msg.payload;\nfor(i=5;i<feedback.length;i++){\n    d.push(feedback[i]);\n}\nif(mode == \"1\"){\n    mode = \"paralel\";\n}else if(mode == \"0\"){\n    mode = \"sequence\";\n}\nmsg.topic = \"\";\nfor(i=0;i<d.length;i++){\n    msg.topic += \"UPDATE `devicemap` SET `Intervalx`=\"+String(intervall)+\",`Duration`=\"+String(d[i])+\",`Mode`='\"+String(mode)+\"' WHERE `ID` = '\"+String(id[i].ID)+\"';\";\n}\nmsg.payload = feedback;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1150,
        "y": 2060,
        "wires": [
            [
                "e5e2e84f30b08044"
            ]
        ]
    },
    {
        "id": "e5e2e84f30b08044",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 1270,
        "y": 2060,
        "wires": [
            []
        ]
    },
    {
        "id": "95b0eda3bf976d9f",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": "Submit",
        "func": "if(!Object.keys(msg.payload).includes(\"Data\")){\n    msg.payload = null;\n    return msg;\n}\nmsg.data = msg.payload.Data;\nmsg.topic = \"select `RelayIoT` from `devicemap` WHERE LEFT(`ID`,2) = '\"+String(msg.payload.ID.substring(0,2))+\"' limit 1;\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 1320,
        "wires": [
            [
                "d158f3e06cc33893"
            ]
        ]
    },
    {
        "id": "c166f6f7c7f8d69c",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "mydb": "1280af92.129c7",
        "name": " ",
        "x": 570,
        "y": 1320,
        "wires": [
            [
                "61829e9a82ef7bf3"
            ]
        ]
    },
    {
        "id": "61829e9a82ef7bf3",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "func": "var id = msg.payload[0].RelayIoT;\nvar nilai = JSON.parse(msg.data);\nvar len = 0;\nif(Object.keys(nilai)[0].substring(0,2)==\"SA\"){\n    len = 9;\n}else if(Object.keys(nilai)[0].substring(0,2)==\"FA\"){\n    len = 10;\n}else if(Object.keys(nilai)[0].substring(0,2)==\"SB\"){\n    len = 9;\n}else if(Object.keys(nilai)[0].substring(0,2)==\"FB\"){\n    len = 10;\n}\nvar intervalx = parseFloat((parseFloat(String(nilai[Object.keys(nilai)[len-1]]))*60).toFixed(2));\nvar mode = \"\";\nif(nilai.mode == \"sequence\"){\n    mode = \"0\";\n}else if(nilai.mode == \"paralel\"){\n    mode = \"1\";\n}\nmsg.payload = \"2,\"+String(id)+\",5,\"+mode+\",\"+String(intervalx)+\",\";\nfor(i=0;i<len-1;i++){\n    msg.payload+=nilai[Object.keys(nilai)[i]]\n    if(i!=(len-2)){\n        msg.payload+=\",\";\n    }\n}\nmsg.payload += \"#\";\nmsg.newsetting = msg.payload;\nmsg.result = msg.newsetting;\nmsg.topic = \"SELECT * FROM `devicemap` where LEFT(`ID`,2) = '\"+Object.keys(nilai)[0].substring(0,2)+\"';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 1320,
        "wires": [
            [
                "0a269639db6688ac",
                "2d70a4827a0fc2ba",
                "f6c2ad9f7f018bd5"
            ]
        ]
    },
    {
        "id": "0a269639db6688ac",
        "type": "mqtt out",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "topic": "gw80/cmd",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "f29dc24ba57a62a5",
        "x": 840,
        "y": 1460,
        "wires": []
    },
    {
        "id": "d158f3e06cc33893",
        "type": "switch",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 430,
        "y": 1320,
        "wires": [
            [
                "c166f6f7c7f8d69c"
            ]
        ]
    },
    {
        "id": "ff0556ffadf162f3",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": "Run",
        "func": "msg.ID = msg.payload.ID;\nif(!Object.keys(msg.payload).includes(\"run\")){\n    msg.payload = null;\n    return msg;\n}\nmsg.data = msg.payload;\nmsg.topic = \"select `RelayIoT` from `devicemap` WHERE LEFT(`ID`,2) = '\"+String(msg.payload.ID.substring(0,2))+\"' limit 1;\";\nmsg.topic += \"SELECT * FROM `alldata` ORDER BY `epo` DESC LIMIT 1;\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 1360,
        "wires": [
            [
                "f383528dfe4f8de9"
            ]
        ]
    },
    {
        "id": "e59cae12e99cf965",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "mydb": "1280af92.129c7",
        "name": " ",
        "x": 570,
        "y": 1360,
        "wires": [
            [
                "272571efcc685068"
            ]
        ]
    },
    {
        "id": "f383528dfe4f8de9",
        "type": "switch",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 430,
        "y": 1360,
        "wires": [
            [
                "e59cae12e99cf965"
            ]
        ]
    },
    {
        "id": "272571efcc685068",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "func": "var update = msg.payload[1][0];\nmsg.payload = \"2,\"+String(msg.payload[0][0].RelayIoT)+\",6,1#\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 1360,
        "wires": [
            [
                "0a269639db6688ac",
                "4b8ef172f1f8e71f"
            ]
        ]
    },
    {
        "id": "6bc996db35e419ca",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": "Stop",
        "func": "if(!Object.keys(msg.payload).includes(\"stop\")){\n    msg.payload = null;\n    return msg;\n}\nmsg.data = msg.payload;\nmsg.topic = \"select `RelayIoT` from `devicemap` WHERE LEFT(`ID`,2) = '\"+String(msg.payload.ID.substring(0,2))+\"' limit 1;\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 1400,
        "wires": [
            [
                "8b71dc0345ec4107"
            ]
        ]
    },
    {
        "id": "8b71dc0345ec4107",
        "type": "switch",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 430,
        "y": 1400,
        "wires": [
            [
                "e189f0b1d2b94c78"
            ]
        ]
    },
    {
        "id": "e189f0b1d2b94c78",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "mydb": "1280af92.129c7",
        "name": " ",
        "x": 570,
        "y": 1400,
        "wires": [
            [
                "3116996349bf2fd4"
            ]
        ]
    },
    {
        "id": "3116996349bf2fd4",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "func": "msg.payload = \"2,\"+String(msg.payload[0].RelayIoT)+\",7,1#\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 1400,
        "wires": [
            [
                "0a269639db6688ac",
                "120a870490104e9a"
            ]
        ]
    },
    {
        "id": "93f2becf17e49d80",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": "Feedback Run",
        "func": "if((msg.payload.split(\",\")[2]==\"111\" && msg.payload.split(\",\")[3]==\"RUN\")){\n    msg.payload= msg.payload;\n}else{\n    msg.payload = null;\n    return msg;\n}\nflow.set(\"RunEpo\",Date.now());\nmsg.topic = \"SELECT * FROM `alldata` ORDER BY `epo` DESC LIMIT 1;\";\nmsg.topic += \"SELECT `ID` FROM `devicemap` WHERE `RelayIoT` = '\"+String(msg.payload.split(\",\")[1])+\"';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 2120,
        "wires": [
            [
                "4bc0e312f6e1842f"
            ]
        ]
    },
    {
        "id": "4bc0e312f6e1842f",
        "type": "switch",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 770,
        "y": 2120,
        "wires": [
            [
                "989186d0e6380f31"
            ]
        ]
    },
    {
        "id": "9fea7023575131d3",
        "type": "switch",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 770,
        "y": 2180,
        "wires": [
            [
                "8cdf06719bcf8d4d"
            ]
        ]
    },
    {
        "id": "fc368a4a3be2c273",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "mydb": "1280af92.129c7",
        "name": " ",
        "x": 1130,
        "y": 2120,
        "wires": [
            []
        ]
    },
    {
        "id": "64468203ead8db20",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "func": "var update = msg.payload[0][0];\nmsg.ID = msg.payload[1][0].ID.substring(0,2);\nif(msg.ID.substring(0,2)==\"SA\"){\n    for(i=15;i<=22;i++){\n        update[Object.keys(update)[i]] = 0;\n    }\n}else if(msg.ID.substring(0,2)==\"SB\"){\n    for(i=23;i<=30;i++){\n        update[Object.keys(update)[i]] = 0;\n    }\n}else if(msg.ID.substring(0,2)==\"FA\"){\n    for(i=71;i<=79;i++){\n        update[Object.keys(update)[i]] = 0;\n    }\n}else if(msg.ID.substring(0,2)==\"FB\"){\n    for(i=80;i<=88;i++){\n        update[Object.keys(update)[i]] = 0;\n    }\n}\nupdate['epo'] = Date.now();\n\nmsg.topic = \"INSERT INTO `alldata`(\";\nfor(i=0;i<Object.keys(update).length;i++){\n    msg.topic += \"`\";\n    msg.topic += Object.keys(update)[i];\n    msg.topic += \"`\";\n    if(i!=(Object.keys(update).length)-1){\n        msg.topic += \",\";    \n    }\n}\nmsg.topic += \")VALUES(\";\nfor(i=0;i<Object.keys(update).length;i++){\n    msg.topic+=update[Object.keys(update)[i]];\n    if(i!=(Object.keys(update).length)-1){\n        msg.topic += \",\";    \n    }\n}\nmsg.topic += \");\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1010,
        "y": 2120,
        "wires": [
            [
                "fc368a4a3be2c273"
            ]
        ]
    },
    {
        "id": "989186d0e6380f31",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 890,
        "y": 2120,
        "wires": [
            [
                "64468203ead8db20"
            ]
        ]
    },
    {
        "id": "8cdf06719bcf8d4d",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 890,
        "y": 2180,
        "wires": [
            [
                "1ba85099e0e6c572",
                "bfa0688fe7c7bf1f"
            ]
        ]
    },
    {
        "id": "d5a06e338272543a",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "mydb": "1280af92.129c7",
        "name": " ",
        "x": 1130,
        "y": 2180,
        "wires": [
            []
        ]
    },
    {
        "id": "1ba85099e0e6c572",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "func": "var update = msg.payload[0][0];\nmsg.ID = msg.payload[1][0].ID.substring(0,2);\nif(msg.ID.substring(0,2)==\"SA\"){\n    for(i=15;i<=22;i++){\n        update[Object.keys(update)[i]] = 0;\n    }\n}else if(msg.ID.substring(0,2)==\"SB\"){\n    for(i=23;i<=30;i++){\n        update[Object.keys(update)[i]] = 0;\n    }\n}else if(msg.ID.substring(0,2)==\"FA\"){\n    for(i=71;i<=79;i++){\n        update[Object.keys(update)[i]] = 0;\n    }\n}else if(msg.ID.substring(0,2)==\"FB\"){\n    for(i=80;i<=88;i++){\n        update[Object.keys(update)[i]] = 0;\n    }\n}\nupdate['epo'] = Date.now();\n\nmsg.topic = \"INSERT INTO `alldata`(\";\nfor(i=0;i<Object.keys(update).length;i++){\n    msg.topic += \"`\";\n    msg.topic += Object.keys(update)[i];\n    msg.topic += \"`\";\n    if(i!=(Object.keys(update).length)-1){\n        msg.topic += \",\";    \n    }\n}\nmsg.topic += \")VALUES(\";\nfor(i=0;i<Object.keys(update).length;i++){\n    msg.topic+=update[Object.keys(update)[i]];\n    if(i!=(Object.keys(update).length)-1){\n        msg.topic += \",\";    \n    }\n}\nmsg.topic += \");\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1010,
        "y": 2180,
        "wires": [
            [
                "d5a06e338272543a"
            ]
        ]
    },
    {
        "id": "2177228ea0ff8b2c",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "func": "for(i=0;i<msg.payload.length;i++){\n    msg.payload[i][0]['Intervalx'] = parseFloat((msg.payload[i][0].Intervalx/60).toFixed(3));\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1110,
        "y": 1840,
        "wires": [
            [
                "30a0bf67998efc53",
                "e7ddb9cb4828e34b"
            ]
        ]
    },
    {
        "id": "2d70a4827a0fc2ba",
        "type": "mysql",
        "z": "25a6ec1139f1bc3a",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 830,
        "y": 1320,
        "wires": [
            [
                "4a9e7c82321b4006"
            ]
        ]
    },
    {
        "id": "95e5ca856855fe47",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "func": "var d  = \"2,\"+String(msg.payload[0].RelayIoT)+\",5,\";\nif(msg.payload[0].Mode == \"sequence\"){\n    d += \"0,\";\n}else if(msg.payload[0].Mode == \"paralel\"){\n    d += \"1,\";\n}\nd+=String(msg.payload[0].Intervalx)+\",\"\nfor(i=0;i<msg.payload.length;i++){\n    d+=String(msg.payload[i].Duration);\n    if(i!=msg.payload.length-1){\n        d+=\",\";\n    }\n}\nd += \"#\";\nmsg.result = d;\n\nif(msg.newsetting == d){\n    msg.payload = {\"Stat\":true}\n}else{\n    msg.payload = {\"Stat\":false}\n}\nreturn msg;\n\n// 2,2,5,0,12,2,2,2,2,2,2,2,2#",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 1320,
        "wires": [
            [
                "73b2df2c76028d0d",
                "fe25dbb1f907dedb",
                "30324151406ff950"
            ]
        ]
    },
    {
        "id": "bfa0688fe7c7bf1f",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1040,
        "y": 2240,
        "wires": []
    },
    {
        "id": "007bb28973952da7",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": "Feedback Stop",
        "func": "if((msg.payload.split(\",\")[2]==\"111\" && msg.payload.split(\",\")[3]==\"STOP\")){\n    msg.payload= msg.payload;\n}else{\n    msg.payload = null;\n    return msg;\n}\nflow.set(\"StopEpo\",Date.now());\nmsg.topic = \"SELECT * FROM `alldata` ORDER BY `epo` DESC LIMIT 1;\";\nmsg.topic += \"SELECT `ID` FROM `devicemap` WHERE `RelayIoT` = '\"+String(msg.payload.split(\",\")[1])+\"';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 2180,
        "wires": [
            [
                "9fea7023575131d3"
            ]
        ]
    },
    {
        "id": "4a9e7c82321b4006",
        "type": "delay",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 960,
        "y": 1320,
        "wires": [
            [
                "95e5ca856855fe47"
            ]
        ]
    },
    {
        "id": "5f32218ed1ebbeb2",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "name": "Sequence",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload[3].countSA",
        "targetType": "msg",
        "statusVal": "payload[3].countSA",
        "statusType": "auto",
        "x": 1210,
        "y": 1760,
        "wires": []
    },
    {
        "id": "e7ddb9cb4828e34b",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1280,
        "y": 1900,
        "wires": []
    },
    {
        "id": "4b8ef172f1f8e71f",
        "type": "delay",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 840,
        "y": 1360,
        "wires": [
            [
                "567da1a113aafba1"
            ]
        ]
    },
    {
        "id": "120a870490104e9a",
        "type": "delay",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 840,
        "y": 1400,
        "wires": [
            [
                "31e24a3b94cf87be"
            ]
        ]
    },
    {
        "id": "567da1a113aafba1",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "func": "var time = flow.get(\"RunEpo\");\nif(Date.now()-time<=20000){\n    msg.payload = {\"Stat\":true}\n}else{\n    msg.payload = {\"Stat\":false}\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 1360,
        "wires": [
            [
                "73b2df2c76028d0d",
                "fe25dbb1f907dedb"
            ]
        ]
    },
    {
        "id": "31e24a3b94cf87be",
        "type": "function",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "func": "var time = flow.get(\"StopEpo\");\nif(Date.now()-time<=20000){\n    msg.payload = {\"Stat\":true}\n}else{\n    msg.payload = {\"Stat\":false}\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 1400,
        "wires": [
            [
                "73b2df2c76028d0d",
                "fe25dbb1f907dedb"
            ]
        ]
    },
    {
        "id": "fe25dbb1f907dedb",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1310,
        "y": 1440,
        "wires": []
    },
    {
        "id": "a4569ebd42ad5013",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 500,
        "y": 2300,
        "wires": []
    },
    {
        "id": "a30425505c7d0ba2",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 1500,
        "wires": []
    },
    {
        "id": "f6c2ad9f7f018bd5",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "result",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 940,
        "y": 1240,
        "wires": []
    },
    {
        "id": "30324151406ff950",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "result",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1270,
        "y": 1240,
        "wires": []
    },
    {
        "id": "986cf2de8115c7c2",
        "type": "debug",
        "z": "25a6ec1139f1bc3a",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1220,
        "y": 1580,
        "wires": []
    },
    {
        "id": "a63f53a7be972594",
        "type": "tab",
        "label": "Control Backwash",
        "disabled": false,
        "info": ""
    },
    {
        "id": "a684e23157166858",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Dummy Trigger",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "349903ca34602140",
            "eb72c607a34c2b6b",
            "5734f5c5020368f7"
        ],
        "x": 34,
        "y": 19,
        "w": 312,
        "h": 122
    },
    {
        "id": "9adcfdc585e41095",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Queue",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "f8db57485195229c",
            "3dc491bd664d7a02",
            "8a4fdc931865d347",
            "d7430ef79ab2029d",
            "7c6aa31b0d5bc5b3",
            "9c671f32dc2d521f",
            "9de41a9c3c19cc64",
            "aa34f6521c2b88ca"
        ],
        "x": 354,
        "y": 19,
        "w": 612,
        "h": 122
    },
    {
        "id": "a3a55e80ba5387bb",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Incoming Outcoming",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "c91eb3591af378ad",
            "571f75d84ce0befe",
            "3d132cbd91c08e28",
            "6d925da632a38652",
            "735c0ecac46f456e",
            "c3637832d742c256",
            "c4be29d122c35a0d",
            "b5d513844b9212a7",
            "7807a0cb80ba74db",
            "bca5a391e2914744",
            "c341f5e779066fa6",
            "c80bb79699cca373"
        ],
        "x": 974,
        "y": 99,
        "w": 752,
        "h": 182
    },
    {
        "id": "9ab9de66e54723ac",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Scan Filter Status",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "f0afb033b038a2ac",
            "62ae931f285227ad",
            "a80634a6f736d4a2",
            "5d114981618c0dbd"
        ],
        "x": 974,
        "y": -1,
        "w": 482,
        "h": 82
    },
    {
        "id": "7253bbad74861c36",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Queue Maker",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "f56c2d4240327382",
            "37feceec4eddd6c1",
            "226d9a7d90cf7e51",
            "83b0277748d493cf",
            "9229b16f0d199768",
            "078c651cd623555f",
            "7ff8d57318535b89",
            "bab60ae626b916e5",
            "e33b48a3bcef0eff",
            "30c4f38ec3215d65"
        ],
        "x": 34,
        "y": 159,
        "w": 832,
        "h": 122
    },
    {
        "id": "fe4374a597e797ce",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Filter Status",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "cb6649a4febeeea1",
            "3bf1bdd5369021f5",
            "8e24e67e3ae58776",
            "05124576ed98ec78",
            "03a73b5809c8aa1b",
            "497cced55d5f553b",
            "f254b7438c2cbfd0",
            "1d6e996e4752e9fa",
            "d5aceb6dd5a70497"
        ],
        "x": 34,
        "y": 299,
        "w": 1212,
        "h": 82
    },
    {
        "id": "66877bcdacc143c6",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Step1",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "9bc9577094b7e952",
            "2a44227780c21acb",
            "58411284819dbcd8",
            "eb5a9e2421af5df6",
            "5fa216369721e585",
            "fc41c3a35fe7e8ce",
            "cc86ef059eea350d",
            "0e467c2eb852a024",
            "12908876922642bc",
            "8955dc36a0c4c3a4",
            "7f97abae467a0873",
            "e87de73b7d590bab"
        ],
        "x": 34,
        "y": 399,
        "w": 1232,
        "h": 122
    },
    {
        "id": "b124282fa98cc73f",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Step2",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "b285c32a8a01e1b6",
            "e506d6cf472bf772",
            "c1fa7525ed1fa1d7",
            "0ac31342a34dc85b",
            "5d05e47194d9e980",
            "6604fe9b777573b5",
            "6d505ac87418e033",
            "6c543fac5e94fc7c",
            "ce2cc709dc9f9a8c",
            "d6e0f5d668e7d1bf",
            "85f84da84db66a86",
            "4b76ea2be7cff926",
            "78222dca5a16ea0f",
            "df296515c457c412"
        ],
        "x": 34,
        "y": 539,
        "w": 992,
        "h": 122
    },
    {
        "id": "f270249d1bfc5626",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Step3",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "78fb9c9c8ff61838",
            "4496eb9784411e84",
            "2d8fdac1a7d49d75",
            "381337473f8995cd",
            "e70d8d1fb9f6e203",
            "80ec2d82b0b79e38",
            "788bc1190f6f2f3d",
            "571372163a76144e",
            "2d1ded265caa12b7"
        ],
        "x": 34,
        "y": 679,
        "w": 742,
        "h": 122
    },
    {
        "id": "baa0dfffeddaf8a8",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Step4",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "623a17b07e07e919",
            "4090da47c4e86e8b",
            "e60a8ed3d1c695d2",
            "5a1aa66276c7e83a",
            "d0b736639b85f9df",
            "523a7401f45d4b1e",
            "96390ea6c7dc6bee",
            "96b46e0b6f78b23f",
            "31f436240024c039",
            "902a9d2ad0f053c6",
            "698e4c3a7c346f86",
            "848c4ef58fd27466",
            "1996546d40962151",
            "18e1a38ab42df5d9",
            "75e6361cb4cffcfe",
            "2927b01e0b0781d7"
        ],
        "x": 34,
        "y": 819,
        "w": 1042,
        "h": 162
    },
    {
        "id": "c490e77c6eb38296",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Step5",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "b0e5635f62db6e5e",
            "ed0217f860e6bdba",
            "3536cd3978d4bc0b",
            "92a15614018f9e6b",
            "b0b5700b38abd341",
            "1a64dd708acab03b",
            "501014c32836fae7",
            "bea3173dc3626114",
            "3750521f7b308932",
            "1c210545a6f02dc4",
            "df56ab26a32de52c",
            "c26391f65ee6d8c3",
            "5daf5c15313d5950",
            "e1b61680af5a6e4a",
            "bc292c78793b2ad8",
            "ee0f12b0015372d7"
        ],
        "x": 34,
        "y": 999,
        "w": 1042,
        "h": 162
    },
    {
        "id": "5b945b0b6fdd6972",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Step6",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "dbaac22feff46cd3",
            "06b73d1281ac206e",
            "ae4551e9d5bf1ea0",
            "e883c74df7b7d8ff",
            "dd7022310c4e6513",
            "92a35bc9dbf34d7d",
            "7cd8e3b92d10696b",
            "01499a977676feda",
            "70f2abb92ac95d2e",
            "b9b0745cd420346d",
            "ffd66d481290ed6b",
            "0e1db2906ff8299a",
            "c8a04d434053db26",
            "32ba0292decd536b",
            "687095a428762d87",
            "2e620f7990ee8db4",
            "e2bc16573e20a593"
        ],
        "x": 34,
        "y": 1179,
        "w": 1152,
        "h": 182
    },
    {
        "id": "7651d103a2a5ce02",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Step7",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "2c2509d634cf7d18",
            "efa0622d5ee447e4",
            "f79d02c24c629c53",
            "d1d6278d37fa6804",
            "2aa278d6a9e5d532",
            "d6ccd4a04ade4ef8",
            "510813f68e7d14c7",
            "91ab368d04fbe529",
            "60ba1b5302a550d3",
            "cc5af7b5ce83c741",
            "2957790ef728b245",
            "c2268a96842e835c",
            "c203ea539bd57180",
            "b812587cea3a6bbc",
            "55bade0cabe7f5f2",
            "baf73d71280f9b72",
            "a0869667171e7473",
            "dcdf019c5fe83c4b",
            "3910541bb7483821",
            "aed4205843ef8cdd",
            "57f0cfccf5542f1b",
            "a47d9457d9383e7b",
            "5319510036bdb3d8",
            "92d199e0a048e5bf",
            "d7715b3740575733",
            "1cb11765ef7d6e32"
        ],
        "x": 34,
        "y": 1379,
        "w": 1342,
        "h": 222
    },
    {
        "id": "ec47342fc5a3f52d",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Step8",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "fe17f19c164e1709",
            "0948e19c51d2036a",
            "4f3488e191a0d9f3",
            "3324e45f58629674",
            "2a5610b39bca8c74",
            "f74a151e484c4937",
            "974e3cded13f4259",
            "c36ec3258da060b6",
            "b66fe6ce41d36dfd",
            "15fe39e51154920c",
            "d8999e616d8ad7c0",
            "635ad19cdca026ee",
            "437403094c65c030",
            "d82ce9475b364bd6",
            "361f0d4e779150d3",
            "46de081689f18e35",
            "17aafc4f5a71ee7b",
            "8cc7e82560d67746"
        ],
        "x": 34,
        "y": 1619,
        "w": 1312,
        "h": 182
    },
    {
        "id": "05112cacbdf51daa",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Step9",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "3ab62350f7890345",
            "9d89cff6a435b242",
            "6de1bdd3d9464625",
            "6f63ed42d3894446",
            "69cacad4f82ea88c",
            "aea0543b6ce0b578",
            "a3fe2f34c3b3b3b0",
            "91f2f8200411c4c0",
            "010c87c018444d6a",
            "571d2813afe7396f",
            "252880f1ee25dca9",
            "45f453e62837d7b0",
            "386f9ee317e74e19",
            "59ee35f8c60b9fde",
            "0ede015f3ee89585",
            "a0675c154ea3b039",
            "904ca4df476f362e",
            "93b2c039bca915fc",
            "c796b9d5b8ee6576",
            "d5cb2b60380a6b77",
            "21d48829227dea19"
        ],
        "x": 34,
        "y": 1799,
        "w": 1332,
        "h": 242
    },
    {
        "id": "83b75805d0f3c72d",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Step10",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "d0a0ffe0b18bcc52",
            "2fa87b154dc595f7",
            "175e2d36f10d1ad4",
            "33a60b72e728c0a9",
            "75a7c7a095f1e88a",
            "3ce348d62c8c24ee",
            "66bf34c2fbabe3be",
            "1a34bf38b147f660",
            "39e64006246b21db",
            "917c5deae5b4f6cf",
            "d9ca03809b72a8d7",
            "3cbdef5105cac94e",
            "5dba8e3cac111ac3",
            "4bdb03075bb66bd9"
        ],
        "x": 44,
        "y": 2019,
        "w": 1332,
        "h": 162
    },
    {
        "id": "df5b46af941d4f93",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Step11",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "c04d38edf8b113ed",
            "dad628060a813672",
            "3ee927ac2be88b6d",
            "dcd77042410ae1b9",
            "c6a00d050ca6f122",
            "aa0154773a9dba07",
            "928b2f29f01187d2",
            "1999a9bf84c367c8",
            "8f7379bc37f83a24",
            "f83281bc1fbf784b",
            "d7017d81289dc665",
            "ef9bea3fc6e3702b",
            "bfff2bb75dd47df5",
            "749c0d3d39c0845f",
            "c787536f84c0701c",
            "e3b5a135fb45be89",
            "f596ded06a1be5e9"
        ],
        "x": 34,
        "y": 2199,
        "w": 1062,
        "h": 162
    },
    {
        "id": "d1f8acc1f2da7605",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Step12",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "8fd49bc7c4e91a5b",
            "287ba95de5c24184",
            "74c4aa0ef3b1a321",
            "e7e19b1b4884ef69",
            "4efa6e3c75931572",
            "9cd70f1f86e8abca",
            "4fe352e23fb78dd6",
            "4d1f86e9765deba0",
            "051927d7bbd19f4e",
            "fede16ef32dbdc30",
            "09d3ae975ed770aa",
            "ecae2bbf1937d8e1",
            "e133f6f4eaf09945",
            "a3a9067576b570ad",
            "212cc3835e81d3ac",
            "515f4ab43662d5aa",
            "d0c05ddafda5b3dd"
        ],
        "x": 34,
        "y": 2379,
        "w": 1062,
        "h": 162
    },
    {
        "id": "8b8a7bb9884e0985",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Step13",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "be2f8830cff0ca2d",
            "0b956fd0ff3d8cdc",
            "465aef9e063e90bc",
            "0ffccaf0c29efd17",
            "7b35b95c2c6a445c",
            "b5d9c8fe103cb0b1",
            "0be2b4476624de8c",
            "df372b410cc4dee3",
            "c3aaacfa68073727",
            "be665b4434cb319c",
            "32349f470b5f5353",
            "2212829fa768b5b2",
            "75c8647845084af0",
            "ba9be6e35ee5ce05"
        ],
        "x": 34,
        "y": 2619,
        "w": 1062,
        "h": 162
    },
    {
        "id": "d2aa1f61fe4d5244",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Step14",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "596f3ec4c65e1fd8",
            "7e31d326d47f8e81",
            "fd3a8e2f0e169f68",
            "7580faba7d1d413f",
            "3fc2d8b1d6a949cb",
            "18e107b3614ada95",
            "4709f8c4e9aa2da5",
            "c3762e6b2b2fa7d1",
            "a32eb1b07913ad72",
            "b6080f63ef0aac5f",
            "a7601ce6d385b972",
            "1976d81e8279c6ad",
            "a43249b990953226",
            "b54d7fea300de991",
            "49beb2a85d35f34b",
            "0ead4639118c12fa"
        ],
        "x": 34,
        "y": 2779,
        "w": 1052,
        "h": 162
    },
    {
        "id": "045f44abb9ef82dd",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Step15",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "60c7f5b9b39a5da5",
            "e8b5c92fcdb67c9a",
            "17f918b09c2f5d92",
            "566743fb0ff46ae7",
            "ca7fc9e3567c36d6",
            "cb2d0ae14928b874",
            "fecb0f433de15d69",
            "8a7c8bd759aa8261",
            "2e57636c9cb3bb7f",
            "3404e2059669d615",
            "8622ec848adf26c7",
            "4b41db5006ce5c4e",
            "e9f96ad780d54702",
            "998bbd04e15ea2ce",
            "82b3829be4cd1488"
        ],
        "x": 34,
        "y": 2979,
        "w": 1022,
        "h": 122
    },
    {
        "id": "40a366e33efceef9",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Step16",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "0d3776a6b2c6b802",
            "180e8f781567e4fa",
            "da671d18ff1d96b9",
            "1d303497e5ae13aa",
            "f011995abfa69849",
            "e8d04dd53e05cd23",
            "f63a16487a5b3119",
            "7e09476836e4a03d",
            "16da9dab7a85130d",
            "087b3a12ccf4de35",
            "55864fa0f1f8b2bc",
            "ee8c25a37c7f0bf5",
            "2162a4f7e48ba37a",
            "9a1751b3a6a58c8e",
            "a0ede2091051b198"
        ],
        "x": 34,
        "y": 3119,
        "w": 1022,
        "h": 122
    },
    {
        "id": "80303bac25cb61c4",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Step18",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "350ed8d08e9eecd1",
            "ddcceca0ea97e95a",
            "131b34fa5b4543b7",
            "637cecf4884e6af7",
            "ab038ba901a29bb0",
            "326125f0e095df12",
            "ca745e045d7e14d8",
            "706272fc71bb10cc"
        ],
        "x": 34,
        "y": 3399,
        "w": 852,
        "h": 122
    },
    {
        "id": "1a972a1d81c536ec",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Step17",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "45de5a4b136abc1c",
            "e9e027804cf3c7ef",
            "6de8c99d3cd16c4f",
            "710a9e02e0e7bb2c",
            "38eb7a569ac1f8b0",
            "28951ca70d02793a",
            "8325469bd357734b",
            "3c124da530146221",
            "e85831479da89f04",
            "97d4e00f9a2fcb13",
            "2bcc214951ef2985",
            "a5425685c028ab36",
            "a4f47bf345e22c00",
            "bbc08647449c1e12"
        ],
        "x": 34,
        "y": 3259,
        "w": 972,
        "h": 122
    },
    {
        "id": "26b786e002320c0f",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Step19",
        "style": {
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "eff5ae07ce88958b",
            "4be55e6e7a54e573",
            "46fea17e2490be45",
            "22bba1893f212191",
            "9d6e4b0c9b584046",
            "ffeb9d5e58d6238b",
            "3d274aab341783d1",
            "93ca5ab46e222c1a",
            "5ea4a3628527103d",
            "26ea5b05cd2a734a",
            "3d377ce5d021cb3d",
            "04081bd142d7df58",
            "afd3053939c9dcf9",
            "ca4763302919d162",
            "7c8df2dfa50a6888",
            "971a5b6fe38eb374"
        ],
        "x": 34,
        "y": 3559,
        "w": 1172,
        "h": 122
    },
    {
        "id": "aec2e917d1938482",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Auto Backwash",
        "style": {
            "label": true
        },
        "nodes": [
            "946e72efd9f675d6",
            "3e76f1333416c32c",
            "a352d067c82691da",
            "752d052c45a3d289",
            "7a690dc7cb9f4642",
            "a4a273f7d1288132",
            "b40630b3416a490d",
            "d0d75dc1c51067b2",
            "95f04d1da5714122",
            "d2cf117f7ad659b8",
            "cf2ba89c33709203",
            "c1e4b2ee361235b3",
            "0d145b8a4f8222fe",
            "3858c7c073b404eb",
            "583be330eaebe443",
            "33a40369cf613c88"
        ],
        "x": 34,
        "y": 3739,
        "w": 852,
        "h": 262
    },
    {
        "id": "2f7af6a2a7c6c9d7",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Manual Backwash",
        "style": {
            "label": true
        },
        "nodes": [
            "d62d1ca87b37a423",
            "af52a5e9e979a3d3",
            "0f178f35cba0212c",
            "2e2d3a8b4af96c8a",
            "c2120b59de6545a5",
            "2d6607ee35012ea4",
            "715a499577051407",
            "041d38d1263c056f",
            "8c50a8072f47ad69",
            "da908f14c3f213e0",
            "d7f1ed691213f8b4",
            "c3ac80ce8a2c66f4",
            "de47272ce70a721d",
            "eefc2ee740fc3830",
            "db75da44738ee95a",
            "900947bb42ab2652",
            "4b132aafbbd3e2f4",
            "0ee29238087fe705",
            "e04952dc669813fd",
            "4a38dd491294a635",
            "998e7c7a9ff658cb",
            "fcdc8e18edaab067",
            "c2b5f3fde9d4b15a",
            "a52559c9c935cd3f",
            "366e947795ca7f70"
        ],
        "x": 34,
        "y": 4039,
        "w": 1132,
        "h": 302
    },
    {
        "id": "07b05d85275c52d9",
        "type": "group",
        "z": "a63f53a7be972594",
        "name": "Sensor Floatswitch",
        "style": {
            "label": true
        },
        "nodes": [
            "ec0f1afa3398af62",
            "a79a29ded7b49488",
            "55541118f48f7087",
            "21b659c62bb4f75b",
            "4527ce32fc9a612e",
            "8ac805f0d9b90390"
        ],
        "x": 34,
        "y": 4379,
        "w": 792,
        "h": 142
    },
    {
        "id": "f56c2d4240327382",
        "type": "link in",
        "z": "a63f53a7be972594",
        "g": "7253bbad74861c36",
        "name": "",
        "links": [
            "ea596677d0f5da51",
            "eb72c607a34c2b6b"
        ],
        "x": 75,
        "y": 200,
        "wires": [
            [
                "37feceec4eddd6c1",
                "226d9a7d90cf7e51"
            ]
        ]
    },
    {
        "id": "37feceec4eddd6c1",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "7253bbad74861c36",
        "name": " ",
        "func": "var d = reverseString(dTb(msg.payload.split(\",\")[3]));\nwhile(d.length<24){\n    d+=\"0\";\n}\nd = reverseString(reverseString(d).substring(0,16));\nmsg.stat = d;\nvar json = {};\nfor (let i = 0; i < 8; i++) {\n  const filterIndex = i + 1;\n  const startIndex = i * 2;\n  \n  json[`Filter${filterIndex}H`] = d[startIndex];\n  json[`Filter${filterIndex}L`] = d[startIndex + 1];\n}\nmsg.payload = json;\nmsg.filter = json;\nmsg.topic = \"select `Filter` from `queue`;\";\nreturn msg;\n\nfunction dTb(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  return binary;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}\n\nfunction reverseString(str) {\n  let reversed = '';\n  for (let i = str.length - 1; i >= 0; i--) {\n    reversed += str[i];\n  }\n  return reversed;\n}\n\nfunction ieo(number) {\n  if (number % 2 === 0) {\n    return true;\n  } else {\n    return false;\n  }\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 200,
        "wires": [
            [
                "83b0277748d493cf",
                "9229b16f0d199768"
            ]
        ]
    },
    {
        "id": "2b2a176acb01b77d",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1381632",
        "payloadType": "num",
        "x": 1620,
        "y": 500,
        "wires": [
            [
                "d6068cbfe50f66ab"
            ]
        ]
    },
    {
        "id": "d6068cbfe50f66ab",
        "type": "function",
        "z": "a63f53a7be972594",
        "name": "dTb",
        "func": "msg.payload = dTb(msg.payload);\n// var a = reverseString(msg.payload);\n// while(msg.payload.length<24){\n//     a+=\"0\";\n// }\n// msg.payload = reverseString(a);\nreturn msg;\n\nfunction dTb(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  return binary;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}\n\nfunction reverseString(str) {\n  let reversed = '';\n  for (let i = str.length - 1; i >= 0; i--) {\n    reversed += str[i];\n  }\n  return reversed;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1810,
        "y": 500,
        "wires": [
            [
                "dce3163292569423",
                "e61dab09eb3121e6"
            ]
        ]
    },
    {
        "id": "dce3163292569423",
        "type": "debug",
        "z": "a63f53a7be972594",
        "name": " ",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1950,
        "y": 560,
        "wires": []
    },
    {
        "id": "e61dab09eb3121e6",
        "type": "function",
        "z": "a63f53a7be972594",
        "name": "bTd",
        "func": "msg.payload = bTd(msg.payload);\nreturn msg;\n\nfunction dTb(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  return binary;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1930,
        "y": 480,
        "wires": [
            [
                "4533f62f0ab6f62e",
                "a0162e01c2c8b008"
            ]
        ]
    },
    {
        "id": "bd1d4bde78c29db4",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "000000000000001000000000",
        "payloadType": "str",
        "x": 1830,
        "y": 420,
        "wires": [
            [
                "e61dab09eb3121e6",
                "549f5689289d6b89"
            ]
        ]
    },
    {
        "id": "4533f62f0ab6f62e",
        "type": "debug",
        "z": "a63f53a7be972594",
        "name": " Decimal",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 2100,
        "y": 520,
        "wires": []
    },
    {
        "id": "a0162e01c2c8b008",
        "type": "function",
        "z": "a63f53a7be972594",
        "name": "dTb",
        "func": "msg.payload = dTb(msg.payload);\nreturn msg;\n\nfunction dTb(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  return binary;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2170,
        "y": 480,
        "wires": [
            [
                "18eb1a66883344a2"
            ]
        ]
    },
    {
        "id": "18eb1a66883344a2",
        "type": "debug",
        "z": "a63f53a7be972594",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 2290,
        "y": 520,
        "wires": []
    },
    {
        "id": "349903ca34602140",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "a684e23157166858",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "3,301,111,1381632",
        "payloadType": "str",
        "x": 170,
        "y": 100,
        "wires": [
            [
                "eb72c607a34c2b6b"
            ]
        ]
    },
    {
        "id": "549f5689289d6b89",
        "type": "debug",
        "z": "a63f53a7be972594",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload.length",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 2070,
        "y": 380,
        "wires": []
    },
    {
        "id": "3bf1bdd5369021f5",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "fe4374a597e797ce",
        "name": "Filter 1",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload[0]",
        "targetType": "msg",
        "statusVal": "payload[0]",
        "statusType": "auto",
        "x": 160,
        "y": 340,
        "wires": []
    },
    {
        "id": "8e24e67e3ae58776",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "fe4374a597e797ce",
        "name": "Filter 2",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload[1]",
        "targetType": "msg",
        "statusVal": "payload[0]",
        "statusType": "auto",
        "x": 300,
        "y": 340,
        "wires": []
    },
    {
        "id": "05124576ed98ec78",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "fe4374a597e797ce",
        "name": "Filter 3",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload[2]",
        "targetType": "msg",
        "statusVal": "payload[0]",
        "statusType": "auto",
        "x": 440,
        "y": 340,
        "wires": []
    },
    {
        "id": "03a73b5809c8aa1b",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "fe4374a597e797ce",
        "name": "Filter 4",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload[3]",
        "targetType": "msg",
        "statusVal": "payload[0]",
        "statusType": "auto",
        "x": 580,
        "y": 340,
        "wires": []
    },
    {
        "id": "497cced55d5f553b",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "fe4374a597e797ce",
        "name": "Filter 5",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload[4]",
        "targetType": "msg",
        "statusVal": "payload[0]",
        "statusType": "auto",
        "x": 720,
        "y": 340,
        "wires": []
    },
    {
        "id": "f254b7438c2cbfd0",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "fe4374a597e797ce",
        "name": "Filter 6",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload[5]",
        "targetType": "msg",
        "statusVal": "payload[0]",
        "statusType": "auto",
        "x": 860,
        "y": 340,
        "wires": []
    },
    {
        "id": "1d6e996e4752e9fa",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "fe4374a597e797ce",
        "name": "Filter 7",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload[6]",
        "targetType": "msg",
        "statusVal": "payload[0]",
        "statusType": "auto",
        "x": 1000,
        "y": 340,
        "wires": []
    },
    {
        "id": "d5aceb6dd5a70497",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "fe4374a597e797ce",
        "name": "Filter 8",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload[7]",
        "targetType": "msg",
        "statusVal": "payload[0]",
        "statusType": "auto",
        "x": 1140,
        "y": 340,
        "wires": []
    },
    {
        "id": "83b0277748d493cf",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "7253bbad74861c36",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 290,
        "y": 200,
        "wires": [
            [
                "078c651cd623555f"
            ]
        ]
    },
    {
        "id": "078c651cd623555f",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "7253bbad74861c36",
        "name": " ",
        "func": "var filter = msg.filter;\nvar triggered = [];\nvar queue = [];\nvar flag = false;\nmsg.topic = \"\";\nfor(i=0;i<msg.payload.length;i++){\n    queue.push(msg.payload[i].Filter);\n}\nif(queue.length>0){\n    for(i=0;i<8;i++){\n        if((filter[\"Filter\"+String(i+1)+\"H\"]==\"1\")&&(!queue.includes(\"Filter\"+String(i+1)))){\n            msg.topic += \"INSERT INTO `queue`(`epo`,`Filter`,`Stat`)VALUES(\"+String(Date.now())+\",'\"+String(\"Filter\"+String(i+1))+\"','1');\";\n            flag = true;\n        }\n    }\n}else{\n    for(i=0;i<8;i++){\n        if(filter[\"Filter\"+String(i+1)+\"H\"]==\"1\"){\n            msg.topic += \"INSERT INTO `queue`(`epo`,`Filter`,`Stat`)VALUES(\"+String(Date.now())+\",'\"+String(\"Filter\"+String(i+1))+\"','1');\";\n            flag = true;\n        }\n    }\n}\nif(!flag){\n    msg.payload = \"empty\";\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 200,
        "wires": [
            [
                "7ff8d57318535b89",
                "bab60ae626b916e5"
            ]
        ]
    },
    {
        "id": "30c4f38ec3215d65",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "7253bbad74861c36",
        "name": " ",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 770,
        "y": 200,
        "wires": []
    },
    {
        "id": "7ff8d57318535b89",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "7253bbad74861c36",
        "name": " ",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "empty",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 530,
        "y": 200,
        "wires": [
            [
                "e33b48a3bcef0eff"
            ]
        ]
    },
    {
        "id": "e33b48a3bcef0eff",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "7253bbad74861c36",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 650,
        "y": 200,
        "wires": [
            [
                "30c4f38ec3215d65"
            ]
        ]
    },
    {
        "id": "aa34f6521c2b88ca",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "9adcfdc585e41095",
        "name": "Reset Queue",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "delete from `queue`;update `Filter` set `Stat` = 'idle'; ",
        "payload": "",
        "payloadType": "date",
        "x": 710,
        "y": 100,
        "wires": [
            [
                "9c671f32dc2d521f"
            ]
        ]
    },
    {
        "id": "9c671f32dc2d521f",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "9adcfdc585e41095",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 870,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "d7430ef79ab2029d",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "9adcfdc585e41095",
        "name": " Next",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "select `Filter` from `queue` order by `epo` asc;",
        "payload": "",
        "payloadType": "date",
        "x": 490,
        "y": 100,
        "wires": [
            [
                "8a4fdc931865d347"
            ]
        ]
    },
    {
        "id": "8a4fdc931865d347",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "9adcfdc585e41095",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 610,
        "y": 60,
        "wires": [
            [
                "7c6aa31b0d5bc5b3"
            ]
        ]
    },
    {
        "id": "7c6aa31b0d5bc5b3",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "9adcfdc585e41095",
        "name": " ",
        "func": "try{\n    msg.topic = \"delete from `queue` where `Filter` = '\"+String(msg.payload[0].Filter)+\"';\";\n    msg.topic += \"update `Filter` set `Stat` = 'idle' where `Filter` = '\"+String(msg.payload[0].Filter)+\"';\";\n}catch(x){\n    msg.payload = [{\"Filter\":\"\"}];\n    msg.topic = \"select * from `queue` limit 1\";\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 60,
        "wires": [
            [
                "9c671f32dc2d521f",
                "9de41a9c3c19cc64"
            ]
        ]
    },
    {
        "id": "9de41a9c3c19cc64",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "9adcfdc585e41095",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload[0].Filter",
        "targetType": "msg",
        "statusVal": "topic",
        "statusType": "auto",
        "x": 870,
        "y": 100,
        "wires": []
    },
    {
        "id": "eb72c607a34c2b6b",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "a684e23157166858",
        "name": "",
        "links": [
            "f56c2d4240327382",
            "ad5a1677.9850f8"
        ],
        "x": 305,
        "y": 100,
        "wires": []
    },
    {
        "id": "bab60ae626b916e5",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "7253bbad74861c36",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 530,
        "y": 200,
        "wires": []
    },
    {
        "id": "9229b16f0d199768",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "7253bbad74861c36",
        "name": " ",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 290,
        "y": 240,
        "wires": []
    },
    {
        "id": "5734f5c5020368f7",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "a684e23157166858",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "3,301,111,1381376",
        "payloadType": "str",
        "x": 170,
        "y": 60,
        "wires": [
            [
                "eb72c607a34c2b6b"
            ]
        ]
    },
    {
        "id": "226d9a7d90cf7e51",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "7253bbad74861c36",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 170,
        "y": 240,
        "wires": []
    },
    {
        "id": "f0afb033b038a2ac",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "9ab9de66e54723ac",
        "name": " ",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "select * from Filter;select * from `queue` order by `epo` asc;",
        "payload": "",
        "payloadType": "date",
        "x": 1070,
        "y": 40,
        "wires": [
            [
                "a80634a6f736d4a2"
            ]
        ]
    },
    {
        "id": "62ae931f285227ad",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "9ab9de66e54723ac",
        "name": " ",
        "func": "var d = msg.payload[0];\nvar arr = [];\nfor(i=0;i<d.length;i++){\n    arr.push(d[i].Stat);\n}\nvar d2 = msg.payload[1];\nif(d2.length>0){\n    for(i=0;i<d2.length;i++){\n        var stat = arr[parseInt(d2[i].Filter.substring(d2[i].Filter.length-1,d2[i].Filter.length))-1];\n        var str = \"\"\n        \n        if(stat == \"idle\"){\n            str = \"Queue\"+String(i+1);\n        }else{\n            str = stat;\n        }\n        str += \" - \"+String(i+1);\n        arr[parseInt(d2[i].Filter.substring(d2[i].Filter.length-1,d2[i].Filter.length))-1] = str;\n        \n    }\n}\nmsg.payload = arr;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1310,
        "y": 40,
        "wires": [
            [
                "5d114981618c0dbd"
            ]
        ]
    },
    {
        "id": "a80634a6f736d4a2",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "9ab9de66e54723ac",
        "mydb": "1280af92.129c7",
        "name": " ",
        "x": 1190,
        "y": 40,
        "wires": [
            [
                "62ae931f285227ad"
            ]
        ]
    },
    {
        "id": "cb6649a4febeeea1",
        "type": "link in",
        "z": "a63f53a7be972594",
        "g": "fe4374a597e797ce",
        "name": "",
        "links": [
            "5d114981618c0dbd"
        ],
        "x": 75,
        "y": 340,
        "wires": [
            [
                "3bf1bdd5369021f5",
                "8e24e67e3ae58776",
                "05124576ed98ec78",
                "03a73b5809c8aa1b",
                "497cced55d5f553b",
                "f254b7438c2cbfd0",
                "1d6e996e4752e9fa",
                "d5aceb6dd5a70497"
            ]
        ]
    },
    {
        "id": "5d114981618c0dbd",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "9ab9de66e54723ac",
        "name": "",
        "links": [
            "cb6649a4febeeea1"
        ],
        "x": 1415,
        "y": 40,
        "wires": []
    },
    {
        "id": "9bc9577094b7e952",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "66877bcdacc143c6",
        "name": " ",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "select * from `queue` order by `epo` asc",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 440,
        "wires": [
            [
                "8955dc36a0c4c3a4"
            ]
        ]
    },
    {
        "id": "58411284819dbcd8",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "66877bcdacc143c6",
        "name": " ",
        "func": "var d = msg.payload;\nmsg.topic = \"\";\nif(msg.trigger == \"FromRun\"){\n    msg.payload = msg.filter;\n    msg.topic += \"SELECT `RelayIoT` FROM `devicemap` WHERE `Ket` = '\"+String(msg.filter)+\"' limit 1;\";\n    if(d.length>0){\n        msg.topic += \"UPDATE `queue` SET `Stat` = '1' WHERE `Filter` = '\"+String(d[0].Filter)+\"';\";\n        msg.topic += \"UPDATE `Filter` SET `Stat` = 'idle' WHERE `Filter` = '\"+String(d[0].Filter)+\"';\";\n    }\n    msg.topic += \"INSERT INTO `queue` (`epo`, `Filter`, `Stat`) SELECT (MIN(`epo`) - 1), '\"+msg.filter+\"', '1' FROM `queue`;\";\n    msg.topic += \"UPDATE `queue` SET `Stat` = '2' WHERE `Filter` = '\"+String(msg.filter)+\"';\";\n    msg.topic += \"UPDATE `Filter` SET `Stat` = 'Running' WHERE `Filter` = '\"+String(msg.filter)+\"';\";\n    \n}else if(d.length>0 && d[0].Stat == '1'){\n    msg.payload = d[0].Filter;\n    msg.filter = d[0].Filter;\n    msg.topic += \"SELECT `RelayIoT` FROM `devicemap` WHERE `Ket` = '\"+String(d[0].Filter)+\"' limit 1;\";\n    msg.topic += \"UPDATE `queue` SET `Stat` = '2' WHERE `Filter` = '\"+String(msg.payload)+\"';\";\n    msg.topic += \"UPDATE `Filter` SET `Stat` = 'Running' WHERE `Filter` = '\"+String(msg.payload)+\"';\";\n}else{\n    msg.payload = \"\";\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 440,
        "wires": [
            [
                "eb5a9e2421af5df6",
                "5fa216369721e585"
            ]
        ]
    },
    {
        "id": "2a44227780c21acb",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "66877bcdacc143c6",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 470,
        "y": 440,
        "wires": [
            [
                "58411284819dbcd8"
            ]
        ]
    },
    {
        "id": "eb5a9e2421af5df6",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "66877bcdacc143c6",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload[0].Filter",
        "statusType": "auto",
        "x": 730,
        "y": 440,
        "wires": []
    },
    {
        "id": "fc41c3a35fe7e8ce",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "66877bcdacc143c6",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 870,
        "y": 440,
        "wires": [
            [
                "cc86ef059eea350d",
                "7f97abae467a0873"
            ]
        ]
    },
    {
        "id": "5fa216369721e585",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "66877bcdacc143c6",
        "name": " ",
        "property": "payload.length",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 730,
        "y": 440,
        "wires": [
            [
                "fc41c3a35fe7e8ce"
            ]
        ]
    },
    {
        "id": "cc86ef059eea350d",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "66877bcdacc143c6",
        "name": " Tutup Inlet",
        "func": "var ID = msg.payload[0][0].RelayIoT;\nmsg.topic = \"\";\nflow.set(\"RelayIoTBW\",ID);\nvar channel = 0;\nvar filter = msg.filter;\nmsg.filter=msg.filter[msg.filter.length-1];\nif(msg.filter>4){\n    msg.filter = msg.filter - 4;\n}\nchannel += (5*(parseInt(msg.filter)-1))+1;\nmsg.payload = \"2,\"+String(ID)+\",8,\"+String(channel)+\",0#\"\nmsg.topic += \"UPDATE `Filter` SET `Stat` = 'Step1' WHERE `Filter` = '\"+String(filter)+\"';\";\nflow.set(\"RelayIoTBW\",[ID,channel,msg.payload,filter]);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1010,
        "y": 440,
        "wires": [
            [
                "0e467c2eb852a024",
                "12908876922642bc"
            ]
        ]
    },
    {
        "id": "0e467c2eb852a024",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "66877bcdacc143c6",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 1190,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "c91eb3591af378ad",
        "type": "mqtt out",
        "z": "a63f53a7be972594",
        "g": "a3a55e80ba5387bb",
        "name": "",
        "topic": "gw80/cmd",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "f29dc24ba57a62a5",
        "x": 1500,
        "y": 240,
        "wires": []
    },
    {
        "id": "571f75d84ce0befe",
        "type": "link in",
        "z": "a63f53a7be972594",
        "g": "a3a55e80ba5387bb",
        "name": "Gatewaycmd",
        "links": [
            "04081bd142d7df58",
            "12908876922642bc",
            "15fe39e51154920c",
            "18e1a38ab42df5d9",
            "1976d81e8279c6ad",
            "1996546d40962151",
            "2212829fa768b5b2",
            "326125f0e095df12",
            "386f9ee317e74e19",
            "49beb2a85d35f34b",
            "4b41db5006ce5c4e",
            "4b76ea2be7cff926",
            "5daf5c15313d5950",
            "749c0d3d39c0845f",
            "75c8647845084af0",
            "7a3a0e799d72f6cc",
            "80ec2d82b0b79e38",
            "82b3829be4cd1488",
            "8cc7e82560d67746",
            "a0ede2091051b198",
            "a3a9067576b570ad",
            "a5425685c028ab36",
            "b812587cea3a6bbc",
            "c2268a96842e835c",
            "c8a04d434053db26",
            "e133f6f4eaf09945",
            "e1b61680af5a6e4a",
            "e2bc16573e20a593",
            "ee8c25a37c7f0bf5",
            "f83281bc1fbf784b",
            "5dba8e3cac111ac3",
            "86e68ada27923f46",
            "998e7c7a9ff658cb",
            "fcdc8e18edaab067",
            "c2b5f3fde9d4b15a",
            "a52559c9c935cd3f",
            "366e947795ca7f70"
        ],
        "x": 1015,
        "y": 240,
        "wires": [
            [
                "c4be29d122c35a0d",
                "b5d513844b9212a7"
            ]
        ]
    },
    {
        "id": "12908876922642bc",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "66877bcdacc143c6",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 1155,
        "y": 440,
        "wires": []
    },
    {
        "id": "3d132cbd91c08e28",
        "type": "mqtt in",
        "z": "a63f53a7be972594",
        "g": "a3a55e80ba5387bb",
        "name": "",
        "topic": "gw80/data",
        "qos": "2",
        "datatype": "auto",
        "broker": "f29dc24ba57a62a5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 1060,
        "y": 140,
        "wires": [
            [
                "6d925da632a38652"
            ]
        ]
    },
    {
        "id": "6d925da632a38652",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "a3a55e80ba5387bb",
        "name": " Filter",
        "func": "for(i=0;i<2;i++){\n    if(msg.payload[i].charCodeAt()==10||msg.payload[i].charCodeAt()==13){\n        msg.payload = null;\n        return msg;\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1190,
        "y": 140,
        "wires": [
            [
                "735c0ecac46f456e"
            ]
        ]
    },
    {
        "id": "735c0ecac46f456e",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "a3a55e80ba5387bb",
        "name": " ",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1310,
        "y": 140,
        "wires": [
            [
                "c3637832d742c256",
                "7807a0cb80ba74db",
                "bca5a391e2914744"
            ]
        ]
    },
    {
        "id": "c3637832d742c256",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "a3a55e80ba5387bb",
        "name": "FeedbackBackwash",
        "links": [
            "e506d6cf472bf772",
            "78fb9c9c8ff61838",
            "623a17b07e07e919",
            "ed0217f860e6bdba",
            "06b73d1281ac206e",
            "cd2ac0cf.c718",
            "2c2509d634cf7d18",
            "0948e19c51d2036a",
            "9d89cff6a435b242",
            "60516545.53407c",
            "7c4c9e43.79f9e",
            "c04d38edf8b113ed",
            "8fd49bc7c4e91a5b",
            "dd23ac19667e2dac",
            "ef8e350b56f199b2",
            "7e31d326d47f8e81",
            "4095bce8540602c7",
            "e8b5c92fcdb67c9a",
            "180e8f781567e4fa",
            "350ed8d08e9eecd1",
            "e9e027804cf3c7ef",
            "4be55e6e7a54e573"
        ],
        "x": 1525,
        "y": 140,
        "wires": []
    },
    {
        "id": "e506d6cf472bf772",
        "type": "link in",
        "z": "a63f53a7be972594",
        "g": "b124282fa98cc73f",
        "name": "",
        "links": [
            "c3637832d742c256",
            "df296515c457c412"
        ],
        "x": 75,
        "y": 580,
        "wires": [
            [
                "b285c32a8a01e1b6"
            ]
        ]
    },
    {
        "id": "0ac31342a34dc85b",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "b124282fa98cc73f",
        "name": " ",
        "func": "var rly = msg.payload[0].Stat;\nmsg.payload = msg.save;\nif(rly == \"Step1\"){\n    if(msg.payload.split(\",\")[1]==flow.get(\"RelayIoTBW\")[0]&&msg.payload.split(\",\")[2]==\"111\"&&msg.payload.split(\",\")[3]==\"Status\"){\n        var arr = [];\n        for(i=1;i<msg.payload.split(\"Status\")[1].split(\",\").length;i++){\n            arr.push(parseInt(msg.payload.split(\"Status\")[1].split(\",\")[i]));\n        }\n        if(arr[flow.get(\"RelayIoTBW\")[1]-1]){\n            msg.payload = flow.get(\"RelayIoTBW\")[2];\n            msg.tryagain = true;\n        }else{\n            msg.tryagain = false;\n        }\n    }\n    msg.undefine = false;\n}else{\n    msg.undefine = true;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 580,
        "wires": [
            [
                "5d05e47194d9e980"
            ]
        ]
    },
    {
        "id": "6c543fac5e94fc7c",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "b124282fa98cc73f",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 620,
        "wires": [
            [
                "d6e0f5d668e7d1bf"
            ]
        ]
    },
    {
        "id": "4b76ea2be7cff926",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "b124282fa98cc73f",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 955,
        "y": 620,
        "wires": []
    },
    {
        "id": "d6e0f5d668e7d1bf",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "b124282fa98cc73f",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 820,
        "y": 620,
        "wires": [
            [
                "4b76ea2be7cff926"
            ]
        ]
    },
    {
        "id": "6604fe9b777573b5",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "b124282fa98cc73f",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 580,
        "wires": [
            [
                "ce2cc709dc9f9a8c"
            ]
        ]
    },
    {
        "id": "ce2cc709dc9f9a8c",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "b124282fa98cc73f",
        "name": " ",
        "func": "msg.payload = \"2,\"+flow.get(\"RelayIoTBW\")[0]+\",8,\"+String(flow.get(\"RelayIoTBW\")[1]+1)+\",0#\";\nvar a = flow.get(\"RelayIoTBW\");\na[2] = msg.payload;\nflow.set(\"RelayIoTBW\",a);\nmsg.topic += \"UPDATE `Filter` SET `Stat` = 'Step2' WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 820,
        "y": 580,
        "wires": [
            [
                "85f84da84db66a86"
            ]
        ]
    },
    {
        "id": "78fb9c9c8ff61838",
        "type": "link in",
        "z": "a63f53a7be972594",
        "g": "f270249d1bfc5626",
        "name": "",
        "links": [
            "c3637832d742c256",
            "571372163a76144e",
            "44a0f51155aec934",
            "2d1ded265caa12b7"
        ],
        "x": 75,
        "y": 720,
        "wires": [
            [
                "4496eb9784411e84"
            ]
        ]
    },
    {
        "id": "85f84da84db66a86",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "b124282fa98cc73f",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 950,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "04dc9cabf078bcd1",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1400,
        "y": 640,
        "wires": [
            [
                "26d5619f0221247a"
            ]
        ]
    },
    {
        "id": "26d5619f0221247a",
        "type": "function",
        "z": "a63f53a7be972594",
        "name": "",
        "func": "msg.payload = flow.get(\"RelayIoTBW\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1560,
        "y": 640,
        "wires": [
            [
                "0047538490944589"
            ]
        ]
    },
    {
        "id": "0047538490944589",
        "type": "debug",
        "z": "a63f53a7be972594",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1760,
        "y": 620,
        "wires": []
    },
    {
        "id": "b285c32a8a01e1b6",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "b124282fa98cc73f",
        "name": " ",
        "func": "msg.topic = \"SELECT `Stat` from `Filter` WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nmsg.save = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 580,
        "wires": [
            [
                "c1fa7525ed1fa1d7"
            ]
        ]
    },
    {
        "id": "c1fa7525ed1fa1d7",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "b124282fa98cc73f",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 290,
        "y": 580,
        "wires": [
            [
                "0ac31342a34dc85b"
            ]
        ]
    },
    {
        "id": "4496eb9784411e84",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "f270249d1bfc5626",
        "name": " ",
        "func": "var d = reverseString(dTb(msg.payload.split(\",\")[3]));\nwhile(d.length<24){\n    d+=\"0\";\n}\nd = reverseString(reverseString(d).substring(0,16));\nmsg.stat = d;\nvar json = {};\nfor (let i = 0; i < 8; i++) {\n  const filterIndex = i + 1;\n  const startIndex = i * 2;\n  \n  json[`Filter${filterIndex}H`] = d[startIndex];\n  json[`Filter${filterIndex}L`] = d[startIndex + 1];\n}\nmsg.payload = json;\nmsg.filter = json;\nmsg.topic = \"select `Filter` from `queue`;\";\nif(msg.payload[flow.get(\"RelayIoTBW\")[3]+\"L\"]== \"1\"){\n    msg.pass = true;\n}else{\n    msg.pass = false;\n}\nreturn msg;\n\nfunction dTb(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  return binary;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}\n\nfunction reverseString(str) {\n  let reversed = '';\n  for (let i = str.length - 1; i >= 0; i--) {\n    reversed += str[i];\n  }\n  return reversed;\n}\n\nfunction ieo(number) {\n  if (number % 2 === 0) {\n    return true;\n  } else {\n    return false;\n  }\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 720,
        "wires": [
            [
                "2d8fdac1a7d49d75"
            ]
        ]
    },
    {
        "id": "5d05e47194d9e980",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "b124282fa98cc73f",
        "name": " ",
        "property": "undefine",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 550,
        "y": 580,
        "wires": [
            [
                "6604fe9b777573b5",
                "6d505ac87418e033",
                "6c543fac5e94fc7c"
            ]
        ]
    },
    {
        "id": "6d505ac87418e033",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "b124282fa98cc73f",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "tryagain",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 690,
        "y": 620,
        "wires": []
    },
    {
        "id": "2d8fdac1a7d49d75",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "f270249d1bfc5626",
        "name": " ",
        "property": "pass",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 290,
        "y": 720,
        "wires": [
            [
                "381337473f8995cd"
            ]
        ]
    },
    {
        "id": "381337473f8995cd",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "f270249d1bfc5626",
        "name": " ",
        "func": "msg.payload = \"2,\"+flow.get(\"RelayIoTBW\")[0]+\",8,\"+String(flow.get(\"RelayIoTBW\")[1]+1)+\",0#\";\nvar a = flow.get(\"RelayIoTBW\");\na[2] = msg.payload;\nflow.set(\"RelayIoTBW\",a);\nmsg.topic += \"UPDATE `Filter` SET `Stat` = 'Step3' WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 720,
        "wires": [
            [
                "e70d8d1fb9f6e203",
                "80ec2d82b0b79e38"
            ]
        ]
    },
    {
        "id": "e70d8d1fb9f6e203",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "f270249d1bfc5626",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 700,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "80ec2d82b0b79e38",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "f270249d1bfc5626",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 665,
        "y": 760,
        "wires": []
    },
    {
        "id": "623a17b07e07e919",
        "type": "link in",
        "z": "a63f53a7be972594",
        "g": "baa0dfffeddaf8a8",
        "name": "",
        "links": [
            "c3637832d742c256",
            "2927b01e0b0781d7",
            "fcffa9f62dc41e30"
        ],
        "x": 75,
        "y": 900,
        "wires": [
            [
                "4090da47c4e86e8b"
            ]
        ]
    },
    {
        "id": "4090da47c4e86e8b",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "baa0dfffeddaf8a8",
        "name": " ",
        "func": "msg.topic = \"SELECT `Stat` from `Filter` WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nmsg.save = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 900,
        "wires": [
            [
                "e60a8ed3d1c695d2"
            ]
        ]
    },
    {
        "id": "e60a8ed3d1c695d2",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "baa0dfffeddaf8a8",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 290,
        "y": 900,
        "wires": [
            [
                "5a1aa66276c7e83a"
            ]
        ]
    },
    {
        "id": "5a1aa66276c7e83a",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "baa0dfffeddaf8a8",
        "name": " ",
        "func": "var rly = msg.payload[0].Stat;\nmsg.payload = msg.save;\nif(rly == \"Step3\"){\n    if(msg.payload.split(\",\")[1]==flow.get(\"RelayIoTBW\")[0]&&msg.payload.split(\",\")[2]==\"111\"&&msg.payload.split(\",\")[3]==\"Status\"){\n        var arr = [];\n        for(i=1;i<msg.payload.split(\"Status\")[1].split(\",\").length;i++){\n            arr.push(parseInt(msg.payload.split(\"Status\")[1].split(\",\")[i]));\n        }\n        if(arr[flow.get(\"RelayIoTBW\")[1]]){\n           msg.payload = flow.get(\"RelayIoTBW\")[2];\n           msg.tryagain = true;\n        }else{\n            msg.tryagain = false;\n        }\n    }\n    msg.undefine = false;\n}else{\n    msg.undefine = true;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 900,
        "wires": [
            [
                "d0b736639b85f9df"
            ]
        ]
    },
    {
        "id": "523a7401f45d4b1e",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "baa0dfffeddaf8a8",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 900,
        "wires": [
            [
                "31f436240024c039"
            ]
        ]
    },
    {
        "id": "96b46e0b6f78b23f",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "baa0dfffeddaf8a8",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 940,
        "wires": [
            [
                "902a9d2ad0f053c6"
            ]
        ]
    },
    {
        "id": "96390ea6c7dc6bee",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "baa0dfffeddaf8a8",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "tryagain",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 690,
        "y": 940,
        "wires": []
    },
    {
        "id": "d0b736639b85f9df",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "baa0dfffeddaf8a8",
        "name": " ",
        "property": "undefine",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 550,
        "y": 900,
        "wires": [
            [
                "523a7401f45d4b1e",
                "96390ea6c7dc6bee",
                "96b46e0b6f78b23f"
            ]
        ]
    },
    {
        "id": "902a9d2ad0f053c6",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "baa0dfffeddaf8a8",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 820,
        "y": 940,
        "wires": [
            [
                "1996546d40962151"
            ]
        ]
    },
    {
        "id": "1996546d40962151",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "baa0dfffeddaf8a8",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 955,
        "y": 940,
        "wires": []
    },
    {
        "id": "31f436240024c039",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "baa0dfffeddaf8a8",
        "name": " ",
        "func": "msg.payload = \"2,\"+flow.get(\"RelayIoTBW\")[0]+\",8,\"+String(flow.get(\"RelayIoTBW\")[1]+1+1)+\",1#\";\nvar a = flow.get(\"RelayIoTBW\");\na[2] = msg.payload;\nflow.set(\"RelayIoTBW\",a);\nmsg.topic += \"UPDATE `Filter` SET `Stat` = 'Step4' WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 900,
        "wires": [
            [
                "698e4c3a7c346f86",
                "848c4ef58fd27466"
            ]
        ]
    },
    {
        "id": "698e4c3a7c346f86",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "baa0dfffeddaf8a8",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 930,
        "y": 900,
        "wires": [
            []
        ]
    },
    {
        "id": "18e1a38ab42df5d9",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "baa0dfffeddaf8a8",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 1035,
        "y": 860,
        "wires": []
    },
    {
        "id": "848c4ef58fd27466",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "baa0dfffeddaf8a8",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 940,
        "y": 860,
        "wires": [
            [
                "18e1a38ab42df5d9"
            ]
        ]
    },
    {
        "id": "ed0217f860e6bdba",
        "type": "link in",
        "z": "a63f53a7be972594",
        "g": "c490e77c6eb38296",
        "name": "",
        "links": [
            "c3637832d742c256",
            "ee0f12b0015372d7"
        ],
        "x": 75,
        "y": 1080,
        "wires": [
            [
                "b0e5635f62db6e5e"
            ]
        ]
    },
    {
        "id": "b0e5635f62db6e5e",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "c490e77c6eb38296",
        "name": " ",
        "func": "msg.topic = \"SELECT `Stat` from `Filter` WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nmsg.save = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 1080,
        "wires": [
            [
                "3536cd3978d4bc0b"
            ]
        ]
    },
    {
        "id": "3536cd3978d4bc0b",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "c490e77c6eb38296",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 290,
        "y": 1080,
        "wires": [
            [
                "92a15614018f9e6b"
            ]
        ]
    },
    {
        "id": "92a15614018f9e6b",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "c490e77c6eb38296",
        "name": " ",
        "func": "var rly = msg.payload[0].Stat;\nmsg.payload = msg.save;\nif(rly == \"Step4\"){\n    if(msg.payload.split(\",\")[1]==flow.get(\"RelayIoTBW\")[0]&&msg.payload.split(\",\")[2]==\"111\"&&msg.payload.split(\",\")[3]==\"Status\"){\n        var arr = [];\n        for(i=1;i<msg.payload.split(\"Status\")[1].split(\",\").length;i++){\n            arr.push(parseInt(msg.payload.split(\"Status\")[1].split(\",\")[i]));\n        }\n        if(!arr[flow.get(\"RelayIoTBW\")[1]+1]){\n           msg.payload = flow.get(\"RelayIoTBW\")[2];\n           msg.tryagain = true;\n        }else{\n            msg.tryagain = false;\n        }\n    }\n    msg.undefine = false;\n}else{\n    msg.undefine = true;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 1080,
        "wires": [
            [
                "b0b5700b38abd341"
            ]
        ]
    },
    {
        "id": "b0b5700b38abd341",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "c490e77c6eb38296",
        "name": " ",
        "property": "undefine",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 550,
        "y": 1080,
        "wires": [
            [
                "1a64dd708acab03b",
                "501014c32836fae7",
                "bea3173dc3626114"
            ]
        ]
    },
    {
        "id": "1a64dd708acab03b",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "c490e77c6eb38296",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 1080,
        "wires": [
            [
                "3750521f7b308932"
            ]
        ]
    },
    {
        "id": "501014c32836fae7",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "c490e77c6eb38296",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "tryagain",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 690,
        "y": 1120,
        "wires": []
    },
    {
        "id": "bea3173dc3626114",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "c490e77c6eb38296",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 1120,
        "wires": [
            [
                "1c210545a6f02dc4"
            ]
        ]
    },
    {
        "id": "3750521f7b308932",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "c490e77c6eb38296",
        "name": " ",
        "func": "msg.payload = \"2,\"+flow.get(\"RelayIoTBW\")[0]+\",8,\"+String(flow.get(\"RelayIoTBW\")[1]+1+1+1)+\",1#\";\nvar a = flow.get(\"RelayIoTBW\");\na[2] = msg.payload;\nflow.set(\"RelayIoTBW\",a);\nmsg.topic += \"UPDATE `Filter` SET `Stat` = 'Step5' WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 1080,
        "wires": [
            [
                "df56ab26a32de52c",
                "c26391f65ee6d8c3"
            ]
        ]
    },
    {
        "id": "1c210545a6f02dc4",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "c490e77c6eb38296",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 820,
        "y": 1120,
        "wires": [
            [
                "5daf5c15313d5950"
            ]
        ]
    },
    {
        "id": "c26391f65ee6d8c3",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "c490e77c6eb38296",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 970,
        "y": 1080,
        "wires": [
            []
        ]
    },
    {
        "id": "df56ab26a32de52c",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "c490e77c6eb38296",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 940,
        "y": 1040,
        "wires": [
            [
                "e1b61680af5a6e4a"
            ]
        ]
    },
    {
        "id": "5daf5c15313d5950",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "c490e77c6eb38296",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 955,
        "y": 1120,
        "wires": []
    },
    {
        "id": "e1b61680af5a6e4a",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "c490e77c6eb38296",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 1035,
        "y": 1040,
        "wires": []
    },
    {
        "id": "06b73d1281ac206e",
        "type": "link in",
        "z": "a63f53a7be972594",
        "g": "5b945b0b6fdd6972",
        "name": "",
        "links": [
            "c3637832d742c256",
            "2e620f7990ee8db4"
        ],
        "x": 75,
        "y": 1280,
        "wires": [
            [
                "dbaac22feff46cd3"
            ]
        ]
    },
    {
        "id": "dbaac22feff46cd3",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "5b945b0b6fdd6972",
        "name": " ",
        "func": "msg.topic = \"SELECT `Stat` from `Filter` WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nmsg.save = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 1280,
        "wires": [
            [
                "ae4551e9d5bf1ea0"
            ]
        ]
    },
    {
        "id": "ae4551e9d5bf1ea0",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "5b945b0b6fdd6972",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 290,
        "y": 1280,
        "wires": [
            [
                "e883c74df7b7d8ff"
            ]
        ]
    },
    {
        "id": "e883c74df7b7d8ff",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "5b945b0b6fdd6972",
        "name": " ",
        "func": "var rly = msg.payload[0].Stat;\nmsg.payload = msg.save;\nif(rly == \"Step5\"){\n    if(msg.payload.split(\",\")[1]==flow.get(\"RelayIoTBW\")[0]&&msg.payload.split(\",\")[2]==\"111\"&&msg.payload.split(\",\")[3]==\"Status\"){\n        var arr = [];\n        for(i=1;i<msg.payload.split(\"Status\")[1].split(\",\").length;i++){\n            arr.push(parseInt(msg.payload.split(\"Status\")[1].split(\",\")[i]));\n        }\n        if(!arr[flow.get(\"RelayIoTBW\")[1]+1+1]){\n           msg.payload = flow.get(\"RelayIoTBW\")[2];\n           msg.tryagain = true;\n        }else{\n            msg.tryagain = false;\n        }\n    }\n    msg.undefine = false;\n}else{\n    msg.undefine = true;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 1280,
        "wires": [
            [
                "dd7022310c4e6513"
            ]
        ]
    },
    {
        "id": "dd7022310c4e6513",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "5b945b0b6fdd6972",
        "name": " ",
        "property": "undefine",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 550,
        "y": 1280,
        "wires": [
            [
                "92a35bc9dbf34d7d",
                "7cd8e3b92d10696b",
                "01499a977676feda"
            ]
        ]
    },
    {
        "id": "92a35bc9dbf34d7d",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "5b945b0b6fdd6972",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 1280,
        "wires": [
            [
                "70f2abb92ac95d2e"
            ]
        ]
    },
    {
        "id": "7cd8e3b92d10696b",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "5b945b0b6fdd6972",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "tryagain",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 690,
        "y": 1320,
        "wires": []
    },
    {
        "id": "01499a977676feda",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "5b945b0b6fdd6972",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 1320,
        "wires": [
            [
                "b9b0745cd420346d"
            ]
        ]
    },
    {
        "id": "70f2abb92ac95d2e",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "5b945b0b6fdd6972",
        "name": "Nyalakan pompa",
        "func": "msg.payload = \"2,\"+flow.get(\"RelayIoTBW\")[0]+\",8,\"+String(23)+\",1#\";\nvar a = flow.get(\"RelayIoTBW\");\na[2] = msg.payload;\nflow.set(\"RelayIoTBW\",a);\nmsg.topic += \"UPDATE `Filter` SET `Stat` = 'Step6' WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 850,
        "y": 1280,
        "wires": [
            [
                "ffd66d481290ed6b",
                "0e1db2906ff8299a"
            ]
        ]
    },
    {
        "id": "b9b0745cd420346d",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "5b945b0b6fdd6972",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 820,
        "y": 1320,
        "wires": [
            [
                "c8a04d434053db26"
            ]
        ]
    },
    {
        "id": "ffd66d481290ed6b",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "5b945b0b6fdd6972",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 1030,
        "y": 1280,
        "wires": [
            []
        ]
    },
    {
        "id": "c8a04d434053db26",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "5b945b0b6fdd6972",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 955,
        "y": 1320,
        "wires": []
    },
    {
        "id": "0e1db2906ff8299a",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "5b945b0b6fdd6972",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1040,
        "y": 1240,
        "wires": [
            [
                "e2bc16573e20a593"
            ]
        ]
    },
    {
        "id": "2c2509d634cf7d18",
        "type": "link in",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "name": "",
        "links": [
            "c3637832d742c256",
            "baf73d71280f9b72"
        ],
        "x": 75,
        "y": 1520,
        "wires": [
            [
                "efa0622d5ee447e4"
            ]
        ]
    },
    {
        "id": "efa0622d5ee447e4",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "name": " ",
        "func": "msg.topic = \"SELECT `Stat` from `Filter` WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nmsg.save = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 1520,
        "wires": [
            [
                "f79d02c24c629c53"
            ]
        ]
    },
    {
        "id": "f79d02c24c629c53",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 290,
        "y": 1520,
        "wires": [
            [
                "d1d6278d37fa6804"
            ]
        ]
    },
    {
        "id": "d1d6278d37fa6804",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "name": " ",
        "func": "var rly = msg.payload[0].Stat;\nmsg.payload = msg.save;\nif(rly == \"Step6\"){\n    if(msg.payload.split(\",\")[1]==flow.get(\"RelayIoTBW\")[0]&&msg.payload.split(\",\")[2]==\"111\"&&msg.payload.split(\",\")[3]==\"Status\"){\n        var arr = [];\n        for(i=1;i<msg.payload.split(\"Status\")[1].split(\",\").length;i++){\n            arr.push(parseInt(msg.payload.split(\"Status\")[1].split(\",\")[i]));\n        }\n        msg.arr = arr;\n        if(!arr[22]){//RELAYPOMPA\n           msg.payload = flow.get(\"RelayIoTBW\")[2];\n           msg.tryagain = true;\n        }else{\n            msg.tryagain = false;\n        }\n    }\n    msg.undefine = false;\n}else{\n    msg.undefine = true;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 1520,
        "wires": [
            [
                "2aa278d6a9e5d532"
            ]
        ]
    },
    {
        "id": "2aa278d6a9e5d532",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "name": " ",
        "property": "undefine",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 550,
        "y": 1520,
        "wires": [
            [
                "d6ccd4a04ade4ef8",
                "510813f68e7d14c7",
                "91ab368d04fbe529"
            ]
        ]
    },
    {
        "id": "d6ccd4a04ade4ef8",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 1520,
        "wires": [
            [
                "a0869667171e7473",
                "3910541bb7483821"
            ]
        ]
    },
    {
        "id": "510813f68e7d14c7",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "tryagain",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 690,
        "y": 1560,
        "wires": []
    },
    {
        "id": "91ab368d04fbe529",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 1560,
        "wires": [
            [
                "cc5af7b5ce83c741"
            ]
        ]
    },
    {
        "id": "60ba1b5302a550d3",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "name": "  ",
        "func": "msg.payload = \"2,\"+flow.get(\"RelayIoTBW\")[0]+\",8,\"+String(flow.get(\"RelayIoTBW\")[1]+1+1+1+1)+\",1#\";\nvar a = flow.get(\"RelayIoTBW\");\na[2] = msg.payload;\nflow.set(\"RelayIoTBW\",a);\nmsg.topic += \"UPDATE `Filter` SET `Stat` = 'Step7' WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\ndelete msg['reset'];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 950,
        "y": 1520,
        "wires": [
            [
                "2957790ef728b245",
                "b812587cea3a6bbc"
            ]
        ]
    },
    {
        "id": "cc5af7b5ce83c741",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 820,
        "y": 1560,
        "wires": [
            [
                "c2268a96842e835c"
            ]
        ]
    },
    {
        "id": "2957790ef728b245",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 1110,
        "y": 1520,
        "wires": [
            []
        ]
    },
    {
        "id": "c2268a96842e835c",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 955,
        "y": 1560,
        "wires": []
    },
    {
        "id": "b812587cea3a6bbc",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 1215,
        "y": 1480,
        "wires": []
    },
    {
        "id": "c203ea539bd57180",
        "type": "comment",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "name": "Saat Pompa Blower terdeteksi nyala",
        "info": "",
        "x": 340,
        "y": 1460,
        "wires": []
    },
    {
        "id": "32ba0292decd536b",
        "type": "comment",
        "z": "a63f53a7be972594",
        "g": "5b945b0b6fdd6972",
        "name": " Saat Valve Blower terdeteksi nyala",
        "info": "",
        "x": 320,
        "y": 1220,
        "wires": []
    },
    {
        "id": "fe17f19c164e1709",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "ec47342fc5a3f52d",
        "name": " ",
        "func": "msg.topic = \"SELECT `Stat` from `Filter` WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nmsg.save = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 1720,
        "wires": [
            [
                "4f3488e191a0d9f3"
            ]
        ]
    },
    {
        "id": "0948e19c51d2036a",
        "type": "link in",
        "z": "a63f53a7be972594",
        "g": "ec47342fc5a3f52d",
        "name": "",
        "links": [
            "c3637832d742c256",
            "17aafc4f5a71ee7b"
        ],
        "x": 75,
        "y": 1720,
        "wires": [
            [
                "fe17f19c164e1709"
            ]
        ]
    },
    {
        "id": "4f3488e191a0d9f3",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "ec47342fc5a3f52d",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 290,
        "y": 1720,
        "wires": [
            [
                "3324e45f58629674"
            ]
        ]
    },
    {
        "id": "3324e45f58629674",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "ec47342fc5a3f52d",
        "name": " ",
        "func": "var rly = msg.payload[0].Stat;\nmsg.payload = msg.save;\nif(rly == \"Step7\"){\n    if(msg.payload.split(\",\")[1]==flow.get(\"RelayIoTBW\")[0]&&msg.payload.split(\",\")[2]==\"111\"&&msg.payload.split(\",\")[3]==\"Status\"){\n        var arr = [];\n        for(i=1;i<msg.payload.split(\"Status\")[1].split(\",\").length;i++){\n            arr.push(parseInt(msg.payload.split(\"Status\")[1].split(\",\")[i]));\n        }\n        if(!arr[flow.get(\"RelayIoTBW\")[1]+1+1]){\n           msg.payload = flow.get(\"RelayIoTBW\")[2];\n           msg.tryagain = true;\n        }else{\n            msg.tryagain = false;\n        }\n    }\n    msg.undefine = false;\n}else{\n    msg.undefine = true;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 1720,
        "wires": [
            [
                "2a5610b39bca8c74"
            ]
        ]
    },
    {
        "id": "2a5610b39bca8c74",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "ec47342fc5a3f52d",
        "name": " ",
        "property": "undefine",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 550,
        "y": 1720,
        "wires": [
            [
                "f74a151e484c4937",
                "974e3cded13f4259",
                "c36ec3258da060b6"
            ]
        ]
    },
    {
        "id": "f74a151e484c4937",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "ec47342fc5a3f52d",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 1720,
        "wires": [
            [
                "d8999e616d8ad7c0"
            ]
        ]
    },
    {
        "id": "974e3cded13f4259",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "ec47342fc5a3f52d",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "tryagain",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 690,
        "y": 1760,
        "wires": []
    },
    {
        "id": "c36ec3258da060b6",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "ec47342fc5a3f52d",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 1760,
        "wires": [
            [
                "b66fe6ce41d36dfd"
            ]
        ]
    },
    {
        "id": "b66fe6ce41d36dfd",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "ec47342fc5a3f52d",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 820,
        "y": 1760,
        "wires": [
            [
                "15fe39e51154920c"
            ]
        ]
    },
    {
        "id": "15fe39e51154920c",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "ec47342fc5a3f52d",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 955,
        "y": 1760,
        "wires": []
    },
    {
        "id": "d8999e616d8ad7c0",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "ec47342fc5a3f52d",
        "name": "  ",
        "func": "msg.payload = \"2,\"+flow.get(\"RelayIoTBW\")[0]+\",8,\"+String(24)+\",1#\";\nvar a = flow.get(\"RelayIoTBW\");\na[2] = msg.payload;\nflow.set(\"RelayIoTBW\",a);\nmsg.topic += \"UPDATE `Filter` SET `Stat` = 'Step8' WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 1720,
        "wires": [
            [
                "d82ce9475b364bd6",
                "437403094c65c030"
            ]
        ]
    },
    {
        "id": "635ad19cdca026ee",
        "type": "comment",
        "z": "a63f53a7be972594",
        "g": "ec47342fc5a3f52d",
        "name": "Saat Valve Backwash terdeteksi nyala",
        "info": "",
        "x": 330,
        "y": 1660,
        "wires": []
    },
    {
        "id": "437403094c65c030",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "ec47342fc5a3f52d",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 940,
        "y": 1680,
        "wires": [
            [
                "8cc7e82560d67746"
            ]
        ]
    },
    {
        "id": "d82ce9475b364bd6",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "ec47342fc5a3f52d",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 950,
        "y": 1720,
        "wires": [
            []
        ]
    },
    {
        "id": "361f0d4e779150d3",
        "type": "comment",
        "z": "a63f53a7be972594",
        "g": "ec47342fc5a3f52d",
        "name": "Nyalakan Pompa Backwash",
        "info": "",
        "x": 1200,
        "y": 1680,
        "wires": []
    },
    {
        "id": "3ab62350f7890345",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "05112cacbdf51daa",
        "name": " ",
        "func": "msg.topic = \"SELECT `Stat` from `Filter` WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nmsg.save = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 1920,
        "wires": [
            [
                "6de1bdd3d9464625"
            ]
        ]
    },
    {
        "id": "9d89cff6a435b242",
        "type": "link in",
        "z": "a63f53a7be972594",
        "g": "05112cacbdf51daa",
        "name": "",
        "links": [
            "c3637832d742c256",
            "a0675c154ea3b039"
        ],
        "x": 75,
        "y": 1920,
        "wires": [
            [
                "3ab62350f7890345"
            ]
        ]
    },
    {
        "id": "6de1bdd3d9464625",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "05112cacbdf51daa",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 290,
        "y": 1920,
        "wires": [
            [
                "6f63ed42d3894446"
            ]
        ]
    },
    {
        "id": "6f63ed42d3894446",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "05112cacbdf51daa",
        "name": " ",
        "func": "var rly = msg.payload[0].Stat;\nmsg.payload = msg.save;\nif(rly == \"Step8\"){\n    if(msg.payload.split(\",\")[1]==flow.get(\"RelayIoTBW\")[0]&&msg.payload.split(\",\")[2]==\"111\"&&msg.payload.split(\",\")[3]==\"Status\"){\n        var arr = [];\n        for(i=1;i<msg.payload.split(\"Status\")[1].split(\",\").length;i++){\n            arr.push(parseInt(msg.payload.split(\"Status\")[1].split(\",\")[i]));\n        }\n        if(!arr[23]){//RELAYPOMPA\n           msg.payload = flow.get(\"RelayIoTBW\")[2];\n           msg.tryagain = true;\n        }else{\n            msg.tryagain = false;\n        }\n    }\n    msg.undefine = false;\n}else{\n    msg.undefine = true;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 1920,
        "wires": [
            [
                "69cacad4f82ea88c"
            ]
        ]
    },
    {
        "id": "69cacad4f82ea88c",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "05112cacbdf51daa",
        "name": " ",
        "property": "undefine",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 550,
        "y": 1920,
        "wires": [
            [
                "aea0543b6ce0b578",
                "a3fe2f34c3b3b3b0",
                "91f2f8200411c4c0"
            ]
        ]
    },
    {
        "id": "aea0543b6ce0b578",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "05112cacbdf51daa",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 1920,
        "wires": [
            [
                "010c87c018444d6a",
                "904ca4df476f362e"
            ]
        ]
    },
    {
        "id": "a3fe2f34c3b3b3b0",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "05112cacbdf51daa",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "tryagain",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 690,
        "y": 1960,
        "wires": []
    },
    {
        "id": "91f2f8200411c4c0",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "05112cacbdf51daa",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 1960,
        "wires": [
            [
                "571d2813afe7396f"
            ]
        ]
    },
    {
        "id": "010c87c018444d6a",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "05112cacbdf51daa",
        "name": "  ",
        "func": "msg.payload = \"2,\"+flow.get(\"RelayIoTBW\")[0]+\",8,\"+String(flow.get(\"RelayIoTBW\")[1]+1+1+1+1)+\",1#\";\nvar a = flow.get(\"RelayIoTBW\");\na[2] = msg.payload;\nflow.set(\"RelayIoTBW\",a);\nmsg.topic += \"UPDATE `Filter` SET `Stat` = 'Step9' WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 1920,
        "wires": [
            [
                "252880f1ee25dca9",
                "45f453e62837d7b0"
            ]
        ]
    },
    {
        "id": "571d2813afe7396f",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "05112cacbdf51daa",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 820,
        "y": 1960,
        "wires": [
            [
                "386f9ee317e74e19"
            ]
        ]
    },
    {
        "id": "252880f1ee25dca9",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "05112cacbdf51daa",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 950,
        "y": 1920,
        "wires": [
            []
        ]
    },
    {
        "id": "45f453e62837d7b0",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "05112cacbdf51daa",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 1080,
        "y": 1920,
        "wires": [
            []
        ]
    },
    {
        "id": "386f9ee317e74e19",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "05112cacbdf51daa",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 955,
        "y": 1960,
        "wires": []
    },
    {
        "id": "59ee35f8c60b9fde",
        "type": "comment",
        "z": "a63f53a7be972594",
        "g": "05112cacbdf51daa",
        "name": "Saat Pompa Backwash terdeteksi nyala",
        "info": "",
        "x": 340,
        "y": 1860,
        "wires": []
    },
    {
        "id": "2fa87b154dc595f7",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "83b75805d0f3c72d",
        "name": " ",
        "func": "msg.topic = \"SELECT `Stat` from `Filter` WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nmsg.save = msg.payload;\ndelete msg['reset'];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 2100,
        "wires": [
            [
                "175e2d36f10d1ad4"
            ]
        ]
    },
    {
        "id": "175e2d36f10d1ad4",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "83b75805d0f3c72d",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 550,
        "y": 2100,
        "wires": [
            [
                "33a60b72e728c0a9"
            ]
        ]
    },
    {
        "id": "33a60b72e728c0a9",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "83b75805d0f3c72d",
        "name": " ",
        "func": "var rly = msg.payload[0].Stat;\nmsg.payload = msg.save;\nif(rly == \"Step9\"){\n//     if(msg.payload.split(\",\")[1]==flow.get(\"RelayIoTBW\")[0]&&msg.payload.split(\",\")[2]==\"111\"&&msg.payload.split(\",\")[3]==\"Status\"){\n//         var arr = [];\n//         for(i=1;i<msg.payload.split(\"Status\")[1].split(\",\").length;i++){\n//             arr.push(parseInt(msg.payload.split(\"Status\")[1].split(\",\")[i]));\n//         }\n//         if(arr[flow.get(\"RelayIoTBW\")[1]+1+1]){//RELAYPOMPABlower\n//           msg.payload = flow.get(\"RelayIoTBW\")[2];\n//           msg.tryagain = true;\n//         }else{\n//             msg.tryagain = false;\n//         }\n//     }\n//     msg.undefine = false;\n    msg.undefine = false;\n    msg.tryagain = false;\n}else{\n    msg.undefine = true;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 2100,
        "wires": [
            [
                "75a7c7a095f1e88a"
            ]
        ]
    },
    {
        "id": "917c5deae5b4f6cf",
        "type": "comment",
        "z": "a63f53a7be972594",
        "g": "83b75805d0f3c72d",
        "name": "Sudah Waktunya Pompa Blower Mati",
        "info": "",
        "x": 270,
        "y": 2060,
        "wires": []
    },
    {
        "id": "d9ca03809b72a8d7",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "83b75805d0f3c72d",
        "name": "  ",
        "func": "msg.payload = \"2,\"+flow.get(\"RelayIoTBW\")[0]+\",8,\"+String(23)+\",0#\";\nvar a = flow.get(\"RelayIoTBW\");\na[2] = msg.payload;\nflow.set(\"RelayIoTBW\",a);\nmsg.topic += \"UPDATE `Filter` SET `Stat` = 'Step10' WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1110,
        "y": 2100,
        "wires": [
            [
                "3cbdef5105cac94e",
                "5dba8e3cac111ac3"
            ]
        ]
    },
    {
        "id": "75a7c7a095f1e88a",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "83b75805d0f3c72d",
        "name": " ",
        "property": "undefine",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 830,
        "y": 2100,
        "wires": [
            [
                "3ce348d62c8c24ee",
                "66bf34c2fbabe3be",
                "1a34bf38b147f660"
            ]
        ]
    },
    {
        "id": "3ce348d62c8c24ee",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "83b75805d0f3c72d",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 970,
        "y": 2100,
        "wires": [
            [
                "d9ca03809b72a8d7"
            ]
        ]
    },
    {
        "id": "66bf34c2fbabe3be",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "83b75805d0f3c72d",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "tryagain",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 970,
        "y": 2140,
        "wires": []
    },
    {
        "id": "1a34bf38b147f660",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "83b75805d0f3c72d",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 970,
        "y": 2140,
        "wires": [
            [
                "39e64006246b21db"
            ]
        ]
    },
    {
        "id": "5dba8e3cac111ac3",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "83b75805d0f3c72d",
        "name": "",
        "mode": "link",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 1335,
        "y": 2060,
        "wires": []
    },
    {
        "id": "39e64006246b21db",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "83b75805d0f3c72d",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 1120,
        "y": 2140,
        "wires": [
            []
        ]
    },
    {
        "id": "d0a0ffe0b18bcc52",
        "type": "link in",
        "z": "a63f53a7be972594",
        "g": "83b75805d0f3c72d",
        "name": "",
        "links": [
            "5319510036bdb3d8"
        ],
        "x": 85,
        "y": 2100,
        "wires": [
            [
                "2fa87b154dc595f7",
                "4bdb03075bb66bd9"
            ]
        ]
    },
    {
        "id": "c04d38edf8b113ed",
        "type": "link in",
        "z": "a63f53a7be972594",
        "g": "df5b46af941d4f93",
        "name": "",
        "links": [
            "c3637832d742c256",
            "e3b5a135fb45be89"
        ],
        "x": 75,
        "y": 2280,
        "wires": [
            [
                "dad628060a813672"
            ]
        ]
    },
    {
        "id": "dad628060a813672",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "df5b46af941d4f93",
        "name": " ",
        "func": "msg.topic = \"SELECT `Stat` from `Filter` WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nmsg.save = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 2280,
        "wires": [
            [
                "3ee927ac2be88b6d"
            ]
        ]
    },
    {
        "id": "3ee927ac2be88b6d",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "df5b46af941d4f93",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 290,
        "y": 2280,
        "wires": [
            [
                "dcd77042410ae1b9"
            ]
        ]
    },
    {
        "id": "dcd77042410ae1b9",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "df5b46af941d4f93",
        "name": " ",
        "func": "var rly = msg.payload[0].Stat;\nmsg.payload = msg.save;\nif(rly == \"Step10\"){\n    if(msg.payload.split(\",\")[1]==flow.get(\"RelayIoTBW\")[0]&&msg.payload.split(\",\")[2]==\"111\"&&msg.payload.split(\",\")[3]==\"Status\"){\n        var arr = [];\n        for(i=1;i<msg.payload.split(\"Status\")[1].split(\",\").length;i++){\n            arr.push(parseInt(msg.payload.split(\"Status\")[1].split(\",\")[i]));\n        }\n        if(arr[22]){//RELAYPOMPA\n           msg.payload = flow.get(\"RelayIoTBW\")[2];\n           msg.tryagain = true;\n        }else{\n            msg.tryagain = false;\n        }\n    }\n    msg.undefine = false;\n}else{\n    msg.undefine = true;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 2280,
        "wires": [
            [
                "c6a00d050ca6f122"
            ]
        ]
    },
    {
        "id": "c6a00d050ca6f122",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "df5b46af941d4f93",
        "name": " ",
        "property": "undefine",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 550,
        "y": 2280,
        "wires": [
            [
                "aa0154773a9dba07",
                "928b2f29f01187d2",
                "1999a9bf84c367c8"
            ]
        ]
    },
    {
        "id": "aa0154773a9dba07",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "df5b46af941d4f93",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 2280,
        "wires": [
            [
                "d7017d81289dc665"
            ]
        ]
    },
    {
        "id": "928b2f29f01187d2",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "df5b46af941d4f93",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "tryagain",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 690,
        "y": 2320,
        "wires": []
    },
    {
        "id": "1999a9bf84c367c8",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "df5b46af941d4f93",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 2320,
        "wires": [
            [
                "8f7379bc37f83a24"
            ]
        ]
    },
    {
        "id": "8f7379bc37f83a24",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "df5b46af941d4f93",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 820,
        "y": 2320,
        "wires": [
            [
                "f83281bc1fbf784b"
            ]
        ]
    },
    {
        "id": "f83281bc1fbf784b",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "df5b46af941d4f93",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 955,
        "y": 2320,
        "wires": []
    },
    {
        "id": "d7017d81289dc665",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "df5b46af941d4f93",
        "name": "  ",
        "func": "msg.payload = \"2,\"+flow.get(\"RelayIoTBW\")[0]+\",8,\"+String(flow.get(\"RelayIoTBW\")[1]+1+1+1)+\",0#\";\nvar a = flow.get(\"RelayIoTBW\");\na[2] = msg.payload;\nflow.set(\"RelayIoTBW\",a);\nmsg.topic += \"UPDATE `Filter` SET `Stat` = 'Step11' WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 2280,
        "wires": [
            [
                "bfff2bb75dd47df5",
                "ef9bea3fc6e3702b"
            ]
        ]
    },
    {
        "id": "ef9bea3fc6e3702b",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "df5b46af941d4f93",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 940,
        "y": 2240,
        "wires": [
            [
                "749c0d3d39c0845f"
            ]
        ]
    },
    {
        "id": "bfff2bb75dd47df5",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "df5b46af941d4f93",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 930,
        "y": 2280,
        "wires": [
            []
        ]
    },
    {
        "id": "749c0d3d39c0845f",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "df5b46af941d4f93",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 1055,
        "y": 2240,
        "wires": []
    },
    {
        "id": "8fd49bc7c4e91a5b",
        "type": "link in",
        "z": "a63f53a7be972594",
        "g": "d1f8acc1f2da7605",
        "name": "",
        "links": [
            "c3637832d742c256",
            "515f4ab43662d5aa"
        ],
        "x": 75,
        "y": 2460,
        "wires": [
            [
                "287ba95de5c24184"
            ]
        ]
    },
    {
        "id": "287ba95de5c24184",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "d1f8acc1f2da7605",
        "name": " ",
        "func": "msg.topic = \"SELECT `Stat` from `Filter` WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nmsg.save = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 2460,
        "wires": [
            [
                "74c4aa0ef3b1a321"
            ]
        ]
    },
    {
        "id": "74c4aa0ef3b1a321",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "d1f8acc1f2da7605",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 290,
        "y": 2460,
        "wires": [
            [
                "e7e19b1b4884ef69"
            ]
        ]
    },
    {
        "id": "e7e19b1b4884ef69",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "d1f8acc1f2da7605",
        "name": " ",
        "func": "var rly = msg.payload[0].Stat;\nmsg.payload = msg.save;\nif(rly == \"Step11\"){\n    if(msg.payload.split(\",\")[1]==flow.get(\"RelayIoTBW\")[0]&&msg.payload.split(\",\")[2]==\"111\"&&msg.payload.split(\",\")[3]==\"Status\"){\n        var arr = [];\n        for(i=1;i<msg.payload.split(\"Status\")[1].split(\",\").length;i++){\n            arr.push(parseInt(msg.payload.split(\"Status\")[1].split(\",\")[i]));\n        }\n        if(arr[flow.get(\"RelayIoTBW\")[1]+1+1]){\n           msg.payload = flow.get(\"RelayIoTBW\")[2];\n           msg.tryagain = true;\n        }else{\n            msg.tryagain = false;\n        }\n    }\n    msg.undefine = false;\n}else{\n    msg.undefine = true;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 2460,
        "wires": [
            [
                "4efa6e3c75931572"
            ]
        ]
    },
    {
        "id": "4efa6e3c75931572",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "d1f8acc1f2da7605",
        "name": " ",
        "property": "undefine",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 550,
        "y": 2460,
        "wires": [
            [
                "9cd70f1f86e8abca",
                "4fe352e23fb78dd6",
                "4d1f86e9765deba0"
            ]
        ]
    },
    {
        "id": "9cd70f1f86e8abca",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "d1f8acc1f2da7605",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 2460,
        "wires": [
            [
                "051927d7bbd19f4e"
            ]
        ]
    },
    {
        "id": "4fe352e23fb78dd6",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "d1f8acc1f2da7605",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "tryagain",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 690,
        "y": 2500,
        "wires": []
    },
    {
        "id": "4d1f86e9765deba0",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "d1f8acc1f2da7605",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 2500,
        "wires": [
            [
                "fede16ef32dbdc30"
            ]
        ]
    },
    {
        "id": "051927d7bbd19f4e",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "d1f8acc1f2da7605",
        "name": "  ",
        "func": "msg.payload = \"2,\"+flow.get(\"RelayIoTBW\")[0]+\",8,\"+String(flow.get(\"RelayIoTBW\")[1]+1+1+1)+\",0#\";\nvar a = flow.get(\"RelayIoTBW\");\na[2] = msg.payload;\nflow.set(\"RelayIoTBW\",a);\nmsg.topic += \"UPDATE `Filter` SET `Stat` = 'Step12' WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 2460,
        "wires": [
            [
                "09d3ae975ed770aa",
                "ecae2bbf1937d8e1"
            ]
        ]
    },
    {
        "id": "fede16ef32dbdc30",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "d1f8acc1f2da7605",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 820,
        "y": 2500,
        "wires": [
            [
                "e133f6f4eaf09945"
            ]
        ]
    },
    {
        "id": "09d3ae975ed770aa",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "d1f8acc1f2da7605",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 930,
        "y": 2460,
        "wires": [
            []
        ]
    },
    {
        "id": "ecae2bbf1937d8e1",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "d1f8acc1f2da7605",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 940,
        "y": 2420,
        "wires": [
            []
        ]
    },
    {
        "id": "e133f6f4eaf09945",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "d1f8acc1f2da7605",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 955,
        "y": 2500,
        "wires": []
    },
    {
        "id": "a3a9067576b570ad",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "d1f8acc1f2da7605",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 1055,
        "y": 2420,
        "wires": []
    },
    {
        "id": "be2f8830cff0ca2d",
        "type": "link in",
        "z": "a63f53a7be972594",
        "g": "8b8a7bb9884e0985",
        "name": "",
        "links": [
            "97c1a9948769a2b7",
            "c796b9d5b8ee6576"
        ],
        "x": 75,
        "y": 2700,
        "wires": [
            [
                "0b956fd0ff3d8cdc"
            ]
        ]
    },
    {
        "id": "0b956fd0ff3d8cdc",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "8b8a7bb9884e0985",
        "name": " ",
        "func": "msg.topic = \"SELECT `Stat` from `Filter` WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nmsg.save = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 2700,
        "wires": [
            [
                "465aef9e063e90bc"
            ]
        ]
    },
    {
        "id": "465aef9e063e90bc",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "8b8a7bb9884e0985",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 290,
        "y": 2700,
        "wires": [
            [
                "0ffccaf0c29efd17"
            ]
        ]
    },
    {
        "id": "0ffccaf0c29efd17",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "8b8a7bb9884e0985",
        "name": " ",
        "func": "var rly = msg.payload[0].Stat;\nmsg.payload = msg.save;\nif(rly == \"Step12\"){\n    // if(msg.payload.split(\",\")[1]==flow.get(\"RelayIoTBW\")[0]&&msg.payload.split(\",\")[2]==\"111\"&&msg.payload.split(\",\")[3]==\"Status\"){\n    //     var arr = [];\n    //     for(i=1;i<msg.payload.split(\"Status\")[1].split(\",\").length;i++){\n    //         arr.push(parseInt(msg.payload.split(\"Status\")[1].split(\",\")[i]));\n    //     }\n    //     if(arr[flow.get(\"RelayIoTBW\")[1]+1+1]){//RELAYPOMPA\n    //       msg.payload = flow.get(\"RelayIoTBW\")[2];\n    //       msg.tryagain = true;\n    //     }else{\n    //         msg.tryagain = false;\n    //     }\n    // }\n    // msg.undefine = false;\n    msg.undefine = false;\n    msg.tryagain = false;\n}else{\n    msg.undefine = true;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 2700,
        "wires": [
            [
                "7b35b95c2c6a445c"
            ]
        ]
    },
    {
        "id": "7b35b95c2c6a445c",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "8b8a7bb9884e0985",
        "name": " ",
        "property": "undefine",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 550,
        "y": 2700,
        "wires": [
            [
                "b5d9c8fe103cb0b1",
                "0be2b4476624de8c",
                "df372b410cc4dee3"
            ]
        ]
    },
    {
        "id": "b5d9c8fe103cb0b1",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "8b8a7bb9884e0985",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 2700,
        "wires": [
            [
                "c3aaacfa68073727"
            ]
        ]
    },
    {
        "id": "0be2b4476624de8c",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "8b8a7bb9884e0985",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "tryagain",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 690,
        "y": 2740,
        "wires": []
    },
    {
        "id": "df372b410cc4dee3",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "8b8a7bb9884e0985",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 2740,
        "wires": [
            [
                "be665b4434cb319c"
            ]
        ]
    },
    {
        "id": "c3aaacfa68073727",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "8b8a7bb9884e0985",
        "name": "  ",
        "func": "msg.payload = \"2,\"+flow.get(\"RelayIoTBW\")[0]+\",8,\"+String(24)+\",0#\";\nvar a = flow.get(\"RelayIoTBW\");\na[2] = msg.payload;\nflow.set(\"RelayIoTBW\",a);\nmsg.topic += \"UPDATE `Filter` SET `Stat` = 'Step13' WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 2700,
        "wires": [
            [
                "32349f470b5f5353",
                "75c8647845084af0"
            ]
        ]
    },
    {
        "id": "be665b4434cb319c",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "8b8a7bb9884e0985",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 820,
        "y": 2740,
        "wires": [
            [
                "2212829fa768b5b2"
            ]
        ]
    },
    {
        "id": "32349f470b5f5353",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "8b8a7bb9884e0985",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 930,
        "y": 2700,
        "wires": [
            []
        ]
    },
    {
        "id": "2212829fa768b5b2",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "8b8a7bb9884e0985",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 955,
        "y": 2740,
        "wires": []
    },
    {
        "id": "75c8647845084af0",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "8b8a7bb9884e0985",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 1055,
        "y": 2660,
        "wires": []
    },
    {
        "id": "596f3ec4c65e1fd8",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "d2aa1f61fe4d5244",
        "name": " ",
        "func": "msg.topic = \"SELECT `Stat` from `Filter` WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nmsg.save = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 2860,
        "wires": [
            [
                "fd3a8e2f0e169f68"
            ]
        ]
    },
    {
        "id": "7e31d326d47f8e81",
        "type": "link in",
        "z": "a63f53a7be972594",
        "g": "d2aa1f61fe4d5244",
        "name": "",
        "links": [
            "c3637832d742c256",
            "b54d7fea300de991"
        ],
        "x": 75,
        "y": 2860,
        "wires": [
            [
                "596f3ec4c65e1fd8"
            ]
        ]
    },
    {
        "id": "fd3a8e2f0e169f68",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "d2aa1f61fe4d5244",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 290,
        "y": 2860,
        "wires": [
            [
                "7580faba7d1d413f"
            ]
        ]
    },
    {
        "id": "7580faba7d1d413f",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "d2aa1f61fe4d5244",
        "name": " ",
        "func": "var rly = msg.payload[0].Stat;\nmsg.payload = msg.save;\nif(rly == \"Step13\"){\n    if(msg.payload.split(\",\")[1]==flow.get(\"RelayIoTBW\")[0]&&msg.payload.split(\",\")[2]==\"111\"&&msg.payload.split(\",\")[3]==\"Status\"){\n        var arr = [];\n        for(i=1;i<msg.payload.split(\"Status\")[1].split(\",\").length;i++){\n            arr.push(parseInt(msg.payload.split(\"Status\")[1].split(\",\")[i]));\n        }\n        if(arr[23]){\n           msg.payload = flow.get(\"RelayIoTBW\")[2];\n           msg.tryagain = true;\n        }else{\n            msg.tryagain = false;\n        }\n    }\n    msg.undefine = false;\n}else{\n    msg.undefine = true;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 2860,
        "wires": [
            [
                "3fc2d8b1d6a949cb"
            ]
        ]
    },
    {
        "id": "3fc2d8b1d6a949cb",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "d2aa1f61fe4d5244",
        "name": " ",
        "property": "undefine",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 550,
        "y": 2860,
        "wires": [
            [
                "18e107b3614ada95",
                "4709f8c4e9aa2da5",
                "c3762e6b2b2fa7d1"
            ]
        ]
    },
    {
        "id": "18e107b3614ada95",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "d2aa1f61fe4d5244",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 2860,
        "wires": [
            [
                "a32eb1b07913ad72"
            ]
        ]
    },
    {
        "id": "4709f8c4e9aa2da5",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "d2aa1f61fe4d5244",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "tryagain",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 690,
        "y": 2900,
        "wires": []
    },
    {
        "id": "c3762e6b2b2fa7d1",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "d2aa1f61fe4d5244",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 2900,
        "wires": [
            [
                "b6080f63ef0aac5f"
            ]
        ]
    },
    {
        "id": "a32eb1b07913ad72",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "d2aa1f61fe4d5244",
        "name": "  ",
        "func": "msg.payload = \"2,\"+flow.get(\"RelayIoTBW\")[0]+\",8,\"+String(flow.get(\"RelayIoTBW\")[1]+1+1+1+1)+\",0#\";\nvar a = flow.get(\"RelayIoTBW\");\na[2] = msg.payload;\nflow.set(\"RelayIoTBW\",a);\nmsg.topic += \"UPDATE `Filter` SET `Stat` = 'Step14' WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 2860,
        "wires": [
            [
                "a7601ce6d385b972",
                "0ead4639118c12fa"
            ]
        ]
    },
    {
        "id": "b6080f63ef0aac5f",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "d2aa1f61fe4d5244",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 820,
        "y": 2900,
        "wires": [
            [
                "1976d81e8279c6ad"
            ]
        ]
    },
    {
        "id": "a7601ce6d385b972",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "d2aa1f61fe4d5244",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 930,
        "y": 2860,
        "wires": [
            []
        ]
    },
    {
        "id": "1976d81e8279c6ad",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "d2aa1f61fe4d5244",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 955,
        "y": 2900,
        "wires": []
    },
    {
        "id": "3cbdef5105cac94e",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "83b75805d0f3c72d",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 1250,
        "y": 2100,
        "wires": [
            []
        ]
    },
    {
        "id": "f8db57485195229c",
        "type": "link in",
        "z": "a63f53a7be972594",
        "g": "9adcfdc585e41095",
        "name": "NextQ",
        "links": [
            "971a5b6fe38eb374"
        ],
        "x": 395,
        "y": 60,
        "wires": [
            [
                "3dc491bd664d7a02"
            ]
        ]
    },
    {
        "id": "3dc491bd664d7a02",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "9adcfdc585e41095",
        "name": " ",
        "func": "msg.topic = \"select `Filter` from `queue` order by `epo` asc;\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 60,
        "wires": [
            [
                "8a4fdc931865d347"
            ]
        ]
    },
    {
        "id": "90a9969ac22c4f11",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,8,1,1#",
        "payloadType": "str",
        "x": 1390,
        "y": 420,
        "wires": [
            [
                "7a3a0e799d72f6cc"
            ]
        ]
    },
    {
        "id": "4d86239a344f6642",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,8,2,1#",
        "payloadType": "str",
        "x": 1390,
        "y": 460,
        "wires": [
            [
                "7a3a0e799d72f6cc"
            ]
        ]
    },
    {
        "id": "c6835715a3549fd8",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,8,24,0#",
        "payloadType": "str",
        "x": 1400,
        "y": 500,
        "wires": [
            [
                "7a3a0e799d72f6cc"
            ]
        ]
    },
    {
        "id": "6483d7c6ec193b01",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,8,23,0#",
        "payloadType": "str",
        "x": 1410,
        "y": 540,
        "wires": [
            [
                "7a3a0e799d72f6cc"
            ]
        ]
    },
    {
        "id": "b8ef7e9fdf14729c",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,8,5,0#",
        "payloadType": "str",
        "x": 1410,
        "y": 580,
        "wires": [
            [
                "7a3a0e799d72f6cc"
            ]
        ]
    },
    {
        "id": "7a3a0e799d72f6cc",
        "type": "link out",
        "z": "a63f53a7be972594",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 1515,
        "y": 500,
        "wires": []
    },
    {
        "id": "c4be29d122c35a0d",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "a3a55e80ba5387bb",
        "name": "debug 36",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1120,
        "y": 200,
        "wires": []
    },
    {
        "id": "78222dca5a16ea0f",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "b124282fa98cc73f",
        "name": " ",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,111,Status,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0",
        "payloadType": "str",
        "x": 130,
        "y": 620,
        "wires": [
            [
                "df296515c457c412"
            ]
        ]
    },
    {
        "id": "df296515c457c412",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "b124282fa98cc73f",
        "name": "link out 3",
        "mode": "link",
        "links": [
            "e506d6cf472bf772"
        ],
        "x": 245,
        "y": 620,
        "wires": []
    },
    {
        "id": "788bc1190f6f2f3d",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "f270249d1bfc5626",
        "name": "Sensor Low Triggered 1",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "3,301,111,1381888",
        "payloadType": "str",
        "x": 190,
        "y": 760,
        "wires": [
            [
                "571372163a76144e"
            ]
        ]
    },
    {
        "id": "571372163a76144e",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "f270249d1bfc5626",
        "name": "link out 4",
        "mode": "link",
        "links": [
            "78fb9c9c8ff61838"
        ],
        "x": 335,
        "y": 760,
        "wires": []
    },
    {
        "id": "75e6361cb4cffcfe",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "baa0dfffeddaf8a8",
        "name": " ",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,111,Status,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0",
        "payloadType": "str",
        "x": 130,
        "y": 940,
        "wires": [
            [
                "2927b01e0b0781d7"
            ]
        ]
    },
    {
        "id": "2927b01e0b0781d7",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "baa0dfffeddaf8a8",
        "name": "link out 5",
        "mode": "link",
        "links": [
            "623a17b07e07e919",
            "4095bce8540602c7"
        ],
        "x": 225,
        "y": 940,
        "wires": []
    },
    {
        "id": "bc292c78793b2ad8",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "c490e77c6eb38296",
        "name": " ",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,111,Status,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0",
        "payloadType": "str",
        "x": 130,
        "y": 1120,
        "wires": [
            [
                "ee0f12b0015372d7"
            ]
        ]
    },
    {
        "id": "ee0f12b0015372d7",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "c490e77c6eb38296",
        "name": "link out 6",
        "mode": "link",
        "links": [
            "ed0217f860e6bdba"
        ],
        "x": 225,
        "y": 1120,
        "wires": []
    },
    {
        "id": "687095a428762d87",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "5b945b0b6fdd6972",
        "name": " ",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,111,Status,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0",
        "payloadType": "str",
        "x": 130,
        "y": 1320,
        "wires": [
            [
                "2e620f7990ee8db4"
            ]
        ]
    },
    {
        "id": "2e620f7990ee8db4",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "5b945b0b6fdd6972",
        "name": "link out 7",
        "mode": "link",
        "links": [
            "06b73d1281ac206e"
        ],
        "x": 215,
        "y": 1320,
        "wires": []
    },
    {
        "id": "e2bc16573e20a593",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "5b945b0b6fdd6972",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 1145,
        "y": 1240,
        "wires": []
    },
    {
        "id": "55bade0cabe7f5f2",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "name": " ",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,111,Status,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0",
        "payloadType": "str",
        "x": 130,
        "y": 1560,
        "wires": [
            [
                "baf73d71280f9b72"
            ]
        ]
    },
    {
        "id": "baf73d71280f9b72",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "name": "link out 8",
        "mode": "link",
        "links": [
            "2c2509d634cf7d18"
        ],
        "x": 215,
        "y": 1560,
        "wires": []
    },
    {
        "id": "a0869667171e7473",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "name": "",
        "pauseType": "delay",
        "timeout": "20",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 820,
        "y": 1520,
        "wires": [
            [
                "60ba1b5302a550d3"
            ]
        ]
    },
    {
        "id": "dcdf019c5fe83c4b",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "name": "Skip",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "reset",
                "v": "",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 690,
        "y": 1520,
        "wires": [
            [
                "a0869667171e7473",
                "60ba1b5302a550d3"
            ]
        ]
    },
    {
        "id": "46de081689f18e35",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "ec47342fc5a3f52d",
        "name": " ",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,111,Status,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0",
        "payloadType": "str",
        "x": 130,
        "y": 1760,
        "wires": [
            [
                "17aafc4f5a71ee7b"
            ]
        ]
    },
    {
        "id": "17aafc4f5a71ee7b",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "ec47342fc5a3f52d",
        "name": "link out 9",
        "mode": "link",
        "links": [
            "0948e19c51d2036a"
        ],
        "x": 215,
        "y": 1760,
        "wires": []
    },
    {
        "id": "8cc7e82560d67746",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "ec47342fc5a3f52d",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 1045,
        "y": 1680,
        "wires": []
    },
    {
        "id": "0ede015f3ee89585",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "05112cacbdf51daa",
        "name": " ",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,111,Status,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1",
        "payloadType": "str",
        "x": 130,
        "y": 1960,
        "wires": [
            [
                "a0675c154ea3b039"
            ]
        ]
    },
    {
        "id": "a0675c154ea3b039",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "05112cacbdf51daa",
        "name": "link out 10",
        "mode": "link",
        "links": [
            "9d89cff6a435b242"
        ],
        "x": 215,
        "y": 1960,
        "wires": []
    },
    {
        "id": "3910541bb7483821",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "name": " ",
        "func": "msg.topic = \"select `Duration` from `devicemap` where `ket` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 1480,
        "wires": [
            [
                "aed4205843ef8cdd"
            ]
        ]
    },
    {
        "id": "aed4205843ef8cdd",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 930,
        "y": 1480,
        "wires": [
            [
                "57f0cfccf5542f1b"
            ]
        ]
    },
    {
        "id": "57f0cfccf5542f1b",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "name": " ",
        "func": "msg.delay = msg.payload[3].Duration*1000;\nflow.set(\"durasiblow\",[Date.now(),msg.delay]);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1110,
        "y": 1440,
        "wires": [
            [
                "a47d9457d9383e7b",
                "18983da46f2dba3f"
            ]
        ]
    },
    {
        "id": "a47d9457d9383e7b",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "name": "",
        "pauseType": "delayv",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1240,
        "y": 1440,
        "wires": [
            [
                "5319510036bdb3d8",
                "18983da46f2dba3f"
            ]
        ]
    },
    {
        "id": "5319510036bdb3d8",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "name": "link out 11",
        "mode": "link",
        "links": [
            "d0a0ffe0b18bcc52"
        ],
        "x": 1335,
        "y": 1440,
        "wires": []
    },
    {
        "id": "92d199e0a048e5bf",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "name": " ",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "reset",
                "v": "yes",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1090,
        "y": 1420,
        "wires": [
            [
                "a47d9457d9383e7b",
                "5319510036bdb3d8"
            ]
        ]
    },
    {
        "id": "c787536f84c0701c",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "df5b46af941d4f93",
        "name": " ",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,111,Status,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1",
        "payloadType": "str",
        "x": 130,
        "y": 2320,
        "wires": [
            [
                "e3b5a135fb45be89"
            ]
        ]
    },
    {
        "id": "e3b5a135fb45be89",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "df5b46af941d4f93",
        "name": "link out 12",
        "mode": "link",
        "links": [
            "c04d38edf8b113ed"
        ],
        "x": 225,
        "y": 2320,
        "wires": []
    },
    {
        "id": "212cc3835e81d3ac",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "d1f8acc1f2da7605",
        "name": " ",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,111,Status,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1",
        "payloadType": "str",
        "x": 130,
        "y": 2500,
        "wires": [
            [
                "515f4ab43662d5aa"
            ]
        ]
    },
    {
        "id": "515f4ab43662d5aa",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "d1f8acc1f2da7605",
        "name": "link out 13",
        "mode": "link",
        "links": [
            "8fd49bc7c4e91a5b"
        ],
        "x": 215,
        "y": 2500,
        "wires": []
    },
    {
        "id": "904ca4df476f362e",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "05112cacbdf51daa",
        "name": " ",
        "func": "msg.topic = \"select `Duration` from `devicemap` where `ket` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 1880,
        "wires": [
            [
                "93b2c039bca915fc"
            ]
        ]
    },
    {
        "id": "93b2c039bca915fc",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "05112cacbdf51daa",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 950,
        "y": 1880,
        "wires": [
            [
                "0dfc31d5f1741449",
                "21d48829227dea19"
            ]
        ]
    },
    {
        "id": "0dfc31d5f1741449",
        "type": "function",
        "z": "a63f53a7be972594",
        "name": " ",
        "func": "msg.delay = msg.payload[4].Duration*1000;\nflow.set(\"durasibw\",[Date.now(),msg.delay]);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 1880,
        "wires": [
            [
                "54073ed9e7865004"
            ]
        ]
    },
    {
        "id": "54073ed9e7865004",
        "type": "delay",
        "z": "a63f53a7be972594",
        "name": "",
        "pauseType": "delayv",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1220,
        "y": 1880,
        "wires": [
            [
                "c796b9d5b8ee6576"
            ]
        ]
    },
    {
        "id": "c796b9d5b8ee6576",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "05112cacbdf51daa",
        "name": "",
        "mode": "link",
        "links": [
            "be2f8830cff0ca2d"
        ],
        "x": 1325,
        "y": 1880,
        "wires": []
    },
    {
        "id": "d5cb2b60380a6b77",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "05112cacbdf51daa",
        "name": " ",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "reset",
                "v": "yes",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1090,
        "y": 1840,
        "wires": [
            [
                "54073ed9e7865004"
            ]
        ]
    },
    {
        "id": "ba9be6e35ee5ce05",
        "type": "comment",
        "z": "a63f53a7be972594",
        "g": "8b8a7bb9884e0985",
        "name": "Sudah Waktunya Pompa BW Mati",
        "info": "",
        "x": 220,
        "y": 2660,
        "wires": []
    },
    {
        "id": "a43249b990953226",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "d2aa1f61fe4d5244",
        "name": " ",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,111,Status,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0",
        "payloadType": "str",
        "x": 130,
        "y": 2900,
        "wires": [
            [
                "b54d7fea300de991"
            ]
        ]
    },
    {
        "id": "b54d7fea300de991",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "d2aa1f61fe4d5244",
        "name": "link out 15",
        "mode": "link",
        "links": [
            "7e31d326d47f8e81"
        ],
        "x": 215,
        "y": 2900,
        "wires": []
    },
    {
        "id": "60c7f5b9b39a5da5",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "045f44abb9ef82dd",
        "name": " ",
        "func": "msg.topic = \"SELECT `Stat` from `Filter` WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nmsg.save = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 3020,
        "wires": [
            [
                "17f918b09c2f5d92"
            ]
        ]
    },
    {
        "id": "e8b5c92fcdb67c9a",
        "type": "link in",
        "z": "a63f53a7be972594",
        "g": "045f44abb9ef82dd",
        "name": "",
        "links": [
            "c3637832d742c256",
            "998bbd04e15ea2ce"
        ],
        "x": 75,
        "y": 3020,
        "wires": [
            [
                "60c7f5b9b39a5da5"
            ]
        ]
    },
    {
        "id": "17f918b09c2f5d92",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "045f44abb9ef82dd",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 290,
        "y": 3020,
        "wires": [
            [
                "566743fb0ff46ae7"
            ]
        ]
    },
    {
        "id": "566743fb0ff46ae7",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "045f44abb9ef82dd",
        "name": " ",
        "func": "var rly = msg.payload[0].Stat;\nmsg.payload = msg.save;\nif(rly == \"Step14\"){\n    if(msg.payload.split(\",\")[1]==flow.get(\"RelayIoTBW\")[0]&&msg.payload.split(\",\")[2]==\"111\"&&msg.payload.split(\",\")[3]==\"Status\"){\n        var arr = [];\n        for(i=1;i<msg.payload.split(\"Status\")[1].split(\",\").length;i++){\n            arr.push(parseInt(msg.payload.split(\"Status\")[1].split(\",\")[i]));\n        }\n        if(arr[flow.get(\"RelayIoTBW\")[1]+1+1+1]){\n           msg.payload = flow.get(\"RelayIoTBW\")[2];\n           msg.tryagain = true;\n        }else{\n            msg.tryagain = false;\n        }\n    }\n    msg.undefine = false;\n}else{\n    msg.undefine = true;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 3020,
        "wires": [
            [
                "ca7fc9e3567c36d6"
            ]
        ]
    },
    {
        "id": "ca7fc9e3567c36d6",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "045f44abb9ef82dd",
        "name": " ",
        "property": "undefine",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 550,
        "y": 3020,
        "wires": [
            [
                "cb2d0ae14928b874",
                "fecb0f433de15d69",
                "8a7c8bd759aa8261"
            ]
        ]
    },
    {
        "id": "cb2d0ae14928b874",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "045f44abb9ef82dd",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 3020,
        "wires": [
            [
                "2e57636c9cb3bb7f"
            ]
        ]
    },
    {
        "id": "fecb0f433de15d69",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "045f44abb9ef82dd",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "tryagain",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 690,
        "y": 3060,
        "wires": []
    },
    {
        "id": "8a7c8bd759aa8261",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "045f44abb9ef82dd",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 3060,
        "wires": [
            [
                "3404e2059669d615"
            ]
        ]
    },
    {
        "id": "2e57636c9cb3bb7f",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "045f44abb9ef82dd",
        "name": "  ",
        "func": "msg.payload = \"2,\"+flow.get(\"RelayIoTBW\")[0]+\",8,\"+String(flow.get(\"RelayIoTBW\")[1]+1+1)+\",0#\";\nvar a = flow.get(\"RelayIoTBW\");\na[2] = msg.payload;\nflow.set(\"RelayIoTBW\",a);\nmsg.topic += \"UPDATE `Filter` SET `Stat` = 'Step15' WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 3020,
        "wires": [
            [
                "8622ec848adf26c7",
                "82b3829be4cd1488"
            ]
        ]
    },
    {
        "id": "3404e2059669d615",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "045f44abb9ef82dd",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 820,
        "y": 3060,
        "wires": [
            [
                "4b41db5006ce5c4e"
            ]
        ]
    },
    {
        "id": "8622ec848adf26c7",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "045f44abb9ef82dd",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 930,
        "y": 3020,
        "wires": [
            []
        ]
    },
    {
        "id": "4b41db5006ce5c4e",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "045f44abb9ef82dd",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 955,
        "y": 3060,
        "wires": []
    },
    {
        "id": "e9f96ad780d54702",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "045f44abb9ef82dd",
        "name": " ",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,111,Status,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0",
        "payloadType": "str",
        "x": 130,
        "y": 3060,
        "wires": [
            [
                "998bbd04e15ea2ce"
            ]
        ]
    },
    {
        "id": "998bbd04e15ea2ce",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "045f44abb9ef82dd",
        "name": "link out 16",
        "mode": "link",
        "links": [
            "e8b5c92fcdb67c9a"
        ],
        "x": 215,
        "y": 3060,
        "wires": []
    },
    {
        "id": "f596ded06a1be5e9",
        "type": "comment",
        "z": "a63f53a7be972594",
        "g": "df5b46af941d4f93",
        "name": "Pompa mati",
        "info": "",
        "x": 150,
        "y": 2240,
        "wires": []
    },
    {
        "id": "d0c05ddafda5b3dd",
        "type": "comment",
        "z": "a63f53a7be972594",
        "g": "d1f8acc1f2da7605",
        "name": "Valve Tertutup",
        "info": "",
        "x": 170,
        "y": 2420,
        "wires": []
    },
    {
        "id": "0d3776a6b2c6b802",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "40a366e33efceef9",
        "name": " ",
        "func": "msg.topic = \"SELECT `Stat` from `Filter` WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nmsg.save = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 3160,
        "wires": [
            [
                "da671d18ff1d96b9"
            ]
        ]
    },
    {
        "id": "180e8f781567e4fa",
        "type": "link in",
        "z": "a63f53a7be972594",
        "g": "40a366e33efceef9",
        "name": "",
        "links": [
            "c3637832d742c256",
            "9a1751b3a6a58c8e"
        ],
        "x": 75,
        "y": 3160,
        "wires": [
            [
                "0d3776a6b2c6b802"
            ]
        ]
    },
    {
        "id": "da671d18ff1d96b9",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "40a366e33efceef9",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 290,
        "y": 3160,
        "wires": [
            [
                "1d303497e5ae13aa"
            ]
        ]
    },
    {
        "id": "1d303497e5ae13aa",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "40a366e33efceef9",
        "name": " ",
        "func": "var rly = msg.payload[0].Stat;\nmsg.payload = msg.save;\nif(rly == \"Step15\"){\n    if(msg.payload.split(\",\")[1]==flow.get(\"RelayIoTBW\")[0]&&msg.payload.split(\",\")[2]==\"111\"&&msg.payload.split(\",\")[3]==\"Status\"){\n        var arr = [];\n        for(i=1;i<msg.payload.split(\"Status\")[1].split(\",\").length;i++){\n            arr.push(parseInt(msg.payload.split(\"Status\")[1].split(\",\")[i]));\n        }\n        if(arr[flow.get(\"RelayIoTBW\")[1]+1+1]){\n           msg.payload = flow.get(\"RelayIoTBW\")[2];\n           msg.tryagain = true;\n        }else{\n            msg.tryagain = false;\n        }\n    }\n    msg.undefine = false;\n}else{\n    msg.undefine = true;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 3160,
        "wires": [
            [
                "f011995abfa69849"
            ]
        ]
    },
    {
        "id": "f011995abfa69849",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "40a366e33efceef9",
        "name": " ",
        "property": "undefine",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 550,
        "y": 3160,
        "wires": [
            [
                "e8d04dd53e05cd23",
                "f63a16487a5b3119",
                "7e09476836e4a03d"
            ]
        ]
    },
    {
        "id": "e8d04dd53e05cd23",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "40a366e33efceef9",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 3160,
        "wires": [
            [
                "16da9dab7a85130d"
            ]
        ]
    },
    {
        "id": "f63a16487a5b3119",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "40a366e33efceef9",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "tryagain",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 690,
        "y": 3200,
        "wires": []
    },
    {
        "id": "7e09476836e4a03d",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "40a366e33efceef9",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 3200,
        "wires": [
            [
                "087b3a12ccf4de35"
            ]
        ]
    },
    {
        "id": "16da9dab7a85130d",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "40a366e33efceef9",
        "name": "  ",
        "func": "msg.payload = \"2,\"+flow.get(\"RelayIoTBW\")[0]+\",8,\"+String(flow.get(\"RelayIoTBW\")[1])+\",1#\";\nvar a = flow.get(\"RelayIoTBW\");\na[2] = msg.payload;\nflow.set(\"RelayIoTBW\",a);\nmsg.topic += \"UPDATE `Filter` SET `Stat` = 'Step16' WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 3160,
        "wires": [
            [
                "55864fa0f1f8b2bc",
                "a0ede2091051b198"
            ]
        ]
    },
    {
        "id": "087b3a12ccf4de35",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "40a366e33efceef9",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 820,
        "y": 3200,
        "wires": [
            [
                "ee8c25a37c7f0bf5"
            ]
        ]
    },
    {
        "id": "55864fa0f1f8b2bc",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "40a366e33efceef9",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 930,
        "y": 3160,
        "wires": [
            []
        ]
    },
    {
        "id": "ee8c25a37c7f0bf5",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "40a366e33efceef9",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 955,
        "y": 3200,
        "wires": []
    },
    {
        "id": "2162a4f7e48ba37a",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "40a366e33efceef9",
        "name": " ",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,111,Status,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0",
        "payloadType": "str",
        "x": 130,
        "y": 3200,
        "wires": [
            [
                "9a1751b3a6a58c8e"
            ]
        ]
    },
    {
        "id": "9a1751b3a6a58c8e",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "40a366e33efceef9",
        "name": "link out 17",
        "mode": "link",
        "links": [
            "180e8f781567e4fa"
        ],
        "x": 215,
        "y": 3200,
        "wires": []
    },
    {
        "id": "350ed8d08e9eecd1",
        "type": "link in",
        "z": "a63f53a7be972594",
        "g": "80303bac25cb61c4",
        "name": "",
        "links": [
            "c3637832d742c256",
            "706272fc71bb10cc",
            "21ecc1830509d47c",
            "e3945f723db0f896"
        ],
        "x": 75,
        "y": 3440,
        "wires": [
            [
                "e63969f16f7a50be"
            ]
        ]
    },
    {
        "id": "ddcceca0ea97e95a",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "80303bac25cb61c4",
        "name": " ",
        "func": "var rly = msg.payload[0].Stat;\nmsg.payload = msg.save;\nif(rly == \"Step17\"){\n    var d = reverseString(dTb(msg.payload.split(\",\")[3]));\n    while(d.length<24){\n        d+=\"0\";\n    }\n    d = reverseString(reverseString(d).substring(0,16));\n    msg.stat = d;\n    var json = {};\n    for (let i = 0; i < 8; i++) {\n      const filterIndex = i + 1;\n      const startIndex = i * 2;\n      \n      json[`Filter${filterIndex}H`] = d[startIndex];\n      json[`Filter${filterIndex}L`] = d[startIndex + 1];\n    }\n    msg.payload = json;\n    msg.filter = json;\n    msg.topic = \"select `Filter` from `queue`;\";\n    if(msg.payload[flow.get(\"RelayIoTBW\")[3]+\"H\"]== \"1\"){\n        msg.pass = true;\n    }else{\n        msg.pass = false;\n    }\n    msg.undefine = false;\n}else{\n    msg.undefine = true;\n}\nreturn msg;\n\nfunction dTb(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  return binary;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}\n\nfunction reverseString(str) {\n  let reversed = '';\n  for (let i = str.length - 1; i >= 0; i--) {\n    reversed += str[i];\n  }\n  return reversed;\n}\n\nfunction ieo(number) {\n  if (number % 2 === 0) {\n    return true;\n  } else {\n    return false;\n  }\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 3440,
        "wires": [
            [
                "131b34fa5b4543b7"
            ]
        ]
    },
    {
        "id": "131b34fa5b4543b7",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "80303bac25cb61c4",
        "name": " ",
        "property": "pass",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 3440,
        "wires": [
            [
                "637cecf4884e6af7"
            ]
        ]
    },
    {
        "id": "637cecf4884e6af7",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "80303bac25cb61c4",
        "name": " ",
        "func": "msg.payload = \"2,\"+flow.get(\"RelayIoTBW\")[0]+\",8,\"+String(flow.get(\"RelayIoTBW\")[1]+1)+\",1#\";\nvar a = flow.get(\"RelayIoTBW\");\na[2] = msg.payload;\nflow.set(\"RelayIoTBW\",a);\nmsg.topic += \"UPDATE `Filter` SET `Stat` = 'Step18' WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 3440,
        "wires": [
            [
                "ab038ba901a29bb0",
                "326125f0e095df12"
            ]
        ]
    },
    {
        "id": "ab038ba901a29bb0",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "80303bac25cb61c4",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 810,
        "y": 3440,
        "wires": [
            []
        ]
    },
    {
        "id": "326125f0e095df12",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "80303bac25cb61c4",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 785,
        "y": 3480,
        "wires": []
    },
    {
        "id": "ca745e045d7e14d8",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "80303bac25cb61c4",
        "name": "Sensor High Triggered 1",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "3,301,111,1381632",
        "payloadType": "str",
        "x": 190,
        "y": 3480,
        "wires": [
            [
                "706272fc71bb10cc"
            ]
        ]
    },
    {
        "id": "706272fc71bb10cc",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "80303bac25cb61c4",
        "name": "link out 18",
        "mode": "link",
        "links": [
            "350ed8d08e9eecd1"
        ],
        "x": 335,
        "y": 3480,
        "wires": []
    },
    {
        "id": "45de5a4b136abc1c",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "1a972a1d81c536ec",
        "name": " ",
        "func": "msg.topic = \"SELECT `Stat` from `Filter` WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nmsg.save = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 3300,
        "wires": [
            [
                "6de8c99d3cd16c4f"
            ]
        ]
    },
    {
        "id": "e9e027804cf3c7ef",
        "type": "link in",
        "z": "a63f53a7be972594",
        "g": "1a972a1d81c536ec",
        "name": "",
        "links": [
            "c3637832d742c256",
            "bbc08647449c1e12"
        ],
        "x": 75,
        "y": 3300,
        "wires": [
            [
                "45de5a4b136abc1c"
            ]
        ]
    },
    {
        "id": "6de8c99d3cd16c4f",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "1a972a1d81c536ec",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 290,
        "y": 3300,
        "wires": [
            [
                "710a9e02e0e7bb2c"
            ]
        ]
    },
    {
        "id": "710a9e02e0e7bb2c",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "1a972a1d81c536ec",
        "name": " ",
        "func": "var rly = msg.payload[0].Stat;\nmsg.payload = msg.save;\nif(rly == \"Step16\"){\n    if(msg.payload.split(\",\")[1]==flow.get(\"RelayIoTBW\")[0]&&msg.payload.split(\",\")[2]==\"111\"&&msg.payload.split(\",\")[3]==\"Status\"){\n        var arr = [];\n        for(i=1;i<msg.payload.split(\"Status\")[1].split(\",\").length;i++){\n            arr.push(parseInt(msg.payload.split(\"Status\")[1].split(\",\")[i]));\n        }\n        if(arr[flow.get(\"RelayIoTBW\")[1]]){\n           msg.payload = flow.get(\"RelayIoTBW\")[2];\n           msg.tryagain = true;\n        }else{\n            msg.tryagain = false;\n        }\n    }\n    msg.undefine = false;\n}else{\n    msg.undefine = true;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 3300,
        "wires": [
            [
                "38eb7a569ac1f8b0"
            ]
        ]
    },
    {
        "id": "38eb7a569ac1f8b0",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "1a972a1d81c536ec",
        "name": " ",
        "property": "undefine",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 550,
        "y": 3300,
        "wires": [
            [
                "28951ca70d02793a",
                "8325469bd357734b",
                "3c124da530146221"
            ]
        ]
    },
    {
        "id": "28951ca70d02793a",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "1a972a1d81c536ec",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 3300,
        "wires": [
            [
                "e85831479da89f04"
            ]
        ]
    },
    {
        "id": "8325469bd357734b",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "1a972a1d81c536ec",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "tryagain",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 690,
        "y": 3340,
        "wires": []
    },
    {
        "id": "3c124da530146221",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "1a972a1d81c536ec",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 3340,
        "wires": [
            [
                "97d4e00f9a2fcb13"
            ]
        ]
    },
    {
        "id": "e85831479da89f04",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "1a972a1d81c536ec",
        "name": "  ",
        "func": "msg.payload = \"2,\"+flow.get(\"RelayIoTBW\")[0]+\",8,\"+String(flow.get(\"RelayIoTBW\")[1])+\",1#\";\nvar a = flow.get(\"RelayIoTBW\");\na[2] = msg.payload;\nflow.set(\"RelayIoTBW\",a);\nmsg.topic += \"UPDATE `Filter` SET `Stat` = 'Step17' WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 3300,
        "wires": [
            [
                "2bcc214951ef2985"
            ]
        ]
    },
    {
        "id": "97d4e00f9a2fcb13",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "1a972a1d81c536ec",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 820,
        "y": 3340,
        "wires": [
            [
                "a5425685c028ab36"
            ]
        ]
    },
    {
        "id": "2bcc214951ef2985",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "1a972a1d81c536ec",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 930,
        "y": 3300,
        "wires": [
            []
        ]
    },
    {
        "id": "a5425685c028ab36",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "1a972a1d81c536ec",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 955,
        "y": 3340,
        "wires": []
    },
    {
        "id": "a4f47bf345e22c00",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "1a972a1d81c536ec",
        "name": " ",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,111,Status,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0",
        "payloadType": "str",
        "x": 130,
        "y": 3340,
        "wires": [
            [
                "bbc08647449c1e12"
            ]
        ]
    },
    {
        "id": "bbc08647449c1e12",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "1a972a1d81c536ec",
        "name": "link out 19",
        "mode": "link",
        "links": [
            "e9e027804cf3c7ef"
        ],
        "x": 215,
        "y": 3340,
        "wires": []
    },
    {
        "id": "49beb2a85d35f34b",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "d2aa1f61fe4d5244",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 1045,
        "y": 2820,
        "wires": []
    },
    {
        "id": "82b3829be4cd1488",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "045f44abb9ef82dd",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 1015,
        "y": 3020,
        "wires": []
    },
    {
        "id": "a0ede2091051b198",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "40a366e33efceef9",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 1015,
        "y": 3160,
        "wires": []
    },
    {
        "id": "9ad0d8e1d30cf2ba",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 290,
        "y": 3440,
        "wires": [
            [
                "ddcceca0ea97e95a"
            ]
        ]
    },
    {
        "id": "e63969f16f7a50be",
        "type": "function",
        "z": "a63f53a7be972594",
        "name": " ",
        "func": "msg.topic = \"SELECT `Stat` from `Filter` WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nmsg.save = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 3440,
        "wires": [
            [
                "9ad0d8e1d30cf2ba"
            ]
        ]
    },
    {
        "id": "eff5ae07ce88958b",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "26b786e002320c0f",
        "name": " ",
        "func": "msg.topic = \"SELECT `Stat` from `Filter` WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nmsg.save = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 3600,
        "wires": [
            [
                "46fea17e2490be45"
            ]
        ]
    },
    {
        "id": "4be55e6e7a54e573",
        "type": "link in",
        "z": "a63f53a7be972594",
        "g": "26b786e002320c0f",
        "name": "",
        "links": [
            "c3637832d742c256",
            "ca4763302919d162"
        ],
        "x": 75,
        "y": 3600,
        "wires": [
            [
                "eff5ae07ce88958b"
            ]
        ]
    },
    {
        "id": "46fea17e2490be45",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "26b786e002320c0f",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 290,
        "y": 3600,
        "wires": [
            [
                "22bba1893f212191"
            ]
        ]
    },
    {
        "id": "22bba1893f212191",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "26b786e002320c0f",
        "name": " ",
        "func": "var rly = msg.payload[0].Stat;\nmsg.payload = msg.save;\nif(rly == \"Step18\"){\n    if(msg.payload.split(\",\")[1]==flow.get(\"RelayIoTBW\")[0]&&msg.payload.split(\",\")[2]==\"111\"&&msg.payload.split(\",\")[3]==\"Status\"){\n        var arr = [];\n        for(i=1;i<msg.payload.split(\"Status\")[1].split(\",\").length;i++){\n            arr.push(parseInt(msg.payload.split(\"Status\")[1].split(\",\")[i]));\n        }\n        if(arr[flow.get(\"RelayIoTBW\")[1]+1]){\n           msg.payload = flow.get(\"RelayIoTBW\")[2];\n           msg.tryagain = true;\n        }else{\n            msg.tryagain = false;\n        }\n    }\n    msg.undefine = false;\n}else{\n    msg.undefine = true;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 3600,
        "wires": [
            [
                "9d6e4b0c9b584046"
            ]
        ]
    },
    {
        "id": "9d6e4b0c9b584046",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "26b786e002320c0f",
        "name": " ",
        "property": "undefine",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 550,
        "y": 3600,
        "wires": [
            [
                "ffeb9d5e58d6238b",
                "3d274aab341783d1",
                "93ca5ab46e222c1a"
            ]
        ]
    },
    {
        "id": "ffeb9d5e58d6238b",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "26b786e002320c0f",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 3600,
        "wires": [
            [
                "5ea4a3628527103d"
            ]
        ]
    },
    {
        "id": "3d274aab341783d1",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "26b786e002320c0f",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "tryagain",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 690,
        "y": 3640,
        "wires": []
    },
    {
        "id": "93ca5ab46e222c1a",
        "type": "switch",
        "z": "a63f53a7be972594",
        "g": "26b786e002320c0f",
        "name": " ",
        "property": "tryagain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 3640,
        "wires": [
            [
                "26ea5b05cd2a734a"
            ]
        ]
    },
    {
        "id": "5ea4a3628527103d",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "26b786e002320c0f",
        "name": "  ",
        "func": "msg.payload = \"2,\"+flow.get(\"RelayIoTBW\")[0]+\",8,\"+String(flow.get(\"RelayIoTBW\")[1])+\",1#\";\nvar a = flow.get(\"RelayIoTBW\");\na[2] = msg.payload;\nflow.set(\"RelayIoTBW\",a);\nmsg.topic += \"UPDATE `Filter` SET `Stat` = 'DONE' WHERE `Filter` = '\"+String(flow.get(\"RelayIoTBW\")[3])+\"';\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 3600,
        "wires": [
            [
                "3d377ce5d021cb3d"
            ]
        ]
    },
    {
        "id": "26ea5b05cd2a734a",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "26b786e002320c0f",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 820,
        "y": 3640,
        "wires": [
            [
                "04081bd142d7df58"
            ]
        ]
    },
    {
        "id": "3d377ce5d021cb3d",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "26b786e002320c0f",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 930,
        "y": 3600,
        "wires": [
            [
                "7c8df2dfa50a6888"
            ]
        ]
    },
    {
        "id": "04081bd142d7df58",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "26b786e002320c0f",
        "name": "",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 955,
        "y": 3640,
        "wires": []
    },
    {
        "id": "afd3053939c9dcf9",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "26b786e002320c0f",
        "name": " ",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,111,Status,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0",
        "payloadType": "str",
        "x": 130,
        "y": 3640,
        "wires": [
            [
                "ca4763302919d162"
            ]
        ]
    },
    {
        "id": "ca4763302919d162",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "26b786e002320c0f",
        "name": "link out 20",
        "mode": "link",
        "links": [
            "4be55e6e7a54e573"
        ],
        "x": 215,
        "y": 3640,
        "wires": []
    },
    {
        "id": "7c8df2dfa50a6888",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "26b786e002320c0f",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1060,
        "y": 3600,
        "wires": [
            [
                "971a5b6fe38eb374"
            ]
        ]
    },
    {
        "id": "971a5b6fe38eb374",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "26b786e002320c0f",
        "name": "link out 21",
        "mode": "link",
        "links": [
            "f8db57485195229c"
        ],
        "x": 1165,
        "y": 3600,
        "wires": []
    },
    {
        "id": "fb49d318a5fddc84",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,8,4,0#",
        "payloadType": "str",
        "x": 1410,
        "y": 620,
        "wires": [
            [
                "7a3a0e799d72f6cc"
            ]
        ]
    },
    {
        "id": "5b231c4ef0e903ce",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,8,3,0#",
        "payloadType": "str",
        "x": 1410,
        "y": 660,
        "wires": [
            [
                "7a3a0e799d72f6cc"
            ]
        ]
    },
    {
        "id": "21d48829227dea19",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "05112cacbdf51daa",
        "name": "debug 37",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 940,
        "y": 2000,
        "wires": []
    },
    {
        "id": "18983da46f2dba3f",
        "type": "debug",
        "z": "a63f53a7be972594",
        "name": "debug 38",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1430,
        "y": 1520,
        "wires": []
    },
    {
        "id": "4bdb03075bb66bd9",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "83b75805d0f3c72d",
        "name": "debug 39",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 240,
        "y": 2140,
        "wires": []
    },
    {
        "id": "7807a0cb80ba74db",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "a3a55e80ba5387bb",
        "name": "debug 40",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1620,
        "y": 140,
        "wires": []
    },
    {
        "id": "44a0f51155aec934",
        "type": "link out",
        "z": "a63f53a7be972594",
        "name": "link out 22",
        "mode": "link",
        "links": [
            "78fb9c9c8ff61838"
        ],
        "x": 965,
        "y": 760,
        "wires": []
    },
    {
        "id": "2e9c4088c524c545",
        "type": "delay",
        "z": "a63f53a7be972594",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 880,
        "y": 740,
        "wires": [
            [
                "f6bc7141a6d85682"
            ]
        ]
    },
    {
        "id": "f6bc7141a6d85682",
        "type": "function",
        "z": "a63f53a7be972594",
        "name": "function 2",
        "func": "msg.payload = \"3,301,111,1381888\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 900,
        "y": 700,
        "wires": [
            [
                "44a0f51155aec934"
            ]
        ]
    },
    {
        "id": "21ecc1830509d47c",
        "type": "link out",
        "z": "a63f53a7be972594",
        "name": "link out 23",
        "mode": "link",
        "links": [
            "350ed8d08e9eecd1"
        ],
        "x": 925,
        "y": 3480,
        "wires": []
    },
    {
        "id": "2454200419f1608c",
        "type": "delay",
        "z": "a63f53a7be972594",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 970,
        "y": 3400,
        "wires": [
            [
                "70a5f135e6e99e0f"
            ]
        ]
    },
    {
        "id": "70a5f135e6e99e0f",
        "type": "function",
        "z": "a63f53a7be972594",
        "name": "function 3",
        "func": "msg.payload = \"3,301,111,1381632\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 3400,
        "wires": [
            [
                "21ecc1830509d47c"
            ]
        ]
    },
    {
        "id": "d7715b3740575733",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "name": " ",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1060,
        "y": 1560,
        "wires": [
            [
                "1cb11765ef7d6e32"
            ]
        ]
    },
    {
        "id": "1cb11765ef7d6e32",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "7651d103a2a5ce02",
        "name": " ",
        "func": "try{\nvar d = flow.get(\"durasiblow\")[0];\nmsg.payload = Math.round((Date.now()-d)/1000);\n}catch(x){\n    msg.payload = \"\";\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1200,
        "y": 1560,
        "wires": [
            [
                "b52ed72a9a5776d2"
            ]
        ]
    },
    {
        "id": "25db8e3fe90fa101",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": " ",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1090,
        "y": 1980,
        "wires": [
            [
                "cc797cee24de1918"
            ]
        ]
    },
    {
        "id": "cc797cee24de1918",
        "type": "function",
        "z": "a63f53a7be972594",
        "name": " ",
        "func": "try{\nvar d = flow.get(\"durasibw\")[0];\nmsg.payload = Math.round((Date.now()-d)/1000);\n}catch(x){\n    msg.payload = \"\";\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1230,
        "y": 1980,
        "wires": [
            [
                "a57c1a5df3301b78"
            ]
        ]
    },
    {
        "id": "a57c1a5df3301b78",
        "type": "debug",
        "z": "a63f53a7be972594",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1470,
        "y": 1780,
        "wires": []
    },
    {
        "id": "b52ed72a9a5776d2",
        "type": "debug",
        "z": "a63f53a7be972594",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1470,
        "y": 1660,
        "wires": []
    },
    {
        "id": "0ead4639118c12fa",
        "type": "delay",
        "z": "a63f53a7be972594",
        "g": "d2aa1f61fe4d5244",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 940,
        "y": 2820,
        "wires": [
            [
                "49beb2a85d35f34b"
            ]
        ]
    },
    {
        "id": "946e72efd9f675d6",
        "type": "http in",
        "z": "a63f53a7be972594",
        "g": "aec2e917d1938482",
        "name": "",
        "url": "/SettingBackwash",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 3780,
        "wires": [
            [
                "3e76f1333416c32c"
            ]
        ]
    },
    {
        "id": "319561132dbf07a5",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": "Sensor High Triggered 2",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "3,301,111,1381632",
        "payloadType": "str",
        "x": 510,
        "y": 3480,
        "wires": [
            [
                "e3945f723db0f896"
            ]
        ]
    },
    {
        "id": "e3945f723db0f896",
        "type": "link out",
        "z": "a63f53a7be972594",
        "name": "link out 24",
        "mode": "link",
        "links": [
            "350ed8d08e9eecd1"
        ],
        "x": 655,
        "y": 3480,
        "wires": []
    },
    {
        "id": "2d1ded265caa12b7",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "f270249d1bfc5626",
        "name": "link out 25",
        "mode": "link",
        "links": [
            "78fb9c9c8ff61838"
        ],
        "x": 615,
        "y": 760,
        "wires": []
    },
    {
        "id": "a5ed2d9ccd4ccba8",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": "Sensor Low Triggered 2",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "3,301,111,1382656",
        "payloadType": "str",
        "x": 470,
        "y": 760,
        "wires": [
            [
                "2d1ded265caa12b7"
            ]
        ]
    },
    {
        "id": "d48a094d44368606",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,8,7,1#",
        "payloadType": "str",
        "x": 1590,
        "y": 420,
        "wires": [
            [
                "7a3a0e799d72f6cc"
            ]
        ]
    },
    {
        "id": "69f9c11fa011cbad",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,8,6,1#",
        "payloadType": "str",
        "x": 1590,
        "y": 460,
        "wires": [
            [
                "7a3a0e799d72f6cc"
            ]
        ]
    },
    {
        "id": "4aa5141f20eb1ead",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,8,8,0#",
        "payloadType": "str",
        "x": 1410,
        "y": 800,
        "wires": [
            [
                "7a3a0e799d72f6cc"
            ]
        ]
    },
    {
        "id": "ed3e0f18967a0756",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,8,9,0#",
        "payloadType": "str",
        "x": 1410,
        "y": 840,
        "wires": [
            [
                "7a3a0e799d72f6cc"
            ]
        ]
    },
    {
        "id": "82a9deea3120a54d",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,8,10,0#",
        "payloadType": "str",
        "x": 1410,
        "y": 880,
        "wires": [
            [
                "7a3a0e799d72f6cc"
            ]
        ]
    },
    {
        "id": "3e76f1333416c32c",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "aec2e917d1938482",
        "name": "",
        "func": "var d = JSON.parse(msg.payload.Data);\nvar da = msg.payload.ID;\nmsg.topic = ``;\n\nif (parseInt(da[2]) <= 4) {\n    msg.topic += 'UPDATE `devicemap` SET `Duration` = ' + String(d[0]) + ' WHERE `Ket` = \"Filter'+da[2]+'\" AND RIGHT(`ID`, 4) = \"1BL'+da[2]+'\";';\n    msg.topic += 'UPDATE `devicemap` SET `Duration` = ' + String(d[1]) + ' WHERE `Ket` = \"Filter'+da[2]+'\" AND RIGHT(`ID`, 4) = \"1BW'+da[2]+'\";';    \n} else if (parseInt(da[2]) >= 5) {\n    var a = parseInt(da[2]) - 4;\n    msg.topic += 'UPDATE `devicemap` SET `Duration` = ' + String(d[0]) + ' WHERE `Ket` = \"Filter'+da[2]+'\" AND RIGHT(`ID`, 4) = \"2BL'+a+'\";';\n    msg.topic += 'UPDATE `devicemap` SET `Duration` = ' + String(d[1]) + ' WHERE `Ket` = \"Filter'+da[2]+'\" AND RIGHT(`ID`, 4) = \"2BW'+a+'\";'; \n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 3780,
        "wires": [
            [
                "a352d067c82691da"
            ]
        ]
    },
    {
        "id": "a352d067c82691da",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "aec2e917d1938482",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 510,
        "y": 3780,
        "wires": [
            [
                "7a690dc7cb9f4642"
            ]
        ]
    },
    {
        "id": "752d052c45a3d289",
        "type": "http response",
        "z": "a63f53a7be972594",
        "g": "aec2e917d1938482",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 810,
        "y": 3780,
        "wires": []
    },
    {
        "id": "7a690dc7cb9f4642",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "aec2e917d1938482",
        "name": "",
        "func": "var d = msg.payload;\nvar Stat = false;\nfor (var i=0; i < 2; i++) {\n    if (d[i].affectedRows === 1) {\n        Stat = true;\n    } else if (d[i].affectededRows === 0) {\n        Stat = false;\n    }\n}\nmsg.payload = {\n    Stat: Stat\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 3780,
        "wires": [
            [
                "752d052c45a3d289"
            ]
        ]
    },
    {
        "id": "a4a273f7d1288132",
        "type": "http in",
        "z": "a63f53a7be972594",
        "g": "aec2e917d1938482",
        "name": "",
        "url": "/CheckBackwash",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 3840,
        "wires": [
            [
                "b40630b3416a490d"
            ]
        ]
    },
    {
        "id": "b40630b3416a490d",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "aec2e917d1938482",
        "name": "",
        "func": "var da = msg.payload.ID;\nmsg.topic = ``;\nif (parseInt(da[2]) <= 4) {\n    msg.topic += 'SELECT Duration FROM `devicemap` WHERE `Ket` = \"Filter'+da[2]+'\" AND RIGHT(`ID`, 4) = \"1BL'+da[2]+'\";';\n    msg.topic += 'SELECT Duration FROM `devicemap` WHERE `Ket` = \"Filter'+da[2]+'\" AND RIGHT(`ID`, 4) = \"1BW'+da[2]+'\";';    \n} else if (parseInt(da[2]) > 4) {\n    var a = parseInt(da[2]) - 4;\n    msg.topic += 'SELECT Duration FROM `devicemap` WHERE `Ket` = \"Filter'+da[2]+'\" AND RIGHT(`ID`, 4) = \"2BL'+a+'\";';\n    msg.topic += 'SELECT Duration FROM `devicemap` WHERE `Ket` = \"Filter'+da[2]+'\" AND RIGHT(`ID`, 4) = \"2BW'+a+'\";'; \n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 3840,
        "wires": [
            [
                "d0d75dc1c51067b2"
            ]
        ]
    },
    {
        "id": "d0d75dc1c51067b2",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "aec2e917d1938482",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 510,
        "y": 3840,
        "wires": [
            [
                "95f04d1da5714122"
            ]
        ]
    },
    {
        "id": "95f04d1da5714122",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "aec2e917d1938482",
        "name": "",
        "func": "msg.payload = {\n    BLO: msg.payload[0][0].Duration,\n    BWS: msg.payload[1][0].Duration,\n    Stat: true\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 3840,
        "wires": [
            [
                "d2cf117f7ad659b8"
            ]
        ]
    },
    {
        "id": "d2cf117f7ad659b8",
        "type": "http response",
        "z": "a63f53a7be972594",
        "g": "aec2e917d1938482",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 810,
        "y": 3840,
        "wires": []
    },
    {
        "id": "cf2ba89c33709203",
        "type": "http in",
        "z": "a63f53a7be972594",
        "g": "aec2e917d1938482",
        "name": "",
        "url": "/StopBackwash",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 170,
        "y": 3900,
        "wires": [
            [
                "c1e4b2ee361235b3"
            ]
        ]
    },
    {
        "id": "c1e4b2ee361235b3",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "aec2e917d1938482",
        "name": "",
        "func": "var id = msg.payload.ID;\nvar Stat = true;\nflow.set(\"Stop\", true);\n\nif (flow.get(\"Stop\")) {\n    msg.payload = {\n        ID: id,\n        Stat: Stat\n    }\n} else if (!flow.get(\"Stop\")) {\n    msg.payload = {\n        ID: id,\n        Stat: false\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 3900,
        "wires": [
            [
                "0d145b8a4f8222fe"
            ]
        ]
    },
    {
        "id": "0d145b8a4f8222fe",
        "type": "http response",
        "z": "a63f53a7be972594",
        "g": "aec2e917d1938482",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 510,
        "y": 3900,
        "wires": []
    },
    {
        "id": "3858c7c073b404eb",
        "type": "http in",
        "z": "a63f53a7be972594",
        "g": "aec2e917d1938482",
        "name": "",
        "url": "/RunBackwash",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 170,
        "y": 3960,
        "wires": [
            [
                "583be330eaebe443"
            ]
        ]
    },
    {
        "id": "583be330eaebe443",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "aec2e917d1938482",
        "name": "",
        "func": "var id = msg.payload.ID;\nvar Stat = true;\nflow.set(\"Run\", [true, `Filter${id[2]}`]);\n\nif (flow.get(\"Run\")) {\n    msg.payload = {\n        ID: id,\n        Stat: Stat\n    }\n} else if (!flow.get(\"Run\")) {\n    msg.payload = {\n        ID: id,\n        Stat: false\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 3960,
        "wires": [
            [
                "33a40369cf613c88"
            ]
        ]
    },
    {
        "id": "33a40369cf613c88",
        "type": "http response",
        "z": "a63f53a7be972594",
        "g": "aec2e917d1938482",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 510,
        "y": 3960,
        "wires": []
    },
    {
        "id": "d62d1ca87b37a423",
        "type": "http in",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "",
        "url": "/InletManual",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 4080,
        "wires": [
            [
                "af52a5e9e979a3d3"
            ]
        ]
    },
    {
        "id": "af52a5e9e979a3d3",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "",
        "func": "var id = msg.payload.ID;\nvar typeId = 2;\nvar RelayIoT = 208;\nvar action = msg.payload.action;\nvar inlet = 1;\n\nif (id[2] === \"1\") {\n    inlet = inlet;\n} else if (id[2] === \"2\") {\n    inlet = inlet + 5;\n} else if (id[2] === \"3\") {\n    inlet = inlet + 10;\n} else if (id[2] === \"4\") {\n    inlet = inlet + 15;\n}\n\nmsg.payload = typeId + ',' + RelayIoT + ',8,' + inlet + ',' + action + '#';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 4080,
        "wires": [
            [
                "0f178f35cba0212c",
                "998e7c7a9ff658cb"
            ]
        ]
    },
    {
        "id": "0f178f35cba0212c",
        "type": "http response",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 510,
        "y": 4080,
        "wires": []
    },
    {
        "id": "2e2d3a8b4af96c8a",
        "type": "http in",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "",
        "url": "/OutletManual",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 710,
        "y": 4080,
        "wires": [
            [
                "c2120b59de6545a5"
            ]
        ]
    },
    {
        "id": "c2120b59de6545a5",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "",
        "func": "var id = msg.payload.ID;\nvar typeId = 2;\nvar RelayIoT = 208;\nvar action = msg.payload.action;\nvar outlet = 2;\n\nif (id[2] === \"1\") {\n    outlet = outlet;\n} else if (id[2] === \"2\") {\n    outlet = outlet + 5;\n} else if (id[2] === \"3\") {\n    outlet = outlet + 10;\n} else if (id[2] === \"4\") {\n    outlet = outlet + 15;\n}\n\nmsg.payload = typeId + ',' + RelayIoT + ',8,' + outlet + ',' + action + '#';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 900,
        "y": 4080,
        "wires": [
            [
                "2d6607ee35012ea4",
                "a52559c9c935cd3f"
            ]
        ]
    },
    {
        "id": "2d6607ee35012ea4",
        "type": "http response",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1050,
        "y": 4080,
        "wires": []
    },
    {
        "id": "715a499577051407",
        "type": "http in",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "",
        "url": "/DrainManual",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 170,
        "y": 4160,
        "wires": [
            [
                "041d38d1263c056f"
            ]
        ]
    },
    {
        "id": "041d38d1263c056f",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "",
        "func": "var id = msg.payload.ID;\nvar typeId = 2;\nvar RelayIoT = 208;\nvar action = msg.payload.action;\nvar drain = 3;\n\nif (id[2] === \"1\") {\n    drain = drain;\n} else if (id[2] === \"2\") {\n    drain = drain + 5;\n} else if (id[2] === \"3\") {\n    drain = drain + 10;\n} else if (id[2] === \"4\") {\n    drain = drain + 15;\n}\n\nmsg.payload = typeId + ',' + RelayIoT + ',8,' + drain + ',' + action + '#';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 4160,
        "wires": [
            [
                "8c50a8072f47ad69",
                "fcdc8e18edaab067"
            ]
        ]
    },
    {
        "id": "8c50a8072f47ad69",
        "type": "http response",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 510,
        "y": 4160,
        "wires": []
    },
    {
        "id": "da908f14c3f213e0",
        "type": "http in",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "",
        "url": "/BlowerManual",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 710,
        "y": 4160,
        "wires": [
            [
                "d7f1ed691213f8b4"
            ]
        ]
    },
    {
        "id": "d7f1ed691213f8b4",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "",
        "func": "var id = msg.payload.ID;\nvar typeId = 2;\nvar RelayIoT = 208;\nvar action = msg.payload.action;\nvar blower = 4;\n\nif (id[2] === \"1\") {\n    blower = blower;\n} else if (id[2] === \"2\") {\n    blower = blower + 5;\n} else if (id[2] === \"3\") {\n    blower = blower + 10;\n} else if (id[2] === \"4\") {\n    blower = blower + 15;\n}\n\nmsg.payload = typeId + ',' + RelayIoT + ',8,' + blower + ',' + action + '#';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 900,
        "y": 4160,
        "wires": [
            [
                "c3ac80ce8a2c66f4",
                "366e947795ca7f70"
            ]
        ]
    },
    {
        "id": "c3ac80ce8a2c66f4",
        "type": "http response",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1050,
        "y": 4160,
        "wires": []
    },
    {
        "id": "de47272ce70a721d",
        "type": "http in",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "",
        "url": "/BackwashManual",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 4240,
        "wires": [
            [
                "eefc2ee740fc3830"
            ]
        ]
    },
    {
        "id": "eefc2ee740fc3830",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "",
        "func": "var id = msg.payload.ID;\nvar typeId = 2;\nvar RelayIoT = 208;\nvar action = msg.payload.action;\nvar backwash = 5;\n\nif (id[2] === \"1\") {\n    backwash = backwash;\n} else if (id[2] === \"2\") {\n    backwash = backwash + 5;\n} else if (id[2] === \"3\") {\n    backwash = backwash + 10;\n} else if (id[2] === \"4\") {\n    backwash = backwash + 15;\n}\n\nmsg.payload = typeId + ',' + RelayIoT + ',8,' + backwash + ',' + action + '#';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 4240,
        "wires": [
            [
                "db75da44738ee95a",
                "c2b5f3fde9d4b15a"
            ]
        ]
    },
    {
        "id": "db75da44738ee95a",
        "type": "http response",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 510,
        "y": 4240,
        "wires": []
    },
    {
        "id": "257efe91c20816fb",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,8,1,0#",
        "payloadType": "str",
        "x": 1070,
        "y": 3740,
        "wires": [
            [
                "86e68ada27923f46"
            ]
        ]
    },
    {
        "id": "1dd306c4e31dc491",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,8,2,0#",
        "payloadType": "str",
        "x": 1070,
        "y": 3780,
        "wires": [
            [
                "86e68ada27923f46"
            ]
        ]
    },
    {
        "id": "6fd011e76b094304",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,8,4,0#",
        "payloadType": "str",
        "x": 1070,
        "y": 3860,
        "wires": [
            [
                "86e68ada27923f46"
            ]
        ]
    },
    {
        "id": "66179b192952e640",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,8,3,0#",
        "payloadType": "str",
        "x": 1070,
        "y": 3820,
        "wires": [
            [
                "86e68ada27923f46"
            ]
        ]
    },
    {
        "id": "86e68ada27923f46",
        "type": "link out",
        "z": "a63f53a7be972594",
        "name": "link out 26",
        "mode": "link",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 1215,
        "y": 3840,
        "wires": []
    },
    {
        "id": "b7ceca69633e4c40",
        "type": "function",
        "z": "a63f53a7be972594",
        "name": "",
        "func": "flow.set(\"ManualFilter1\", [2,208,111,\"Status\",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);\nmsg.payload = flow.get(\"ManualFilter1\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1220,
        "y": 3980,
        "wires": [
            [
                "f5a40de0517a7495"
            ]
        ]
    },
    {
        "id": "c37a1d13379c66f9",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": "Set First",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1060,
        "y": 3980,
        "wires": [
            [
                "b7ceca69633e4c40"
            ]
        ]
    },
    {
        "id": "f5a40de0517a7495",
        "type": "debug",
        "z": "a63f53a7be972594",
        "name": "debug 42",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1380,
        "y": 3980,
        "wires": []
    },
    {
        "id": "900947bb42ab2652",
        "type": "http in",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "",
        "url": "/UpdateButton",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 710,
        "y": 4240,
        "wires": [
            [
                "4b132aafbbd3e2f4"
            ]
        ]
    },
    {
        "id": "4b132aafbbd3e2f4",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "",
        "func": "var d = flow.get(\"ManualFilter1\");\nmsg.payload = [\n    [d[4], d[5], d[6], d[7], d[8]],\n    [d[9], d[10], d[11], d[12], d[13]],\n    [d[14], d[15], d[16], d[17], d[18]],\n    [d[19], d[20], d[21], d[22], d[23]]\n];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 900,
        "y": 4240,
        "wires": [
            [
                "0ee29238087fe705",
                "4a38dd491294a635"
            ]
        ]
    },
    {
        "id": "0ee29238087fe705",
        "type": "http response",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1050,
        "y": 4240,
        "wires": []
    },
    {
        "id": "e04952dc669813fd",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 720,
        "y": 4300,
        "wires": [
            [
                "4b132aafbbd3e2f4"
            ]
        ]
    },
    {
        "id": "4a38dd491294a635",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "debug 44",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1060,
        "y": 4300,
        "wires": []
    },
    {
        "id": "998e7c7a9ff658cb",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "link out 27",
        "mode": "link",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 475,
        "y": 4120,
        "wires": []
    },
    {
        "id": "fcdc8e18edaab067",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "link out 28",
        "mode": "link",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 495,
        "y": 4200,
        "wires": []
    },
    {
        "id": "c2b5f3fde9d4b15a",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "link out 29",
        "mode": "link",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 485,
        "y": 4280,
        "wires": []
    },
    {
        "id": "a52559c9c935cd3f",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "link out 30",
        "mode": "link",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 1035,
        "y": 4120,
        "wires": []
    },
    {
        "id": "366e947795ca7f70",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "2f7af6a2a7c6c9d7",
        "name": "link out 31",
        "mode": "link",
        "links": [
            "571f75d84ce0befe"
        ],
        "x": 1025,
        "y": 4200,
        "wires": []
    },
    {
        "id": "54e82ca00119fb12",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,8,5,0#",
        "payloadType": "str",
        "x": 1070,
        "y": 3900,
        "wires": [
            [
                "86e68ada27923f46"
            ]
        ]
    },
    {
        "id": "3683216fe43243c4",
        "type": "mqtt in",
        "z": "a63f53a7be972594",
        "name": "",
        "topic": "gw80/data",
        "qos": "2",
        "datatype": "auto",
        "broker": "f29dc24ba57a62a5",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 940,
        "y": 4400,
        "wires": [
            [
                "156a3e575558b5b8"
            ]
        ]
    },
    {
        "id": "156a3e575558b5b8",
        "type": "function",
        "z": "a63f53a7be972594",
        "name": "",
        "func": "var d = msg.payload;\nvar len = d.length;\nvar da = d.substring(0, len).split(\",\");\n\nif (da[3] === \"Status\") {\n    for (var i=0; i<da.length; i++) {\n        if (i != 3) {\n            da[i] = parseInt(da[i]);\n        }\n    }\n    flow.set(\"ManualFilter1\", da);\n    msg.payload = da;\n    return msg;   \n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1100,
        "y": 4400,
        "wires": [
            [
                "5ee79923881de16b"
            ]
        ]
    },
    {
        "id": "5ee79923881de16b",
        "type": "debug",
        "z": "a63f53a7be972594",
        "name": "debug 49",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1260,
        "y": 4400,
        "wires": []
    },
    {
        "id": "b5d513844b9212a7",
        "type": "trigger",
        "z": "a63f53a7be972594",
        "g": "a3a55e80ba5387bb",
        "name": " ",
        "op1": "",
        "op2": "",
        "op1type": "pay",
        "op2type": "payl",
        "duration": "5",
        "extend": true,
        "overrideDelay": true,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1330,
        "y": 240,
        "wires": [
            [
                "c91eb3591af378ad"
            ]
        ]
    },
    {
        "id": "bca5a391e2914744",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "a3a55e80ba5387bb",
        "name": " ",
        "func": "msg.reset = \"yes\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1430,
        "y": 180,
        "wires": [
            [
                "c341f5e779066fa6"
            ]
        ]
    },
    {
        "id": "c341f5e779066fa6",
        "type": "link out",
        "z": "a63f53a7be972594",
        "g": "a3a55e80ba5387bb",
        "name": "link out 32",
        "mode": "link",
        "links": [
            "c80bb79699cca373"
        ],
        "x": 1525,
        "y": 180,
        "wires": []
    },
    {
        "id": "c80bb79699cca373",
        "type": "link in",
        "z": "a63f53a7be972594",
        "g": "a3a55e80ba5387bb",
        "name": "link in 3",
        "links": [
            "c341f5e779066fa6"
        ],
        "x": 1235,
        "y": 200,
        "wires": [
            [
                "b5d513844b9212a7"
            ]
        ]
    },
    {
        "id": "8955dc36a0c4c3a4",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "66877bcdacc143c6",
        "name": " ",
        "func": "if(flow.get(\"Run\") != undefined){\n    if(flow.get(\"Run\")[0] == true){\n        msg.trigger = \"FromRun\";\n        msg.filter = flow.get(\"Run\")[1];\n        flow.set(\"Run\",[false,msg.filter]);\n    }\n}else{\n    return msg;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 440,
        "wires": [
            [
                "2a44227780c21acb",
                "e87de73b7d590bab"
            ]
        ]
    },
    {
        "id": "5c7b95a5368900a7",
        "type": "inject",
        "z": "a63f53a7be972594",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1050,
        "y": 3940,
        "wires": [
            [
                "bab06cd2d3667d8a"
            ]
        ]
    },
    {
        "id": "bab06cd2d3667d8a",
        "type": "function",
        "z": "a63f53a7be972594",
        "name": "function 4",
        "func": "msg.payload = flow.get(\"Run\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1210,
        "y": 3940,
        "wires": [
            [
                "f5a40de0517a7495"
            ]
        ]
    },
    {
        "id": "7f97abae467a0873",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "66877bcdacc143c6",
        "name": "debug 50",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 990,
        "y": 480,
        "wires": []
    },
    {
        "id": "e87de73b7d590bab",
        "type": "debug",
        "z": "a63f53a7be972594",
        "g": "66877bcdacc143c6",
        "name": "debug 51",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "trigger",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 440,
        "y": 480,
        "wires": []
    },
    {
        "id": "4527ce32fc9a612e",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "07b05d85275c52d9",
        "name": " ",
        "func": "var d = msg.payload[0].INP;\nd = reverseString(reverseString(d).substring(0,16));\nmsg.stat = d;\nvar json = {};\nfor (let i = 0; i < 8; i++) {\n  const filterIndex = i + 1;\n  const startIndex = i * 2;\n  \n  json[`Filter${filterIndex}H`] = d[startIndex];\n  json[`Filter${filterIndex}L`] = d[startIndex + 1];\n}\nmsg.payload = convertToBoolean(json);\nreturn msg;\n\nfunction dTb(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  return binary;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}\n\nfunction reverseString(str) {\n  let reversed = '';\n  for (let i = str.length - 1; i >= 0; i--) {\n    reversed += str[i];\n  }\n  return reversed;\n}\n\nfunction ieo(number) {\n  if (number % 2 === 0) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction convertToBoolean(jsonData) {\n    let data = jsonData;\n\n    for (let key in data) {\n        if (data.hasOwnProperty(key)) {\n            if (data[key] === \"1\") {\n                data[key] = true;\n            } else if (data[key] === \"0\") {\n                data[key] = false;\n            }\n        }\n    }\n\n    return data;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 4480,
        "wires": [
            [
                "8ac805f0d9b90390"
            ]
        ]
    },
    {
        "id": "a79a29ded7b49488",
        "type": "function",
        "z": "a63f53a7be972594",
        "g": "07b05d85275c52d9",
        "name": "",
        "func": "msg.topic = 'SELECT INP FROM `alldata` ORDER BY epo DESC LIMIT 1';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 4480,
        "wires": [
            [
                "21b659c62bb4f75b"
            ]
        ]
    },
    {
        "id": "21b659c62bb4f75b",
        "type": "mysql",
        "z": "a63f53a7be972594",
        "g": "07b05d85275c52d9",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 490,
        "y": 4480,
        "wires": [
            [
                "4527ce32fc9a612e"
            ]
        ]
    },
    {
        "id": "55541118f48f7087",
        "type": "inject",
        "z": "a63f53a7be972594",
        "g": "07b05d85275c52d9",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 200,
        "y": 4420,
        "wires": [
            [
                "a79a29ded7b49488"
            ]
        ]
    },
    {
        "id": "ec0f1afa3398af62",
        "type": "http in",
        "z": "a63f53a7be972594",
        "g": "07b05d85275c52d9",
        "name": "",
        "url": "/UpdateSensor",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 4480,
        "wires": [
            [
                "a79a29ded7b49488"
            ]
        ]
    },
    {
        "id": "8ac805f0d9b90390",
        "type": "http response",
        "z": "a63f53a7be972594",
        "g": "07b05d85275c52d9",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 750,
        "y": 4480,
        "wires": []
    },
    {
        "id": "109ba03764fc9cf7",
        "type": "tab",
        "label": "Loop",
        "disabled": false,
        "info": ""
    },
    {
        "id": "1ba4c26f9dd614ee",
        "type": "group",
        "z": "109ba03764fc9cf7",
        "name": "Traffic",
        "style": {
            "label": true
        },
        "nodes": [
            "71ce6ad76ecb2bc6",
            "4ca49aef0a4622ec",
            "bcba5fa37bf28587",
            "4175594fb290aced",
            "873a634b6d43c034",
            "4b185352cb012983",
            "31391a8015deee6f",
            "0a4342238fa6a6aa",
            "f4386aaa3b7b291b",
            "18a5d510b349209a",
            "6a6a35759c0cc1eb",
            "c2370e1744e5aa65",
            "8d61b2298290eb56"
        ],
        "x": 54,
        "y": 159,
        "w": 852,
        "h": 182
    },
    {
        "id": "356c56c0151696ab",
        "type": "group",
        "z": "109ba03764fc9cf7",
        "name": "Insert Alldata",
        "style": {
            "label": true
        },
        "nodes": [
            "bbeadf97530c5cb7",
            "0543cba00896a04f",
            "e2fb6b66028b7105",
            "51ca2db5597ae85a",
            "892e26dda306d690",
            "8c00605d9a70a623",
            "03d4f4bb18b5978e",
            "0ff2194b51980af5",
            "59da8cb889b0f1c6",
            "533fb2134f93d9f0",
            "06dee1c8e8413707",
            "dc6b207be74c6736",
            "aa7ab170d2d94631",
            "ffddd5e81d7a2df4",
            "22a1b508b105efb6"
        ],
        "x": 54,
        "y": 359,
        "w": 732,
        "h": 242
    },
    {
        "id": "3720459c97ad2257",
        "type": "function",
        "z": "109ba03764fc9cf7",
        "name": " ",
        "func": "msg.payload = [\n    // Turbidity\n    \"TBD101,0#\",\n    \"TBD102,0#\",\n    \"TBD103,0#\",\n    \"TBD104,0#\",\n    // pH\n    \"PHS101,0#\",\n    \"PHS102,0#\",\n    // Chlorine\n    \"CLR101,0#\",\n    // Relay 7\n    // \"2,201,0#\",\n    // \"2,202,0#\",\n    // \"2,203,0#\",\n    // \"2,206,0#\",\n    // \"2,207,0#\",\n    // \"2,208,0#\",\n    // \"2,209,0#\",\n    // Input\n    \"3,301,0#\",\n    // Level\n    \"FS140,0#\",\n    //Flowmeter,\n    \"11,1,0,0#\",\n    \"11,1,0,1#\",\n    \"11,2,0,0#\",\n    \"11,2,0,1#\",\n    \"11,3,0,0#\",\n    \"11,3,0,1#\"\n    ];\nflow.set(\"CountDevice\",msg.payload.length);\nmsg.delay = 7000;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 120,
        "wires": [
            [
                "88866b3a70407cdd"
            ]
        ]
    },
    {
        "id": "a2cd329ff12adb49",
        "type": "debug",
        "z": "109ba03764fc9cf7",
        "name": " ",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1490,
        "y": 160,
        "wires": []
    },
    {
        "id": "a38a422f065cafe6",
        "type": "link out",
        "z": "109ba03764fc9cf7",
        "name": "",
        "links": [
            "f5191930abb7dcf7"
        ],
        "x": 1455,
        "y": 100,
        "wires": []
    },
    {
        "id": "6f7dcebe8a838abf",
        "type": "inject",
        "z": "109ba03764fc9cf7",
        "name": " ",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "select * from `main`;",
        "payloadType": "str",
        "x": 90,
        "y": 40,
        "wires": [
            [
                "6f4fb7a574a67c2e"
            ]
        ]
    },
    {
        "id": "b5c4671757a63ed7",
        "type": "link out",
        "z": "109ba03764fc9cf7",
        "name": "",
        "links": [
            "bbeadf97530c5cb7",
            "67b48eeda90d235f",
            "f40599b10438bfb1"
        ],
        "x": 1015,
        "y": 160,
        "wires": []
    },
    {
        "id": "bbeadf97530c5cb7",
        "type": "link in",
        "z": "109ba03764fc9cf7",
        "g": "356c56c0151696ab",
        "name": "",
        "links": [
            "b5c4671757a63ed7"
        ],
        "x": 95,
        "y": 440,
        "wires": [
            [
                "03d4f4bb18b5978e"
            ]
        ]
    },
    {
        "id": "0543cba00896a04f",
        "type": "function",
        "z": "109ba03764fc9cf7",
        "g": "356c56c0151696ab",
        "name": " ",
        "func": "msg.query = \"\";\nvar device = [];\nmsg.topic= \"\";\nvar t = \"\"\nfor(i=1;i<=4;i++){ // Turbidity\n    t = \"TBD\";\n    device.push(t+String(100+i));\n}\nfor(i=1;i<=2;i++){ //pH\n    t = \"PHS\";\n    device.push(t+String(100+i));\n}\nfor(i=1;i<=1;i++){ //Chlorine\n    t = \"CLR\";\n    device.push(t+String(100+i));\n}\nfor(i=1;i<=7;i++){ //Relay\n    t = \"\";\n    var num = i;\n    if(i>3){\n        num=num+2;\n    }\n    device.push(t+String(200+num));\n}\nfor(i=1;i<=1;i++){ //INPUT\n    t = \"\";\n    device.push(t+String(300+i));\n}\nfor(i=1;i<=1;i++){ //Level Air\n    t = \"FS\";\n    device.push(t+\"140\");\n}\nmsg.topic = \"UPDATE `main` SET `Traffic` = 'IDLE';\";\nfor(i=0;i<device.length;i++){\n    msg.topic += \"SELECT * FROM `alldevice` where `deviceid` = '\"+String(device[i])+\"' order by time desc limit 1;\";\n}\nmsg.topic += \"SELECT * FROM `alldevice` where `deviceid` = '1' AND `val1`= 111 order by time desc limit 1;\";\nmsg.topic += \"SELECT * FROM `alldevice` where `deviceid` = '1' AND `val1`= 112 order by time desc limit 1;\";\nmsg.topic += \"SELECT * FROM `alldevice` where `deviceid` = '2' AND `val1`= 111 order by time desc limit 1;\";\nmsg.topic += \"SELECT * FROM `alldevice` where `deviceid` = '2' AND `val1`= 112 order by time desc limit 1;\";\nmsg.topic += \"SELECT * FROM `alldevice` where `deviceid` = '3' AND `val1`= 111 order by time desc limit 1;\";\nmsg.topic += \"SELECT * FROM `alldevice` where `deviceid` = '3' AND `val1`= 112 order by time desc limit 1;\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 440,
        "wires": [
            [
                "8c00605d9a70a623",
                "892e26dda306d690"
            ]
        ]
    },
    {
        "id": "e2fb6b66028b7105",
        "type": "debug",
        "z": "109ba03764fc9cf7",
        "g": "356c56c0151696ab",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 560,
        "wires": []
    },
    {
        "id": "51ca2db5597ae85a",
        "type": "function",
        "z": "109ba03764fc9cf7",
        "g": "356c56c0151696ab",
        "name": " ",
        "func": "var arr = [];\nfor(i=0;i<msg.payload.length;i++){\n    var json  = {};\n    if(i<=4 && i >=1){\n        json = {\n            \"Date\":String(new Date(msg.payload[i][0].time)).substring(0,33),\n            \"time\":Date.parse(new Date(msg.payload[i][0].time)),\n            \"raw\":parseInt(String(msg.payload[i][0].val1)),\n            \"decPoint\":parseInt(String(msg.payload[i][0].val2)),\n            \"temp\":parseInt(String(msg.payload[i][0].val3))\n        }\n    }else if(i==5 || i==6){\n        json = {\n            \"Date\":String(new Date(msg.payload[i][0].time)).substring(0,33),\n            \"time\":Date.parse(new Date(msg.payload[i][0].time)),\n            \"raw\":parseInt(String(msg.payload[i][0].val1)),\n            \"decPoint\":parseInt(String(msg.payload[i][0].val2)),\n            \"temp\":parseInt(String(msg.payload[i][0].val3))\n        }\n    }else if(i==7){\n        json = {\n            \"Date\":String(new Date(msg.payload[i][0].time)).substring(0,33),\n            \"time\":Date.parse(new Date(msg.payload[i][0].time)),\n            \"raw\":parseInt(String(msg.payload[i][0].val1)),\n            \"decPoint\":parseInt(String(msg.payload[i][0].val2)),\n            \"temp\":parseInt(String(msg.payload[i][0].val3))\n        }\n    }else if(i>7 && i<=14){\n        json = {\n            \"Date\":String(new Date(msg.payload[i][0].time)).substring(0,33),\n            \"devid\":(String(msg.payload[i][0].deviceid)),\n            \"time\":Date.parse(new Date(msg.payload[i][0].time)),\n            \"ST\":(String(msg.payload[i][0].val1)),\n            \"raw\":parseInt(String(msg.payload[i][0].val2))\n        }\n    }else if(i==15){\n        json = {\n            \"Date\":String(new Date(msg.payload[i][0].time)).substring(0,33),\n            \"time\":Date.parse(new Date(msg.payload[i][0].time)),\n            \"raw\":String(msg.payload[i][0].val2)\n        }\n    }else if(i==16){\n        json = {\n            \"Date\":String(new Date(msg.payload[i][0].time)).substring(0,33),\n            \"time\":Date.parse(new Date(msg.payload[i][0].time)),\n            \"raw\":parseInt(String(msg.payload[i][0].val1))\n        }\n    }else if(i>16){\n        json = {\n            \"Date\":String(new Date(msg.payload[i][0].time)).substring(0,33),\n            \"time\":Date.parse(new Date(msg.payload[i][0].time)),\n            \"raw\":parseInt(String(msg.payload[i][0].val2))\n        }\n    }\n    arr.push(json);\n}\nmsg.payload = arr;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 440,
        "wires": [
            [
                "0ff2194b51980af5",
                "46d1ec38782095d3"
            ]
        ]
    },
    {
        "id": "892e26dda306d690",
        "type": "mysql",
        "z": "109ba03764fc9cf7",
        "g": "356c56c0151696ab",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 450,
        "y": 440,
        "wires": [
            [
                "51ca2db5597ae85a",
                "ffddd5e81d7a2df4"
            ]
        ]
    },
    {
        "id": "71ce6ad76ecb2bc6",
        "type": "inject",
        "z": "109ba03764fc9cf7",
        "g": "1ba4c26f9dd614ee",
        "name": "Check Traffic",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "select * from main",
        "payload": "",
        "payloadType": "date",
        "x": 180,
        "y": 240,
        "wires": [
            [
                "4ca49aef0a4622ec",
                "4175594fb290aced"
            ]
        ]
    },
    {
        "id": "4ca49aef0a4622ec",
        "type": "random",
        "z": "109ba03764fc9cf7",
        "g": "1ba4c26f9dd614ee",
        "name": "",
        "low": 1,
        "high": 10,
        "inte": "true",
        "property": "payload",
        "x": 360,
        "y": 240,
        "wires": [
            [
                "c2370e1744e5aa65"
            ]
        ]
    },
    {
        "id": "bcba5fa37bf28587",
        "type": "function",
        "z": "109ba03764fc9cf7",
        "g": "1ba4c26f9dd614ee",
        "name": " ",
        "func": "flow.set(\"Traffic\",msg.payload[0].Traffic);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 240,
        "wires": [
            [
                "873a634b6d43c034",
                "18a5d510b349209a"
            ]
        ]
    },
    {
        "id": "4175594fb290aced",
        "type": "mysql",
        "z": "109ba03764fc9cf7",
        "g": "1ba4c26f9dd614ee",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 350,
        "y": 240,
        "wires": [
            [
                "bcba5fa37bf28587"
            ]
        ]
    },
    {
        "id": "88866b3a70407cdd",
        "type": "switch",
        "z": "109ba03764fc9cf7",
        "name": "IDLE?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 670,
        "y": 120,
        "wires": [
            [
                "2b3b5985e44cf582"
            ]
        ]
    },
    {
        "id": "873a634b6d43c034",
        "type": "debug",
        "z": "109ba03764fc9cf7",
        "g": "1ba4c26f9dd614ee",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload[0].Traffic",
        "targetType": "msg",
        "statusVal": "payload[0].Traffic",
        "statusType": "auto",
        "x": 690,
        "y": 200,
        "wires": []
    },
    {
        "id": "4b185352cb012983",
        "type": "mysql",
        "z": "109ba03764fc9cf7",
        "g": "1ba4c26f9dd614ee",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 190,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "31391a8015deee6f",
        "type": "link in",
        "z": "109ba03764fc9cf7",
        "g": "1ba4c26f9dd614ee",
        "name": "SQLUPDATE",
        "links": [
            "8c00605d9a70a623",
            "82d4489aefcfdfb0",
            "ee8c7e433e1937c1"
        ],
        "x": 95,
        "y": 300,
        "wires": [
            [
                "4b185352cb012983",
                "f4386aaa3b7b291b"
            ]
        ]
    },
    {
        "id": "8c00605d9a70a623",
        "type": "link out",
        "z": "109ba03764fc9cf7",
        "g": "356c56c0151696ab",
        "name": "",
        "links": [
            "31391a8015deee6f",
            "c61d93e2a8ad4c4e"
        ],
        "x": 415,
        "y": 400,
        "wires": []
    },
    {
        "id": "0a4342238fa6a6aa",
        "type": "debug",
        "z": "109ba03764fc9cf7",
        "g": "1ba4c26f9dd614ee",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "topic.split(\" \")",
        "statusType": "auto",
        "x": 550,
        "y": 300,
        "wires": []
    },
    {
        "id": "f4386aaa3b7b291b",
        "type": "function",
        "z": "109ba03764fc9cf7",
        "g": "1ba4c26f9dd614ee",
        "name": " ",
        "func": "try{\n    msg.payload = [String(msg.topic).split(\" \")[5].substring(1,String(msg.topic).split(\" \")[5].length-2),msg.topic];\n}catch(x){\n    msg.payload = \"null\";\n}\nmsg.topic = \"\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 300,
        "wires": [
            [
                "8d61b2298290eb56"
            ]
        ]
    },
    {
        "id": "18a5d510b349209a",
        "type": "function",
        "z": "109ba03764fc9cf7",
        "g": "1ba4c26f9dd614ee",
        "name": " ",
        "func": "var d = msg.payload;\nif(flow.get(\"diff\")==undefined){\n    flow.set(\"diff\",[msg.payload[0].Traffic,Date.now()]);\n    \n}else{\n    if(flow.get(\"diff\")[0]!=msg.payload[0].Traffic){\n        flow.set(\"diff\",[msg.payload[0].Traffic,Date.now()]);\n    }\n    msg.payload = secondsToDhms(Math.round((Date.now()-flow.get(\"diff\")[1])/1000));\n}\nreturn msg;\n\nfunction secondsToDhms(seconds) {\nseconds = Number(seconds);\nvar d = Math.floor(seconds / (3600*24));\nvar h = Math.floor(seconds % (3600*24) / 3600);\nvar m = Math.floor(seconds % 3600 / 60);\nvar s = Math.floor(seconds % 60);\n\nvar dDisplay = d > 0 ? d + (d == 1 ? \" day, \" : \" days, \") : \"\";\nvar hDisplay = h > 0 ? h + (h == 1 ? \" hour, \" : \" hours, \") : \"\";\nvar mDisplay = m > 0 ? m + (m == 1 ? \" minute, \" : \" minutes, \") : \"\";\nvar sDisplay = s > 0 ? s + (s == 1 ? \" second\" : \" seconds\") : \"\";\nreturn dDisplay + hDisplay + mDisplay + sDisplay;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 260,
        "wires": [
            [
                "6a6a35759c0cc1eb"
            ]
        ]
    },
    {
        "id": "6a6a35759c0cc1eb",
        "type": "debug",
        "z": "109ba03764fc9cf7",
        "g": "1ba4c26f9dd614ee",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload[0].Traffic",
        "statusType": "auto",
        "x": 810,
        "y": 260,
        "wires": []
    },
    {
        "id": "c2370e1744e5aa65",
        "type": "trigger",
        "z": "109ba03764fc9cf7",
        "g": "1ba4c26f9dd614ee",
        "name": " ",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "50",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 510,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "57873fe28fde50d0",
        "type": "function",
        "z": "109ba03764fc9cf7",
        "name": " ",
        "func": "var d = flow.get(\"Traffic\");\nif(d==\"GoScan\"){\n    msg.reset = \"Active\";\n    msg.payload = 1;\n    msg.topic = \"UPDATE `main` SET `Traffic` = 'Scanning';\";\n}else{\n    msg.payload = null;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 120,
        "wires": [
            [
                "96e976e11f2ee9b0",
                "88a598122222a22a"
            ]
        ]
    },
    {
        "id": "88a598122222a22a",
        "type": "trigger",
        "z": "109ba03764fc9cf7",
        "name": " ",
        "op1": "1",
        "op2": "",
        "op1type": "str",
        "op2type": "nul",
        "duration": "24",
        "extend": true,
        "overrideDelay": false,
        "units": "hr",
        "reset": "1",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 430,
        "y": 120,
        "wires": [
            [
                "3720459c97ad2257"
            ]
        ]
    },
    {
        "id": "6f4fb7a574a67c2e",
        "type": "link out",
        "z": "109ba03764fc9cf7",
        "name": "",
        "links": [
            "eb240da6d0cd29b7"
        ],
        "x": 195,
        "y": 40,
        "wires": []
    },
    {
        "id": "eb240da6d0cd29b7",
        "type": "link in",
        "z": "109ba03764fc9cf7",
        "name": "",
        "links": [
            "6f4fb7a574a67c2e"
        ],
        "x": 75,
        "y": 120,
        "wires": [
            [
                "57873fe28fde50d0"
            ]
        ]
    },
    {
        "id": "ee8c7e433e1937c1",
        "type": "link out",
        "z": "109ba03764fc9cf7",
        "name": "",
        "links": [
            "c61d93e2a8ad4c4e",
            "31391a8015deee6f"
        ],
        "x": 395,
        "y": 80,
        "wires": []
    },
    {
        "id": "655dc5d9410db867",
        "type": "function",
        "z": "109ba03764fc9cf7",
        "name": " ",
        "func": "if(flow.get(\"Traffic\")!=\"Scanning\"){\n    msg.payload = null;\n    return msg;\n}\nif(msg.payload.substring(0,1)==\"2\" || msg.payload.substring(0,1)==\"3\" || msg.payload.substring(0,2) == \"11\"){\n    msg.topic = \"newGateway\";\n}else{\n    msg.topic = \"old\";\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1050,
        "y": 120,
        "wires": [
            [
                "7ce3bda2cef50e51",
                "cca36ee819fa1caa"
            ]
        ]
    },
    {
        "id": "7ce3bda2cef50e51",
        "type": "switch",
        "z": "109ba03764fc9cf7",
        "name": " ",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1170,
        "y": 120,
        "wires": [
            [
                "9cb886fcb481035a"
            ]
        ]
    },
    {
        "id": "96e976e11f2ee9b0",
        "type": "switch",
        "z": "109ba03764fc9cf7",
        "name": " ",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 310,
        "y": 80,
        "wires": [
            [
                "ee8c7e433e1937c1"
            ]
        ]
    },
    {
        "id": "8d61b2298290eb56",
        "type": "switch",
        "z": "109ba03764fc9cf7",
        "g": "1ba4c26f9dd614ee",
        "name": " ",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "null",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 430,
        "y": 300,
        "wires": [
            [
                "0a4342238fa6a6aa"
            ]
        ]
    },
    {
        "id": "03d4f4bb18b5978e",
        "type": "delay",
        "z": "109ba03764fc9cf7",
        "g": "356c56c0151696ab",
        "name": " ",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 190,
        "y": 440,
        "wires": [
            [
                "0543cba00896a04f"
            ]
        ]
    },
    {
        "id": "0ff2194b51980af5",
        "type": "function",
        "z": "109ba03764fc9cf7",
        "g": "356c56c0151696ab",
        "name": " Process",
        "func": "var d = msg.payload;\nmsg.topic = \"\";\nflow.set(\"SIMPENDATA\",RTLTEST(d[22].raw));\nvar json = {\n    \"time\":Date.now(),\n    \"TBD101\":MA(Sensor(d[1]),\"TBD101\")-0.786521739,\n    \"TBD102\":MA(Sensor(d[2]),\"TBD102\")+383,\n    \"TBD103\":MA(Sensor(d[3]),\"TBD103\")+24.84125,\n    \"TBD104\":MA(Sensor(d[4]),\"TBD104\")+0.8775,\n    \"PHS101\":Sensor(d[5]),\n    \"PHS102\":Sensor(d[6]),\n    \"CLR101\":CLRs(d[7]),\n    \"207\":Relay(d[12].raw), //1\n    \"209\":Relay(d[14].raw), //2\n    \"202\":Relay(d[9].raw), //3\n    \"203\":Relay(d[10].raw), //4\n    \"201\":Relay(d[8].raw), //5\n    \"206\":Relay(d[11].raw), //6\n    \"208\":Relay(d[13].raw), //7\n    \"INP1\":Inputs(d[15].raw),\n    \"Level\":RH(d[16].raw),\n    \"Volume\":RV(RH(d[16].raw)),\n    \"FL1\":FLconv(conv(d[17].raw),1),\n    \"FL2\":FLconv(conv(d[19].raw),2),\n    \"TL1\":TLI(d[18].raw),\n    \"TL2\":TLII(d[20].raw),\n    \"FLR\":d[21].raw,\n    \"TLR\":RTLI(d[22].raw)\n}\n\nmsg.payload = json;\nmsg.data = json;\nmsg.topic  = \"SELECT * FROM `devicemap`;\";\nreturn msg;\n\nfunction Sensor(x){\n    try{\n        var val = 0;\n        if(x.raw!=0){\n            val = (x.raw/(Math.pow(10,x.decPoint)));\n        }//Math.pow(10,x.decPoint)\n        return parseFloat(val.toFixed(2));\n    }catch(x){\n        return 0;\n    }\n}\nfunction CLRs(x){\n    try{\n        var val = 0;\n        if(x.raw!=0){\n            val = (x.raw/(Math.pow(10,x.decPoint)));\n        }//Math.pow(10,x.decPoint)\n        if(x.raw<10000 && x.decPoint < 10){\n            var res = parseFloat(val.toFixed(2));\n            res = parseFloat(((1.4949*res) + 0.2077).toFixed(2));\n            flow.set(\"CLRVal\",res);\n            return res;\n        }else{\n            return flow.get(\"CLRVal\");\n        }\n    }catch(x){\n        return 0;\n    }\n}\nfunction Relay(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  while (binary.length<16){\n      binary = \"0\"+binary;\n  }\n  return binary;\n}\nfunction Inputs(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  while (binary.length<24){\n      binary = \"0\"+binary;\n  }\n  return binary;\n}\n\nfunction dTb(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  return binary;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}\n\nfunction RV(height){\n    var x = parseInt(String(height));\n    // var y = parseFloat(((15*x) - 341).toFixed(2));\n    var y = parseFloat(((10.969*x) + 714.76).toFixed(2));\n    if(y<1){\n        y = 0;\n    }\n    return y;\n}\n\nfunction RH(raw){\n    var x = 0;\n    if(raw!=\"-1\"){\n        flow.set(\"rsrvrheight\",raw);\n    }else{\n        raw = flow.get(\"rsrvrheight\");\n    }\n    x = parseInt(String(raw));\n    \n    // var y = parseFloat((((6.25*x) - 2500 - 134)/10).toFixed(2));\n    var y = parseFloat(((0.65 * x) - 278.95).toFixed(2));\n    if(y<1){\n        y = 0;\n    }\n    return y;\n}\nfunction TLI(x){\n    return x+30782623;\n}\nfunction TLII(x){\n    return x+5729748;\n}\nfunction RTLI(x){\n    var cacahan = (x*0.0212253168580371);\n    var totalizerdti = 36030941.9021653;\n    return parseFloat((totalizerdti+cacahan).toFixed(2));\n}\nfunction RTLTEST(x){\n    var cacahan = (0.02166704216727190*x) - 0.36392347914515900;\n    var totalizerdti = 36030939.92;\n    return parseFloat((cacahan+totalizerdti).toFixed(2));\n}\nfunction conv(x) {\n    var val = parseInt(String(x));\n    var r1 = [400, 2000];\n    var r2 = [0, 833.33];\n    var res = (val - r1[0]) * (r2[1] - r2[0]) / (r1[1] - r1[0]) + r2[0];\n    return res;\n}\n\nfunction FLconv(x,y){\n    if(y==1){\n        return parseFloat((x+10).toFixed(\"3\"));\n    }else if(y==2){\n        return parseFloat((x+13).toFixed(\"3\"));\n    }\n}\n\nfunction MA(x,y){\n    var val = [];\n    if(flow.get(\"MA-\"+String(y))==undefined){\n        flow.set(\"MA-\"+String(y),[x]);\n        val = flow.get(\"MA-\"+String(y));\n        return avr(val);\n    }else{\n        val = flow.get(\"MA-\"+String(y));\n        if(parseInt(String(x)) % 1 === 0)\n        val.push(x);\n        \n        if(val.length>5){\n            val.shift();\n        }\n        flow.set(\"MA-\"+String(y),val);\n        return avr(val);\n    }\n}\nfunction avr(val){\n    //average\n    var res = 0;\n    for(i=0;i<val.length;i++){\n        res += val[i];\n    }\n    return parseFloat((res/val.length).toFixed(2));\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 440,
        "wires": [
            [
                "59da8cb889b0f1c6",
                "8ebe9a7cd88e7204"
            ]
        ]
    },
    {
        "id": "6fba0ac830bc2beb",
        "type": "inject",
        "z": "109ba03764fc9cf7",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "1381632",
        "payloadType": "num",
        "x": 120,
        "y": 940,
        "wires": [
            [
                "2e239441424691a8"
            ]
        ]
    },
    {
        "id": "2e239441424691a8",
        "type": "function",
        "z": "109ba03764fc9cf7",
        "name": "dTb",
        "func": "msg.payload = dTb(msg.payload);\nwhile(msg.payload.length<24){\n    msg.payload = \"0\" + msg.payload;\n}\nreturn msg;\n\nfunction dTb(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  return binary;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 960,
        "wires": [
            [
                "fd7be4d8a7b67dc5",
                "821053bbdd9e07d0",
                "ae3b1526584140ad"
            ]
        ]
    },
    {
        "id": "fd7be4d8a7b67dc5",
        "type": "debug",
        "z": "109ba03764fc9cf7",
        "name": " ",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 400,
        "y": 1100,
        "wires": []
    },
    {
        "id": "821053bbdd9e07d0",
        "type": "function",
        "z": "109ba03764fc9cf7",
        "name": "bTd",
        "func": "msg.payload = bTd(msg.payload);\nreturn msg;\n\nfunction dTb(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  return binary;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 960,
        "wires": [
            [
                "50dcb4fdbf045355",
                "81ad5f749080ab60"
            ]
        ]
    },
    {
        "id": "b29df7a3e3dee00f",
        "type": "inject",
        "z": "109ba03764fc9cf7",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "000101010001010100000000",
        "payloadType": "str",
        "x": 390,
        "y": 900,
        "wires": [
            [
                "821053bbdd9e07d0",
                "21bc0667110279bb"
            ]
        ]
    },
    {
        "id": "50dcb4fdbf045355",
        "type": "debug",
        "z": "109ba03764fc9cf7",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 650,
        "y": 1040,
        "wires": []
    },
    {
        "id": "81ad5f749080ab60",
        "type": "function",
        "z": "109ba03764fc9cf7",
        "name": "dTb",
        "func": "msg.payload = dTb(msg.payload);\nreturn msg;\n\nfunction dTb(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  return binary;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 960,
        "wires": [
            [
                "6d6c9da2b6194e43"
            ]
        ]
    },
    {
        "id": "6d6c9da2b6194e43",
        "type": "debug",
        "z": "109ba03764fc9cf7",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 860,
        "y": 1100,
        "wires": []
    },
    {
        "id": "59da8cb889b0f1c6",
        "type": "mysql",
        "z": "109ba03764fc9cf7",
        "g": "356c56c0151696ab",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 190,
        "y": 500,
        "wires": [
            [
                "533fb2134f93d9f0"
            ]
        ]
    },
    {
        "id": "533fb2134f93d9f0",
        "type": "function",
        "z": "109ba03764fc9cf7",
        "g": "356c56c0151696ab",
        "name": " ",
        "func": "var d = msg.payload;\nmsg.topic = \"\";\nvar actual = msg.data;\nvar arr = [];\n// for(i=0;i<d.length;i++){\n//     var bit = rs(actual[String(d[i].RelayIoT)]).split(\"\")[d[i].Channel-1];\n//     msg.topic += \"UPDATE `devicemap` SET `Status` = \"+String(bit)+\" WHERE `No` = \"+String(d[i].No)+\";\"\n// }\nmsg.topic += \"Select * from `alldata` order by epo desc limit 1;\";\nmsg.topic += \"SELECT * FROM `devicemap` order by `No` ASC;\";\nreturn msg;\n// RelayIoT\nfunction rs(str) {\n    var splitString = str.split(\"\");\n    var reverseArray = splitString.reverse(); \n    var joinArray = reverseArray.join(\"\");\n    return joinArray;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 500,
        "wires": [
            [
                "06dee1c8e8413707"
            ]
        ]
    },
    {
        "id": "06dee1c8e8413707",
        "type": "mysql",
        "z": "109ba03764fc9cf7",
        "g": "356c56c0151696ab",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 450,
        "y": 500,
        "wires": [
            [
                "dc6b207be74c6736",
                "eaa6b0ac5f0a148a"
            ]
        ]
    },
    {
        "id": "dc6b207be74c6736",
        "type": "function",
        "z": "109ba03764fc9cf7",
        "g": "356c56c0151696ab",
        "name": " ",
        "func": "var d = msg.payload[0][0];\nvar actual = msg.data;\nmsg.topic = \"INSERT INTO `alldata`(`epo`, `Stat`, `Turbidity_Raw`, `pH_Raw`, `Flow_Rate_Raw`, `Totalizer_Raw`, `Turbidity_Product`, `pH_Product`, `Chlorine_Product`, `Flow_Rate_Product`, `Totalizer_Product`, `Turbidity_Sedimentation_A`, `Turbidity_Sedimentation_B`, `Reservoir_Level`, `Reservoir_Volume`, `SA1`, `SA2`, `SA3`, `SA4`, `SA5`, `SA6`, `SA7`, `SA8`, `SB1`, `SB2`, `SB3`, `SB4`, `SB5`, `SB6`, `SB7`, `SB8`, `FC1IN1`, `FC1OU1`, `FC1DR1`, `FC1BL1`, `FC1BW1`, `FC1IN2`, `FC1OU2`, `FC1DR2`, `FC1BL2`, `FC1BW2`, `FC1IN3`, `FC1OU3`, `FC1DR3`, `FC1BL3`, `FC1BW3`, `FC1IN4`, `FC1OU4`, `FC1DR4`, `FC1BL4`, `FC1BW4`, `FC2IN1`, `FC2OU1`, `FC2DR1`, `FC2BL1`, `FC2BW1`, `FC2IN2`, `FC2OU2`, `FC2DR2`, `FC2BL2`, `FC2BW2`, `FC2IN3`, `FC2OU3`, `FC2DR3`, `FC2BL3`, `FC2BW3`, `FC2IN4`, `FC2OU4`, `FC2DR4`, `FC2BL4`, `FC2BW4`, `FAD1`, `FAD2`, `FAD3`, `FAD4`, `FAD5`, `FAD6`, `FAD7`, `FAD8`, `FAD9`, `FBD1`, `FBD2`, `FBD3`, `FBD4`, `FBD5`, `FBD6`, `FBD7`, `FBD8`, `FBD9`, `INP`, `FLOWRATE_PRODUCT_1`, `TOTALIZER_PRODUCT_1`, `FLOWRATE_PRODUCT_2`, `TOTALIZER_PRODUCT_2`)\";\nmsg.topic += \"VALUES (\";\n// msg.topic += \"'[value-1]','[value-2]','[value-3]','[value-4]','[value-5]','[value-6]','[value-7]','[value-8]','[value-9]','[value-10]','[value-11]','[value-12]','[value-13]','[value-14]','[value-15]','[value-16]','[value-17]','[value-18]','[value-19]','[value-20]','[value-21]','[value-22]','[value-23]','[value-24]','[value-25]','[value-26]','[value-27]','[value-28]','[value-29]','[value-30]','[value-31]','[value-32]','[value-33]','[value-34]','[value-35]','[value-36]','[value-37]','[value-38]','[value-39]','[value-40]','[value-41]','[value-42]','[value-43]','[value-44]','[value-45]','[value-46]','[value-47]','[value-48]','[value-49]','[value-50]','[value-51]','[value-52]','[value-53]','[value-54]','[value-55]','[value-56]','[value-57]','[value-58]','[value-59]','[value-60]','[value-61]','[value-62]','[value-63]','[value-64]','[value-65]','[value-66]','[value-67]','[value-68]','[value-69]','[value-70]','[value-71]','[value-72]','[value-73]','[value-74]','[value-75]','[value-76]','[value-77]','[value-78]','[value-79]','[value-80]','[value-81]','[value-82]','[value-83]','[value-84]','[value-85]','[value-86]','[value-87]')\"\nmsg.topic += String(actual.time)+\",\";\nmsg.topic += \"0,\";\nmsg.topic += String(actual.TBD102)+\",\";\nmsg.topic += String(actual.PHS101)+\",\";\nmsg.topic += String(actual.FLR)+\",\";    //\"0,\";\nmsg.topic += String(actual.TLR)+\",\";    //\"0,\";\nmsg.topic += String(actual.TBD101)+\",\";\nmsg.topic += String(actual.PHS102)+\",\";\nmsg.topic += String(actual.CLR101)+\",\";\nmsg.topic += String(actual.FL1+actual.FL2)+\",\";\nmsg.topic += String(actual.TL1+actual.TL2)+\",\";\nmsg.topic += String(actual.TBD104)+\",\";\nmsg.topic += String(actual.TBD103)+\",\";\nmsg.topic += String(actual.Level)+\",\";\nmsg.topic += String(actual.Volume)+\",\";\nfor(i=15;i<=88;i++){\n    msg.topic += d[Object.keys(d)[i]];\n    if(i!=88){\n        msg.topic += \",\";\n    }\n}\nmsg.topic += \",'\"+String(actual.INP1)+\"'\";\n\n// msg.topic += \",'000000000000000100000000'\";\n// msg.topic += \",'010000000000000100000000'\";\nmsg.topic += \",\"+String(actual.FL1);\nmsg.topic += \",\"+String(actual.TL1);\nmsg.topic += \",\"+String(actual.FL2);\nmsg.topic += \",\"+String(actual.TL2);\nmsg.topic += \")\";\nmsg.payload = msg.topic.split(\",\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 500,
        "wires": [
            [
                "e2fb6b66028b7105",
                "aa7ab170d2d94631"
            ]
        ]
    },
    {
        "id": "aa7ab170d2d94631",
        "type": "mysql",
        "z": "109ba03764fc9cf7",
        "g": "356c56c0151696ab",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 710,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "8ebe9a7cd88e7204",
        "type": "debug",
        "z": "109ba03764fc9cf7",
        "name": "debug 18",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 870,
        "y": 420,
        "wires": []
    },
    {
        "id": "cca36ee819fa1caa",
        "type": "switch",
        "z": "109ba03764fc9cf7",
        "name": " ",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "newGateway",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1170,
        "y": 160,
        "wires": [
            [
                "d9b186fc5f921232",
                "a2cd329ff12adb49"
            ]
        ]
    },
    {
        "id": "d9b186fc5f921232",
        "type": "link out",
        "z": "109ba03764fc9cf7",
        "name": "toNewGateway",
        "links": [
            "97d83e030cb49df5"
        ],
        "x": 1255,
        "y": 180,
        "wires": []
    },
    {
        "id": "9cb886fcb481035a",
        "type": "switch",
        "z": "109ba03764fc9cf7",
        "name": " ",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "newGateway",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1310,
        "y": 100,
        "wires": [
            [
                "a38a422f065cafe6",
                "a2cd329ff12adb49"
            ]
        ]
    },
    {
        "id": "51fdc7da0d7ee1e8",
        "type": "ping",
        "z": "109ba03764fc9cf7",
        "protocol": "Automatic",
        "mode": "timed",
        "name": " ",
        "host": "51.15.242.36",
        "timer": "1",
        "inputs": 0,
        "x": 140,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "56c91b9fb8330e91",
        "type": "debug",
        "z": "109ba03764fc9cf7",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 550,
        "y": 660,
        "wires": []
    },
    {
        "id": "27a1a66a3fd7b3fd",
        "type": "mqtt out",
        "z": "109ba03764fc9cf7",
        "name": "",
        "topic": "DTIPING",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "c12dcd7ffa14584b",
        "x": 340,
        "y": 660,
        "wires": []
    },
    {
        "id": "b308769cce5428ab",
        "type": "mqtt in",
        "z": "109ba03764fc9cf7",
        "name": "",
        "topic": "DTIRequest",
        "qos": "2",
        "datatype": "auto",
        "broker": "c12dcd7ffa14584b",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 130,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "1a7fff2950aa27a6",
        "type": "debug",
        "z": "109ba03764fc9cf7",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 690,
        "y": 820,
        "wires": []
    },
    {
        "id": "ba0279f3a6c20a31",
        "type": "trigger",
        "z": "109ba03764fc9cf7",
        "name": " ",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "1",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 250,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "78bac339c734c344",
        "type": "mysql",
        "z": "109ba03764fc9cf7",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 390,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "909329922e4f0753",
        "type": "function",
        "z": "109ba03764fc9cf7",
        "name": " ",
        "func": "msg.topic = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 270,
        "y": 760,
        "wires": [
            [
                "78bac339c734c344"
            ]
        ]
    },
    {
        "id": "c259445899aebbca",
        "type": "mqtt out",
        "z": "109ba03764fc9cf7",
        "name": "",
        "topic": "DTIFeedback",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "c12dcd7ffa14584b",
        "x": 560,
        "y": 760,
        "wires": []
    },
    {
        "id": "0e54c634506d50c3",
        "type": "mqtt in",
        "z": "109ba03764fc9cf7",
        "name": "",
        "topic": "DTIDone",
        "qos": "2",
        "datatype": "auto",
        "broker": "c12dcd7ffa14584b",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 140,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "adcf6be56d739445",
        "type": "json",
        "z": "109ba03764fc9cf7",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 270,
        "y": 820,
        "wires": [
            [
                "2d2cfe3e56f6d1af"
            ]
        ]
    },
    {
        "id": "2d2cfe3e56f6d1af",
        "type": "function",
        "z": "109ba03764fc9cf7",
        "name": " ",
        "func": "var d = msg.payload;\nmsg.topic = \"\";\nfor(i=0;i<d.length;i++){\n    msg.topic += \"UPDATE `alldata` SET `Stat` = 1 WHERE `epo` = \"+String(d[i].epo)+\";\";\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 820,
        "wires": [
            [
                "e0dea91204929a60"
            ]
        ]
    },
    {
        "id": "e0dea91204929a60",
        "type": "mysql",
        "z": "109ba03764fc9cf7",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 530,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "ffddd5e81d7a2df4",
        "type": "debug",
        "z": "109ba03764fc9cf7",
        "g": "356c56c0151696ab",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 520,
        "y": 400,
        "wires": []
    },
    {
        "id": "22a1b508b105efb6",
        "type": "inject",
        "z": "109ba03764fc9cf7",
        "g": "356c56c0151696ab",
        "name": " ",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 400,
        "wires": [
            [
                "0543cba00896a04f"
            ]
        ]
    },
    {
        "id": "46d1ec38782095d3",
        "type": "debug",
        "z": "109ba03764fc9cf7",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 880,
        "y": 360,
        "wires": []
    },
    {
        "id": "23a7950c7ddd982f",
        "type": "function",
        "z": "109ba03764fc9cf7",
        "name": " ",
        "func": "msg.reset = \"Active\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 80,
        "wires": [
            [
                "2b3b5985e44cf582"
            ]
        ]
    },
    {
        "id": "f40599b10438bfb1",
        "type": "link in",
        "z": "109ba03764fc9cf7",
        "name": "",
        "links": [
            "b5c4671757a63ed7"
        ],
        "x": 575,
        "y": 80,
        "wires": [
            [
                "23a7950c7ddd982f"
            ]
        ]
    },
    {
        "id": "79fca270a406b95e",
        "type": "inject",
        "z": "109ba03764fc9cf7",
        "name": "GoScan",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "115",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "update `main` set `Traffic` = 'GoScan';",
        "payload": "",
        "payloadType": "date",
        "x": 300,
        "y": 40,
        "wires": [
            [
                "ee8c7e433e1937c1"
            ]
        ]
    },
    {
        "id": "5a373f4a4ef21d89",
        "type": "inject",
        "z": "109ba03764fc9cf7",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "000000000000000100000000",
        "payloadType": "str",
        "x": 180,
        "y": 1240,
        "wires": [
            [
                "dd7888e93f4d01fa"
            ]
        ]
    },
    {
        "id": "dd7888e93f4d01fa",
        "type": "function",
        "z": "109ba03764fc9cf7",
        "name": "",
        "func": "msg.payload = inp(msg.payload,7);\nreturn msg;\nfunction reverse(str) {\n    var splitString = str.split(\"\");\n    var reverseArray = splitString.reverse();\n    var joinArray = reverseArray.join(\"\");\n    return joinArray;\n}\nfunction inp(x,y){\n    var dat = reverse(x.substring(0,16));\n    var arr = [];\n    var count = 0;\n    //01234\n    for(i=0;i<dat.length;i++){\n        count++;\n        if(count>=2 || count == 0){\n            arr.push(dat.substring(i-1,i+1));\n            count = 0;\n        }\n    }\n    var res = 0;\n    if(arr[y][0]==1){\n        res = 2;\n    }else if(arr[y][1]==1){\n        res = 1;\n    }else{\n        res = 0;\n    }\n    return res;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 1240,
        "wires": [
            [
                "fc4f9d1239d93031"
            ]
        ]
    },
    {
        "id": "fc4f9d1239d93031",
        "type": "debug",
        "z": "109ba03764fc9cf7",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 580,
        "y": 1220,
        "wires": []
    },
    {
        "id": "c3b2bbfc7f1c050b",
        "type": "inject",
        "z": "109ba03764fc9cf7",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 570,
        "y": 20,
        "wires": [
            [
                "cbaa07bc77c21b05"
            ]
        ]
    },
    {
        "id": "cbaa07bc77c21b05",
        "type": "function",
        "z": "109ba03764fc9cf7",
        "name": "",
        "func": "msg.payload = flow.get(\"MA-TBD102\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 20,
        "wires": [
            [
                "42b74939ae21259f"
            ]
        ]
    },
    {
        "id": "42b74939ae21259f",
        "type": "debug",
        "z": "109ba03764fc9cf7",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 880,
        "y": 20,
        "wires": []
    },
    {
        "id": "b24705018b9acbc1",
        "type": "subflow:995c7ab2e7243cc5",
        "z": "109ba03764fc9cf7",
        "name": "",
        "x": 910,
        "y": 120,
        "wires": [
            [
                "655dc5d9410db867"
            ],
            [
                "b5c4671757a63ed7"
            ]
        ]
    },
    {
        "id": "2b3b5985e44cf582",
        "type": "trigger",
        "z": "109ba03764fc9cf7",
        "name": " ",
        "op1": "",
        "op2": "",
        "op1type": "pay",
        "op2type": "nul",
        "duration": "0",
        "extend": true,
        "overrideDelay": false,
        "units": "hr",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 790,
        "y": 120,
        "wires": [
            [
                "b24705018b9acbc1"
            ]
        ]
    },
    {
        "id": "eaa6b0ac5f0a148a",
        "type": "debug",
        "z": "109ba03764fc9cf7",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 740,
        "y": 620,
        "wires": []
    },
    {
        "id": "ae3b1526584140ad",
        "type": "debug",
        "z": "109ba03764fc9cf7",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload.length",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 420,
        "y": 1040,
        "wires": []
    },
    {
        "id": "21bc0667110279bb",
        "type": "debug",
        "z": "109ba03764fc9cf7",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload.length",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 630,
        "y": 920,
        "wires": []
    },
    {
        "id": "7cb7153bf9d9f53f",
        "type": "tab",
        "label": "Inject",
        "disabled": false,
        "info": ""
    },
    {
        "id": "df209d83b7ed4c79",
        "type": "link in",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "links": [
            "8ca4dc23e037c2ae"
        ],
        "x": 75,
        "y": 80,
        "wires": [
            [
                "7057f4cdd3e4cc5f",
                "6c1b00b553b7377f"
            ]
        ]
    },
    {
        "id": "7057f4cdd3e4cc5f",
        "type": "function",
        "z": "7cb7153bf9d9f53f",
        "name": "  ",
        "func": "var d = msg.payload;\nif(msg.payload.split(\",\")[1] == \"0\"){\n    msg.payload = d.split(\",\")[0]+\",1,1,0\";\n    msg.topic = \"old\";\n    return msg;\n}\nif(msg.payload.split(\",\")[2] == \"0\"){\n    msg.payload = d.split(\",\")[0]+\",\"+d.split(\",\")[1]+\",111,1\";\n    // if(d.split(\",\")[1]==\"207\"){\n    //     msg.payload = d.split(\",\")[0]+\",\"+d.split(\",\")[1]+\",111,3\";\n    // }\n    msg.topic = \"new\";\n    return msg;\n}\nmsg.payload  = null;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 190,
        "y": 80,
        "wires": [
            [
                "756c9fbcda09c819"
            ]
        ]
    },
    {
        "id": "896f468aa8fa39c9",
        "type": "delay",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "pauseType": "delay",
        "timeout": "100",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 450,
        "y": 80,
        "wires": [
            [
                "674e15fcce063e1c",
                "def0beb580492a27",
                "779a650ea3841d68"
            ]
        ]
    },
    {
        "id": "674e15fcce063e1c",
        "type": "debug",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 710,
        "y": 80,
        "wires": []
    },
    {
        "id": "9452b5658f25daf0",
        "type": "link out",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "links": [
            "b0fefb63d3c236ca"
        ],
        "x": 655,
        "y": 40,
        "wires": []
    },
    {
        "id": "756c9fbcda09c819",
        "type": "switch",
        "z": "7cb7153bf9d9f53f",
        "name": " ",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 310,
        "y": 80,
        "wires": [
            [
                "896f468aa8fa39c9"
            ]
        ]
    },
    {
        "id": "def0beb580492a27",
        "type": "switch",
        "z": "7cb7153bf9d9f53f",
        "name": "old",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "old",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 40,
        "wires": [
            [
                "9452b5658f25daf0"
            ]
        ]
    },
    {
        "id": "779a650ea3841d68",
        "type": "switch",
        "z": "7cb7153bf9d9f53f",
        "name": "new",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "new",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 120,
        "wires": [
            [
                "1c930879ef370cd1"
            ]
        ]
    },
    {
        "id": "1c930879ef370cd1",
        "type": "link out",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "links": [
            "faf6b5ec5d4c4f99"
        ],
        "x": 655,
        "y": 120,
        "wires": []
    },
    {
        "id": "859b9629ee8b8030",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,202,1,255#",
        "payloadType": "str",
        "x": 210,
        "y": 260,
        "wires": [
            [
                "69b20f305f3cdcb6"
            ]
        ]
    },
    {
        "id": "69b20f305f3cdcb6",
        "type": "mqtt out",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "topic": "gw57/cmd",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "13dfac52.614f14",
        "x": 500,
        "y": 220,
        "wires": []
    },
    {
        "id": "2b65a3cc94e2c172",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,202,0,1#",
        "payloadType": "str",
        "x": 300,
        "y": 220,
        "wires": [
            [
                "69b20f305f3cdcb6"
            ]
        ]
    },
    {
        "id": "585929917ffee8c9",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,202,1,0#",
        "payloadType": "str",
        "x": 200,
        "y": 300,
        "wires": [
            [
                "69b20f305f3cdcb6"
            ]
        ]
    },
    {
        "id": "e950dc1d1e9ebb15",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 180,
        "y": 380,
        "wires": [
            [
                "7ad41d2a70b619dc"
            ]
        ]
    },
    {
        "id": "d0b858590920978c",
        "type": "function",
        "z": "7cb7153bf9d9f53f",
        "name": "function 1",
        "func": "var d = msg.payload;\nif(d % 1 === 0){\n    msg.payload = \"OK\";\n}else{\n    msg.payload = \"No\";\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 200,
        "wires": [
            [
                "c08c8b88c75371df"
            ]
        ]
    },
    {
        "id": "7ad41d2a70b619dc",
        "type": "function",
        "z": "7cb7153bf9d9f53f",
        "name": " ",
        "func": "msg.payload = NaN;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 380,
        "wires": [
            [
                "d6e1cd2b64c67468"
            ]
        ]
    },
    {
        "id": "c08c8b88c75371df",
        "type": "debug",
        "z": "7cb7153bf9d9f53f",
        "name": "debug 17",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 830,
        "y": 180,
        "wires": []
    },
    {
        "id": "d6e1cd2b64c67468",
        "type": "subflow:e2bc56d21df6c7e2",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "x": 510,
        "y": 400,
        "wires": [
            [
                "d0b858590920978c"
            ],
            []
        ]
    },
    {
        "id": "6c1b00b553b7377f",
        "type": "function",
        "z": "7cb7153bf9d9f53f",
        "name": "  ",
        "func": "var d = msg.payload;\nif(msg.payload.split(\",\")[2] == \"1\"){\n    msg.payload = d.split(\",\")[0]+\",\"+d.split(\",\")[1]+\",111,\"+String(parseInt(d.split(\",\")[3]+256));\n    msg.topic = \"new\";\n    return msg;\n}\nmsg.payload  = null;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 190,
        "y": 160,
        "wires": [
            [
                "2f781aba214ca9a4"
            ]
        ]
    },
    {
        "id": "2f781aba214ca9a4",
        "type": "switch",
        "z": "7cb7153bf9d9f53f",
        "name": " ",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 310,
        "y": 160,
        "wires": [
            [
                "147e41391d9c30ea"
            ]
        ]
    },
    {
        "id": "147e41391d9c30ea",
        "type": "delay",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 440,
        "y": 160,
        "wires": [
            [
                "779a650ea3841d68"
            ]
        ]
    },
    {
        "id": "77fcb87c4f5d04f7",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,206,0,1#",
        "payloadType": "str",
        "x": 340,
        "y": 340,
        "wires": [
            [
                "69b20f305f3cdcb6"
            ]
        ]
    },
    {
        "id": "9ce2a784ea2c3609",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "511",
        "payloadType": "num",
        "x": 110,
        "y": 520,
        "wires": [
            [
                "cc42c5e899c26953"
            ]
        ]
    },
    {
        "id": "cc42c5e899c26953",
        "type": "function",
        "z": "7cb7153bf9d9f53f",
        "name": "dTb",
        "func": "msg.payload = dTb(msg.payload);\nreturn msg;\n\nfunction dTb(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  return binary;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 540,
        "wires": [
            [
                "cac615daa99182db",
                "1d12d3f093ba0f42"
            ]
        ]
    },
    {
        "id": "cac615daa99182db",
        "type": "debug",
        "z": "7cb7153bf9d9f53f",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 450,
        "y": 580,
        "wires": []
    },
    {
        "id": "1d12d3f093ba0f42",
        "type": "function",
        "z": "7cb7153bf9d9f53f",
        "name": "bTd",
        "func": "msg.payload = bTd(msg.payload);\nreturn msg;\n\nfunction dTb(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  return binary;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 540,
        "wires": [
            [
                "91f5426cd9f6e1b9",
                "8f3a03c9f4a2f2b8"
            ]
        ]
    },
    {
        "id": "57c275a999eaa643",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "111111111111111111111111",
        "payloadType": "str",
        "x": 400,
        "y": 480,
        "wires": [
            [
                "1d12d3f093ba0f42"
            ]
        ]
    },
    {
        "id": "91f5426cd9f6e1b9",
        "type": "debug",
        "z": "7cb7153bf9d9f53f",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 670,
        "y": 580,
        "wires": []
    },
    {
        "id": "8f3a03c9f4a2f2b8",
        "type": "function",
        "z": "7cb7153bf9d9f53f",
        "name": "dTb",
        "func": "msg.payload = dTb(msg.payload);\nreturn msg;\n\nfunction dTb(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  return binary;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 540,
        "wires": [
            [
                "e4ee6912497b0909"
            ]
        ]
    },
    {
        "id": "e4ee6912497b0909",
        "type": "debug",
        "z": "7cb7153bf9d9f53f",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 870,
        "y": 580,
        "wires": []
    },
    {
        "id": "fbe4d755a6ddafd2",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,202,1,2064#",
        "payloadType": "str",
        "x": 160,
        "y": 800,
        "wires": [
            [
                "d906a2040c6a3c99"
            ]
        ]
    },
    {
        "id": "d906a2040c6a3c99",
        "type": "mqtt out",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "topic": "gw57/cmd",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "13dfac52.614f14",
        "x": 440,
        "y": 760,
        "wires": []
    },
    {
        "id": "4cdd527a64bc3531",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,202,0,1#",
        "payloadType": "str",
        "x": 140,
        "y": 760,
        "wires": [
            [
                "d906a2040c6a3c99"
            ]
        ]
    },
    {
        "id": "52eadf7a30eda97c",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,202,1,0#",
        "payloadType": "str",
        "x": 140,
        "y": 840,
        "wires": [
            [
                "d906a2040c6a3c99"
            ]
        ]
    },
    {
        "id": "a38e88efd9af3ed2",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,207,1,8#",
        "payloadType": "str",
        "x": 140,
        "y": 960,
        "wires": [
            [
                "f2064ee5159225e5"
            ]
        ]
    },
    {
        "id": "f2064ee5159225e5",
        "type": "mqtt out",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "topic": "gw57/cmd",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "13dfac52.614f14",
        "x": 440,
        "y": 920,
        "wires": []
    },
    {
        "id": "17f464b6426647f0",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,207,0,1#",
        "payloadType": "str",
        "x": 140,
        "y": 920,
        "wires": [
            [
                "f2064ee5159225e5"
            ]
        ]
    },
    {
        "id": "c6e6f3289b0b4e7d",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,207,1,0#",
        "payloadType": "str",
        "x": 140,
        "y": 1000,
        "wires": [
            [
                "f2064ee5159225e5"
            ]
        ]
    },
    {
        "id": "6965bde0ebe935e0",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,1,133#",
        "payloadType": "str",
        "x": 150,
        "y": 1120,
        "wires": [
            [
                "d195a8aa3d182643"
            ]
        ]
    },
    {
        "id": "d195a8aa3d182643",
        "type": "mqtt out",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "topic": "gw57/cmd",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "13dfac52.614f14",
        "x": 440,
        "y": 1080,
        "wires": []
    },
    {
        "id": "8f9ff3be5db01a2a",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,0,1#",
        "payloadType": "str",
        "x": 140,
        "y": 1080,
        "wires": [
            [
                "d195a8aa3d182643"
            ]
        ]
    },
    {
        "id": "a5d21144c3adcf51",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,208,1,0#",
        "payloadType": "str",
        "x": 140,
        "y": 1160,
        "wires": [
            [
                "d195a8aa3d182643"
            ]
        ]
    },
    {
        "id": "4f571c1c36b7208f",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,203,1,20515#",
        "payloadType": "str",
        "x": 160,
        "y": 1280,
        "wires": [
            [
                "8cdc2ae89498e3a8"
            ]
        ]
    },
    {
        "id": "8cdc2ae89498e3a8",
        "type": "mqtt out",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "topic": "gw57/cmd",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "13dfac52.614f14",
        "x": 440,
        "y": 1240,
        "wires": []
    },
    {
        "id": "e1f3290186255f15",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,203,0,1#",
        "payloadType": "str",
        "x": 140,
        "y": 1240,
        "wires": [
            [
                "8cdc2ae89498e3a8"
            ]
        ]
    },
    {
        "id": "937dbd86c89dd8f0",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,203,1,0#",
        "payloadType": "str",
        "x": 140,
        "y": 1320,
        "wires": [
            [
                "8cdc2ae89498e3a8"
            ]
        ]
    },
    {
        "id": "f71fe549be39691d",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,209,1,234#",
        "payloadType": "str",
        "x": 150,
        "y": 1460,
        "wires": [
            [
                "6457604b9158f786"
            ]
        ]
    },
    {
        "id": "6457604b9158f786",
        "type": "mqtt out",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "topic": "gw57/cmd",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "13dfac52.614f14",
        "x": 440,
        "y": 1420,
        "wires": []
    },
    {
        "id": "dfcf10b68aacd1ae",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,209,0,1#",
        "payloadType": "str",
        "x": 140,
        "y": 1420,
        "wires": [
            [
                "6457604b9158f786"
            ]
        ]
    },
    {
        "id": "ecb7a803fb73f84c",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,209,1,0#",
        "payloadType": "str",
        "x": 140,
        "y": 1500,
        "wires": [
            [
                "6457604b9158f786"
            ]
        ]
    },
    {
        "id": "31e4ce3acc1dd6e9",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,201,1,1#",
        "payloadType": "str",
        "x": 700,
        "y": 880,
        "wires": [
            [
                "99fe34a0e959d89d"
            ]
        ]
    },
    {
        "id": "99fe34a0e959d89d",
        "type": "mqtt out",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "topic": "gw57/cmd",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "13dfac52.614f14",
        "x": 1000,
        "y": 840,
        "wires": []
    },
    {
        "id": "f2ea68b889e878b2",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,201,0,1#",
        "payloadType": "str",
        "x": 700,
        "y": 840,
        "wires": [
            [
                "99fe34a0e959d89d"
            ]
        ]
    },
    {
        "id": "41e059d2104ef87f",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,201,1,0#",
        "payloadType": "str",
        "x": 700,
        "y": 920,
        "wires": [
            [
                "99fe34a0e959d89d"
            ]
        ]
    },
    {
        "id": "6627218779c1cb7f",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "256",
        "payloadType": "num",
        "x": 650,
        "y": 1080,
        "wires": [
            [
                "79948183f0e1368f"
            ]
        ]
    },
    {
        "id": "79948183f0e1368f",
        "type": "function",
        "z": "7cb7153bf9d9f53f",
        "name": "dTb",
        "func": "msg.payload = dTb(msg.payload);\nreturn msg;\n\nfunction dTb(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  return binary;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 1100,
        "wires": [
            [
                "f357bc16aa0797c3",
                "ab55b9c274c18596"
            ]
        ]
    },
    {
        "id": "f357bc16aa0797c3",
        "type": "debug",
        "z": "7cb7153bf9d9f53f",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 940,
        "y": 1240,
        "wires": []
    },
    {
        "id": "ab55b9c274c18596",
        "type": "function",
        "z": "7cb7153bf9d9f53f",
        "name": "bTd",
        "func": "msg.payload = bTd(msg.payload);\nreturn msg;\n\nfunction dTb(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  return binary;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1050,
        "y": 1100,
        "wires": [
            [
                "9eb8ba48f0ae06bc",
                "465032a82035f189"
            ]
        ]
    },
    {
        "id": "b68208ff3b485fe8",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "10110010",
        "payloadType": "str",
        "x": 940,
        "y": 1040,
        "wires": [
            [
                "ab55b9c274c18596"
            ]
        ]
    },
    {
        "id": "9eb8ba48f0ae06bc",
        "type": "debug",
        "z": "7cb7153bf9d9f53f",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1190,
        "y": 1180,
        "wires": []
    },
    {
        "id": "465032a82035f189",
        "type": "function",
        "z": "7cb7153bf9d9f53f",
        "name": "dTb",
        "func": "msg.payload = dTb(msg.payload);\nreturn msg;\n\nfunction dTb(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  return binary;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1290,
        "y": 1100,
        "wires": [
            [
                "68af82a2e4a6a0b2"
            ]
        ]
    },
    {
        "id": "68af82a2e4a6a0b2",
        "type": "debug",
        "z": "7cb7153bf9d9f53f",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1400,
        "y": 1240,
        "wires": []
    },
    {
        "id": "4532e3f73af087e4",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,206,0,1#",
        "payloadType": "str",
        "x": 680,
        "y": 660,
        "wires": [
            [
                "0ce9b250f8b06d52"
            ]
        ]
    },
    {
        "id": "0ce9b250f8b06d52",
        "type": "mqtt out",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "topic": "gw57/cmd",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "13dfac52.614f14",
        "x": 980,
        "y": 660,
        "wires": []
    },
    {
        "id": "a03cfdf5b5aaddca",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,206,1,257#",
        "payloadType": "str",
        "x": 690,
        "y": 700,
        "wires": [
            [
                "0ce9b250f8b06d52"
            ]
        ]
    },
    {
        "id": "76afb74203b41761",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,206,1,0#",
        "payloadType": "str",
        "x": 680,
        "y": 740,
        "wires": [
            [
                "0ce9b250f8b06d52"
            ]
        ]
    },
    {
        "id": "1d5fda17a534f76b",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "11,1,0,0#",
        "payloadType": "str",
        "x": 700,
        "y": 300,
        "wires": [
            [
                "d6c6ac46432f7c4d",
                "08c5a132c3554c02"
            ]
        ]
    },
    {
        "id": "d6c6ac46432f7c4d",
        "type": "mqtt out",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "topic": "gw57/cmd",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "13dfac52.614f14",
        "x": 940,
        "y": 460,
        "wires": []
    },
    {
        "id": "08c5a132c3554c02",
        "type": "debug",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 980,
        "y": 400,
        "wires": []
    },
    {
        "id": "bf3616cbb2a357b2",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "d": true,
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "11,1,5,0#",
        "payloadType": "str",
        "x": 700,
        "y": 260,
        "wires": [
            [
                "d6c6ac46432f7c4d",
                "08c5a132c3554c02"
            ]
        ]
    },
    {
        "id": "059352cae7f840d4",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "d": true,
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "11,2,5,0#",
        "payloadType": "str",
        "x": 700,
        "y": 340,
        "wires": [
            [
                "d6c6ac46432f7c4d"
            ]
        ]
    },
    {
        "id": "d7514a633fbaf2eb",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "11,2,0,0#",
        "payloadType": "str",
        "x": 700,
        "y": 380,
        "wires": [
            [
                "d6c6ac46432f7c4d"
            ]
        ]
    },
    {
        "id": "5c3f14deb60d6816",
        "type": "excel",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "file": "/var/www/html/Excel/alldata.xlsx",
        "x": 690,
        "y": 1620,
        "wires": [
            [
                "110ecb470b601a5d"
            ]
        ]
    },
    {
        "id": "a43af353e3dfc7fc",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": " tbd1",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "select * from `alldata`;",
        "payload": "",
        "payloadType": "date",
        "x": 110,
        "y": 1620,
        "wires": [
            [
                "adaeb53a2c76850b"
            ]
        ]
    },
    {
        "id": "adaeb53a2c76850b",
        "type": "mysql",
        "z": "7cb7153bf9d9f53f",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 230,
        "y": 1620,
        "wires": [
            [
                "950c941493cb06b0",
                "5c3f14deb60d6816"
            ]
        ]
    },
    {
        "id": "950c941493cb06b0",
        "type": "debug",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 450,
        "y": 1580,
        "wires": []
    },
    {
        "id": "110ecb470b601a5d",
        "type": "debug",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 870,
        "y": 1840,
        "wires": []
    },
    {
        "id": "aa211593a4a8ce0f",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "d": true,
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "11,3,5,0#",
        "payloadType": "str",
        "x": 700,
        "y": 420,
        "wires": [
            [
                "d6c6ac46432f7c4d"
            ]
        ]
    },
    {
        "id": "1f48ae5596affcf8",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "11,3,0,0#",
        "payloadType": "str",
        "x": 700,
        "y": 460,
        "wires": [
            [
                "08c5a132c3554c02",
                "d6c6ac46432f7c4d"
            ]
        ]
    },
    {
        "id": "21bd4217bfbb6d54",
        "type": "delay",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 100,
        "y": 1880,
        "wires": [
            [
                "ee1c2fa5938ab760"
            ]
        ]
    },
    {
        "id": "ee1c2fa5938ab760",
        "type": "function",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "func": "msg.topic = \"select * from `alldevice` where `deviceid` = 'TBD103' AND time >= 1685548800000;\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 260,
        "y": 1880,
        "wires": [
            [
                "b2b8405fed0c3f6e"
            ]
        ]
    },
    {
        "id": "b2b8405fed0c3f6e",
        "type": "mysql",
        "z": "7cb7153bf9d9f53f",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 410,
        "y": 1880,
        "wires": [
            [
                "ee133468e11ca15a"
            ]
        ]
    },
    {
        "id": "db18d4e80469ebd5",
        "type": "delay",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 100,
        "y": 1940,
        "wires": [
            [
                "bf276dbd2697c0e7"
            ]
        ]
    },
    {
        "id": "bf276dbd2697c0e7",
        "type": "function",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "func": "msg.topic = \"select * from `alldevice` where `deviceid` = 'TBD104' AND time >= 1685548800000;\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 260,
        "y": 1940,
        "wires": [
            [
                "fc4ac4f5420cb2d8"
            ]
        ]
    },
    {
        "id": "fc4ac4f5420cb2d8",
        "type": "mysql",
        "z": "7cb7153bf9d9f53f",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 410,
        "y": 1940,
        "wires": [
            [
                "a0e9bb44ee26e26a"
            ]
        ]
    },
    {
        "id": "07ed8b535038c4cb",
        "type": "delay",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 100,
        "y": 1820,
        "wires": [
            [
                "c01688be0b9563c3"
            ]
        ]
    },
    {
        "id": "c01688be0b9563c3",
        "type": "function",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "func": "msg.topic = \"select * from `alldevice` where `deviceid` = 'TBD102' AND time >= 1685548800000;\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 260,
        "y": 1820,
        "wires": [
            [
                "5bd5f949afb7bac2"
            ]
        ]
    },
    {
        "id": "5bd5f949afb7bac2",
        "type": "mysql",
        "z": "7cb7153bf9d9f53f",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 410,
        "y": 1820,
        "wires": [
            [
                "0f6036db62d198c7"
            ]
        ]
    },
    {
        "id": "c6bcd80fca3f8e0d",
        "type": "delay",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 100,
        "y": 1760,
        "wires": [
            [
                "2080806cc87f1e40"
            ]
        ]
    },
    {
        "id": "2080806cc87f1e40",
        "type": "function",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "func": "msg.topic = \"select * from `alldevice` where `deviceid` = 'TBD101' AND time >= 1685548800000;\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 260,
        "y": 1760,
        "wires": [
            [
                "902b044d6c75535c"
            ]
        ]
    },
    {
        "id": "902b044d6c75535c",
        "type": "mysql",
        "z": "7cb7153bf9d9f53f",
        "mydb": "1280af92.129c7",
        "name": "",
        "x": 410,
        "y": 1760,
        "wires": [
            [
                "eb56c064c16c6b7b"
            ]
        ]
    },
    {
        "id": "69302dcbe1530c9f",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": " ",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 550,
        "y": 1700,
        "wires": [
            [
                "c6bcd80fca3f8e0d"
            ]
        ]
    },
    {
        "id": "eb56c064c16c6b7b",
        "type": "excel",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "file": "/var/www/html/Excel/Juni/Product.xlsx",
        "x": 550,
        "y": 1760,
        "wires": [
            [
                "07ed8b535038c4cb",
                "4282693d9be0bb38"
            ]
        ]
    },
    {
        "id": "0f6036db62d198c7",
        "type": "excel",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "file": "/var/www/html/Excel/Juni/Raw.xlsx",
        "x": 550,
        "y": 1820,
        "wires": [
            [
                "21bd4217bfbb6d54",
                "651026eac1b68177"
            ]
        ]
    },
    {
        "id": "ee133468e11ca15a",
        "type": "excel",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "file": "/var/www/html/Excel/Juni/SedimenB.xlsx",
        "x": 550,
        "y": 1880,
        "wires": [
            [
                "db18d4e80469ebd5",
                "9dce9cc7944ab142"
            ]
        ]
    },
    {
        "id": "a0e9bb44ee26e26a",
        "type": "excel",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "file": "/var/www/html/Excel/Juni/SedimenA.xlsx",
        "x": 550,
        "y": 1940,
        "wires": [
            [
                "2d8c8d9f50532685"
            ]
        ]
    },
    {
        "id": "4282693d9be0bb38",
        "type": "trigger",
        "z": "7cb7153bf9d9f53f",
        "name": " ",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "1",
        "extend": false,
        "overrideDelay": false,
        "units": "hr",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 670,
        "y": 1760,
        "wires": [
            [
                "110ecb470b601a5d"
            ]
        ]
    },
    {
        "id": "651026eac1b68177",
        "type": "trigger",
        "z": "7cb7153bf9d9f53f",
        "name": " ",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "1",
        "extend": false,
        "overrideDelay": false,
        "units": "hr",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 670,
        "y": 1820,
        "wires": [
            [
                "110ecb470b601a5d"
            ]
        ]
    },
    {
        "id": "9dce9cc7944ab142",
        "type": "trigger",
        "z": "7cb7153bf9d9f53f",
        "name": " ",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "1",
        "extend": false,
        "overrideDelay": false,
        "units": "hr",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 670,
        "y": 1880,
        "wires": [
            [
                "110ecb470b601a5d"
            ]
        ]
    },
    {
        "id": "2d8c8d9f50532685",
        "type": "trigger",
        "z": "7cb7153bf9d9f53f",
        "name": " ",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "1",
        "extend": false,
        "overrideDelay": false,
        "units": "hr",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 670,
        "y": 1940,
        "wires": [
            [
                "110ecb470b601a5d"
            ]
        ]
    },
    {
        "id": "017a25af54ac476e",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,201,1,1#",
        "payloadType": "str",
        "x": 160,
        "y": 2160,
        "wires": [
            [
                "e542d1ce9a465eec"
            ]
        ]
    },
    {
        "id": "e542d1ce9a465eec",
        "type": "mqtt out",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "topic": "gw57/cmd",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "13dfac52.614f14",
        "x": 460,
        "y": 2080,
        "wires": []
    },
    {
        "id": "e3fc431fb2a9d5a0",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,201,0,1#",
        "payloadType": "str",
        "x": 160,
        "y": 2080,
        "wires": [
            [
                "e542d1ce9a465eec"
            ]
        ]
    },
    {
        "id": "8f53e057b221a072",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,201,1,0#",
        "payloadType": "str",
        "x": 180,
        "y": 2120,
        "wires": [
            [
                "e542d1ce9a465eec"
            ]
        ]
    },
    {
        "id": "c42f14513f191294",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "3",
        "payloadType": "num",
        "x": 550,
        "y": 2200,
        "wires": [
            [
                "93a0abee714fbaf1"
            ]
        ]
    },
    {
        "id": "93a0abee714fbaf1",
        "type": "function",
        "z": "7cb7153bf9d9f53f",
        "name": "dTb",
        "func": "msg.payload = dTb(msg.payload);\nreturn msg;\n\nfunction dTb(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  return binary;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 2220,
        "wires": [
            [
                "6d827cf6c7a64645",
                "74d5360f377b08ef"
            ]
        ]
    },
    {
        "id": "6d827cf6c7a64645",
        "type": "debug",
        "z": "7cb7153bf9d9f53f",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 890,
        "y": 2260,
        "wires": []
    },
    {
        "id": "74d5360f377b08ef",
        "type": "function",
        "z": "7cb7153bf9d9f53f",
        "name": "bTd",
        "func": "msg.payload = bTd(msg.payload);\nreturn msg;\n\nfunction dTb(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  return binary;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 950,
        "y": 2220,
        "wires": [
            [
                "af7c32fac97f9713",
                "6a389d5ec7070444"
            ]
        ]
    },
    {
        "id": "d179cf5969e40085",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "100000000",
        "payloadType": "str",
        "x": 860,
        "y": 2160,
        "wires": [
            [
                "74d5360f377b08ef"
            ]
        ]
    },
    {
        "id": "af7c32fac97f9713",
        "type": "debug",
        "z": "7cb7153bf9d9f53f",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1110,
        "y": 2260,
        "wires": []
    },
    {
        "id": "6a389d5ec7070444",
        "type": "function",
        "z": "7cb7153bf9d9f53f",
        "name": "dTb",
        "func": "msg.payload = dTb(msg.payload);\nreturn msg;\n\nfunction dTb(decimal) {\n  var binary = \"\";\n  while (decimal > 0) {\n    binary = (decimal % 2) + binary; // add the remainder of dividing by 2 to the beginning of the binary string\n    decimal = Math.floor(decimal / 2); // divide by 2 and round down to get the next decimal value to convert\n  }\n  return binary;\n}\n\nfunction bTd(binary) {\n  var decimal = 0;\n  var binaryArray = binary.split(\"\").reverse(); // split the binary number into an array and reverse it\n  for (var i = 0; i < binaryArray.length; i++) {\n    decimal += binaryArray[i] * Math.pow(2, i); // calculate the decimal value\n  }\n  return decimal;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1190,
        "y": 2220,
        "wires": [
            [
                "0bfd13667da09575"
            ]
        ]
    },
    {
        "id": "0bfd13667da09575",
        "type": "debug",
        "z": "7cb7153bf9d9f53f",
        "name": " ",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1310,
        "y": 2260,
        "wires": []
    },
    {
        "id": "6e0032f7e1c42891",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,201,1,2#",
        "payloadType": "str",
        "x": 160,
        "y": 2200,
        "wires": [
            [
                "e542d1ce9a465eec"
            ]
        ]
    },
    {
        "id": "5feb58c0f4b2e55d",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,201,1,4#",
        "payloadType": "str",
        "x": 160,
        "y": 2240,
        "wires": [
            [
                "e542d1ce9a465eec"
            ]
        ]
    },
    {
        "id": "f08540a721c87ebb",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,201,1,8#",
        "payloadType": "str",
        "x": 160,
        "y": 2280,
        "wires": [
            [
                "e542d1ce9a465eec"
            ]
        ]
    },
    {
        "id": "63f6f8091ebdb009",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,201,1,16#",
        "payloadType": "str",
        "x": 170,
        "y": 2320,
        "wires": [
            [
                "e542d1ce9a465eec"
            ]
        ]
    },
    {
        "id": "5d64943df60fbd49",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,201,1,32#",
        "payloadType": "str",
        "x": 170,
        "y": 2360,
        "wires": [
            [
                "e542d1ce9a465eec"
            ]
        ]
    },
    {
        "id": "40e227fceeda9405",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,201,1,64#",
        "payloadType": "str",
        "x": 170,
        "y": 2400,
        "wires": [
            [
                "e542d1ce9a465eec"
            ]
        ]
    },
    {
        "id": "71c997f18197219c",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,201,1,128#",
        "payloadType": "str",
        "x": 170,
        "y": 2440,
        "wires": [
            [
                "e542d1ce9a465eec"
            ]
        ]
    },
    {
        "id": "84d007468b2d37aa",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,201,1,256#",
        "payloadType": "str",
        "x": 170,
        "y": 2480,
        "wires": [
            [
                "e542d1ce9a465eec"
            ]
        ]
    },
    {
        "id": "3a3a0bdd8c8c7544",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,201,1,511#",
        "payloadType": "str",
        "x": 190,
        "y": 2520,
        "wires": [
            [
                "e542d1ce9a465eec"
            ]
        ]
    },
    {
        "id": "620a16cd162b9be9",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,2,2,206#",
        "payloadType": "str",
        "x": 170,
        "y": 2000,
        "wires": [
            [
                "e542d1ce9a465eec"
            ]
        ]
    },
    {
        "id": "cf2f0cfac2936155",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,2,0,1#",
        "payloadType": "str",
        "x": 180,
        "y": 2040,
        "wires": [
            [
                "e542d1ce9a465eec"
            ]
        ]
    },
    {
        "id": "84fda204d876de47",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,206,0,1#",
        "payloadType": "str",
        "x": 360,
        "y": 1980,
        "wires": [
            [
                "e542d1ce9a465eec"
            ]
        ]
    },
    {
        "id": "e011b77cf9d3cab8",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,206,1,16777215#",
        "payloadType": "str",
        "x": 570,
        "y": 2000,
        "wires": [
            [
                "e542d1ce9a465eec"
            ]
        ]
    },
    {
        "id": "fbe054eebaa3d820",
        "type": "inject",
        "z": "7cb7153bf9d9f53f",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "2,206,1,0#",
        "payloadType": "str",
        "x": 500,
        "y": 2040,
        "wires": [
            [
                "e542d1ce9a465eec"
            ]
        ]
    },
    {
        "id": "04d9f7224e526270",
        "type": "comment",
        "z": "7cb7153bf9d9f53f",
        "name": "Type,DevID,cmd,vparam",
        "info": "",
        "x": 160,
        "y": 720,
        "wires": []
    },
    {
        "id": "29e58916.561bb6",
        "type": "influxdb",
        "hostname": "127.0.0.1",
        "port": "8086",
        "protocol": "http",
        "database": "DTI",
        "name": "InfluxDTI",
        "usetls": false,
        "tls": "",
        "influxdbVersion": "2.0",
        "url": "http://localhost:8086",
        "rejectUnauthorized": true
    },
    {
        "id": "13dfac52.614f14",
        "type": "mqtt-broker",
        "name": "",
        "broker": "localhost",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "1280af92.129c7",
        "type": "MySQLdatabase",
        "name": "DTI",
        "host": "127.0.0.1",
        "port": "3306",
        "db": "DTI",
        "tz": "",
        "charset": "UTF8"
    },
    {
        "id": "f29dc24ba57a62a5",
        "type": "mqtt-broker",
        "name": "",
        "broker": "51.15.243.241",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "c12dcd7ffa14584b",
        "type": "mqtt-broker",
        "name": "",
        "broker": "51.15.242.36",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    }
]